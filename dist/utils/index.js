export const id = (function id() {
    const counters = Object.create({});
    counters['id'] = 0;
    return (prefix = 'id') => {
        if (!(prefix in counters)) {
            counters[prefix] = 0;
        }
        return prefix + '-' + counters[prefix]++;
    };
})();
export const noop = () => void 0;
// ==========TYPE CHECKERS====================================
export const isArray = Array.isArray;
export const isPlainObject = (a) => Object.prototype.toString.call(a) === '[object Object]';
export const isString = (a) => typeof a === 'string';
export const isFunction = (a) => typeof a === 'function';
export function isEmpty(a) {
    if (isArray(a)) {
        return !a.length;
    }
    if (isPlainObject(a)) {
        return !Object.keys(a).length;
    }
    if (typeof a === 'string') {
        return a.trim().length === 0;
    }
    if (typeof a === 'number') {
        return isNaN(a);
    }
    return !a;
}
export const isNotEmpty = (a) => !isEmpty(a);
export const toArray = (a) => [...a];
export const escapeRegExp = (str) => str.replace(/([.+*?=^!:${}()[\]|\\/])/g, '\\$1');
// ==========HELPERS====================================
export function callback(fn, args, ctx) {
    if (typeof fn === 'function') {
        return fn.apply(ctx, args);
    }
    return null;
}
export function unique(arr) {
    return Array.from(new Set(arr));
}
export function forEach(obj, fn) {
    Object.keys(obj).forEach((key) => {
        const value = obj[key];
        fn(value, key);
    });
}
export const assign = Object.assign ||
    function _assign(...args) {
        const to = args[0];
        let from, symbols;
        for (let s = 1; s < args.length; s++) {
            from = Object(args[s]);
            for (const key in from) {
                if (Object.prototype.hasOwnProperty.call(from, key)) {
                    to[key] = from[key];
                }
            }
            if ('getOwnPropertySymbols' in Object) {
                symbols = Object.getOwnPropertySymbols(from);
                for (let i = 0; i < symbols.length; i++) {
                    if (Object.prototype.propertyIsEnumerable.call(from, symbols[i])) {
                        to[symbols[i]] = from[symbols[i]];
                    }
                }
            }
        }
        return to;
    };
export function clone(a) {
    return JSON.parse(JSON.stringify(a));
}
export function stringPlaceholderReplace(str, data) {
    if (isString(str) && str.length && isPlainObject(data)) {
        const keys = Object.keys(data).sort().reverse();
        let reg;
        if (keys.length) {
            const m = keys.join('|');
            reg = new RegExp(':(' + m + ')', 'g');
            return str.replace(reg, function stringChunkReplacer(...args) {
                const replacement = data[args[1]];
                if (replacement === undefined) {
                    return args[0];
                }
                return replacement;
            });
        }
    }
    return str;
}
export function textToLineString(text) {
    const reg = /["'\\\n\r\t\u2028\u2029]/g, toEscapes = {
        '"': '"',
        '\'': '\'',
        '\\': '\\',
        '\n': 'n',
        '\r': 'r',
        '\t': 't',
        '\u2028': '2028',
        '\u2029': '2029',
    };
    return text.replace(reg, (match) => '\\' + toEscapes[match]);
}
// ==========MATH====================================
export function _setDigitsSep(x, sep) {
    const s = String(x), ans = [], j = s.indexOf('.'), start = j !== -1 ? j : s.length, end = j !== -1 ? s.slice(start + 1) : [];
    let count = 0, i = start;
    for (; i >= 0; i--) {
        if (count === 3) {
            count = 0;
            ans[i] = i !== 0 ? sep + s[i] : s[i];
        }
        else {
            ans[i] = s[i];
        }
        count++;
    }
    return ans.concat(end).join('');
}
export function numberFormat(x, dec = 2, decimalSep = '.', digitsSep = ' ') {
    if (!x) {
        return '';
    }
    let ans = parseFloat(String(x));
    if (dec >= 0) {
        const decimalPow = Math.pow(10, dec);
        ans = Math.floor(ans * decimalPow) / decimalPow;
    }
    const n = _setDigitsSep(ans, digitsSep);
    const a = n.split('');
    const decimalPos = a.lastIndexOf('.');
    if (decimalPos >= 0 && decimalSep !== '.') {
        a[decimalPos] = decimalSep;
    }
    return a.join('');
}
export function gt(x, y, eq = false) {
    return eq ? x >= y : x > y;
}
export function lt(x, y, eq = false) {
    return eq ? x <= y : x < y;
}
export function between(x, a, b, eq = false) {
    return eq ? x >= a && x <= b : x > a && x < b;
}
export function isRange(a, b) {
    return typeof a === 'number' && typeof b === 'number' && a < b;
}
export function isInDOM(element, inBody = false) {
    let _ = element, last = null;
    while (_) {
        last = _;
        if (inBody && last === document.body) {
            break;
        }
        _ = _.parentNode;
    }
    return inBody ? last === document.body : last === document;
}
export function shuffle(a) {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}
export function parseQueryString(str) {
    if (str.charAt(0) === '?')
        str = str.substring(1);
    if (!str.length)
        return {};
    const pairs = str.split('&'), params = {};
    for (let i = 0, len = pairs.length; i < len; i++) {
        const pair = pairs[i].split('='), key = decodeURIComponent(pair[0]), value = pair.length === 2 ? decodeURIComponent(pair[1]) : null;
        if (params[key] != null) {
            if (!isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(value);
        }
        else
            params[key] = value;
    }
    return params;
}
export function preventDefault(e) {
    if (!e) {
        if (window.event)
            e = window.event;
        else
            return;
    }
    if (e.preventDefault)
        e.preventDefault();
    if (e.cancelBubble != null)
        e.cancelBubble = true;
    if (e.stopPropagation)
        e.stopPropagation();
    if (window.event)
        e.returnValue = false;
    // if (e.cancel != null) e.cancel = true;
}
export function isValidAge(day, month, year, minAge, maxAge) {
    // depending on the year, calculate the number of days in the month
    const februaryDays = year % 4 === 0 ? 29 : 28, daysInMonth = [31, februaryDays, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    // first, check the incoming month and year are valid.
    if (!month || !day || !year) {
        return false;
    }
    if (1 > month || month > 12) {
        return false;
    }
    if (year < 0) {
        return false;
    }
    if (1 > day || day > daysInMonth[month - 1]) {
        return false;
    }
    // if required, verify the current date is LATER than the incoming date.
    if (minAge !== undefined || maxAge !== undefined) {
        // we get current year
        const currentYear = new Date().getFullYear(), age = currentYear - year;
        if (age < 0) {
            return false;
        }
        if (age < minAge) {
            return false;
        }
        if (age > maxAge) {
            return false;
        }
    }
    return true;
}
export function fileSizeFormat(size /* in bytes */, decimalPoint = '.', thousandsSep = ' ') {
    const units = ['byte', 'Kb', 'Mb', 'Gb', 'Tb'], iMax = units.length;
    let i = 0, result = 0;
    size = parseFloat(String(size));
    while (size >= 1 && i < iMax) {
        result = size;
        size /= 1000; // not 1024
        i++;
    }
    const parts = String(result).split('.'), head = parseInt(parts[0]) === result
        ? result
        : numberFormat(result, 2, decimalPoint, thousandsSep);
    return head + ' ' + units[i === 0 ? 0 : i - 1];
}
/**
 * Opens the provided url by injecting a hidden iframe that calls
 * window.open(), then removes the iframe from the DOM.
 *
 * Prevent reverse tabnabbing phishing attacks caused by _blank
 *
 * https://mathiasbynens.github.io/rel-noopener/
 *
 * https://github.com/danielstjules/blankshield/blob/6e208bf25a44bf50d1a5e85ae96fee0c015d05bc/blankshield.js#L166
 *
 * @param url
 * @param strWindowName
 * @param strWindowFeatures
 */
export function safeOpen(url = '', strWindowName = '', strWindowFeatures = '') {
    if (window.navigator.userAgent.indexOf('MSIE') !== -1) {
        // IE before 11
        const child = open.apply(window, [url, strWindowName, strWindowFeatures]);
        if (child) {
            child.opener = null;
        }
        return child;
    }
    const iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    const iframeDoc = (iframe.contentDocument ||
        iframe.contentWindow.document);
    let openArgs = '"' + url + '"';
    if (strWindowName) {
        openArgs += ', "' + strWindowName + '"';
    }
    if (strWindowFeatures) {
        openArgs += ', "' + strWindowFeatures + '"';
    }
    const script = iframeDoc.createElement('script');
    script.type = 'text/javascript';
    script.text =
        'window.parent = null; window.top = null;' +
            'window.frameElement = null; var child = window.open(' +
            openArgs +
            ');' +
            'if (child) { child.opener = null }';
    iframeDoc.body.appendChild(script);
    const newWin = iframe.contentWindow.child;
    document.body.removeChild(iframe);
    return newWin;
}
export const logger = (function _logger() {
    let _showLog = true;
    const _fn = function (type) {
        return _showLog ? console[type] : noop;
    };
    return {
        off() {
            _showLog = false;
        },
        on() {
            _showLog = true;
        },
        get memory() {
            return _fn('memory');
        },
        get assert() {
            return _fn('assert');
        },
        get clear() {
            return _fn('clear');
        },
        get count() {
            return _fn('count');
        },
        get countReset() {
            return _fn('countReset');
        },
        get debug() {
            return _fn('debug');
        },
        get dir() {
            return _fn('dir');
        },
        get dirxml() {
            return _fn('dirxml');
        },
        get error() {
            return _fn('error');
        },
        get exception() {
            return _fn('exception');
        },
        get group() {
            return _fn('group');
        },
        get groupCollapsed() {
            return _fn('groupCollapsed');
        },
        get groupEnd() {
            return _fn('groupEnd');
        },
        get info() {
            return _fn('info');
        },
        get log() {
            return _fn('log');
        },
        get table() {
            return _fn('table');
        },
        get time() {
            return _fn('time');
        },
        get timeEnd() {
            return _fn('timeEnd');
        },
        get timeLog() {
            return _fn('timeLog');
        },
        get timeStamp() {
            return _fn('timeStamp');
        },
        get trace() {
            return _fn('trace');
        },
        get warn() {
            return _fn('warn');
        },
    };
})();
export function encode(val) {
    return encodeURIComponent(val)
        .replace(/%24/g, '$')
        .replace(/%20/g, '+')
        .replace(/%3A/gi, ':')
        .replace(/%2C/gi, ',')
        .replace(/%5B/gi, '[')
        .replace(/%5D/gi, ']');
}
/**
 * Build query string from object. Recursively!
 * @param params
 * @param prefix
 */
export function buildQueryString(params, prefix) {
    if (params instanceof URLSearchParams) {
        return params.toString();
    }
    const duplicates = {}, str = [];
    for (const prop in params) {
        if (!Object.prototype.hasOwnProperty.call(params, prop)) {
            continue;
        }
        const key = prefix ? prefix + '[' + prop + ']' : prop, value = params[prop];
        let pair;
        if (value !== undefined) {
            if (value === null) {
                pair = encode(key);
            }
            else if (isPlainObject(value)) {
                pair = buildQueryString(value, key);
            }
            else if (isArray(value)) {
                pair = value
                    .reduce(function arrayValuesReducer(acc, item, index) {
                    if (!duplicates[key]) {
                        duplicates[key] = {};
                    }
                    if (!duplicates[key][item]) {
                        duplicates[key][item] = true;
                        return acc.concat(buildQueryString({
                            [key + '[' + index + ']']: item,
                        }));
                    }
                    return acc;
                }, [])
                    .join('&');
            }
            else {
                // scalar type
                pair = encode(key) + '=' + encode(value);
            }
            str.push(pair || key);
        }
    }
    return str.join('&');
}
export function searchParam(name, url) {
    let query = '';
    url = url || window.location;
    if (URL.prototype.searchParams) {
        return new URL(url.toString()).searchParams.get(name);
    }
    if (typeof url !== 'string' && url.search) {
        query = url.search;
    }
    else {
        const loc_str = url.toString();
        const k = loc_str.split('').indexOf('?');
        if (k >= 0) {
            query = loc_str.slice(k);
        }
    }
    const pairs = query.replace(/^\?/, '').split('&');
    for (let i = 0; i < pairs.length; i++) {
        const parts = pairs[i].split('=');
        const key = parts[0] || '';
        if (key.toLowerCase() === name.toLowerCase()) {
            return decodeURIComponent(parts[1]);
        }
    }
    return null;
}
/**
 * Build a URL with a given params
 *
 * @param url
 * @param params
 */
export function buildURL(url, params) {
    if (!params) {
        return url;
    }
    const serializedParams = buildQueryString(params);
    if (serializedParams) {
        const hashIndex = url.indexOf('#');
        if (hashIndex !== -1) {
            url = url.slice(0, hashIndex);
        }
        url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;
    }
    return url;
}
export function extractFieldLabelText(form, fieldName) {
    const field = form.querySelector(`[name='${fieldName}']`);
    let labelText = fieldName;
    if (field) {
        const id = field.getAttribute('id');
        let label, placeholder, title;
        if (id && (label = form.querySelector(`label[for='${id}']`))) {
            labelText = label.textContent;
        }
        else if ((placeholder = field.getAttribute('placeholder')) &&
            placeholder.trim().length) {
            labelText = placeholder;
        }
        else if ((title = field.getAttribute('title')) && title.trim().length) {
            labelText = title;
        }
    }
    return labelText;
}
/**
 * Generate uuid.
 */
export function uuid() {
    return ('' + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) => {
        return (c ^
            (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))).toString(16);
    });
}
export * from './scriptLoader';
export { default as PathResolver } from './PathResolver';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFO0lBQzdCLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVuQixPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksRUFBVSxFQUFFO1FBQ2hDLElBQUksQ0FBQyxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUMsRUFBRTtZQUMxQixRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3JCO1FBRUQsT0FBTyxNQUFNLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO0lBQzFDLENBQUMsQ0FBQztBQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFTCxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsR0FBYyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFFNUMsOERBQThEO0FBQzlELE1BQU0sQ0FBQyxNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ3JDLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQVUsRUFBZ0MsRUFBRSxDQUN6RSxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssaUJBQWlCLENBQUM7QUFDekQsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBVSxFQUFlLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxRQUFRLENBQUM7QUFDM0UsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBVSxFQUFnQyxFQUFFLENBQ3RFLE9BQU8sQ0FBQyxLQUFLLFVBQVUsQ0FBQztB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U0FBUyxDQUFDLENBQUM7SUFDeEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUV0QixNQUFNLFVBQVUsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSSxVQUFVLEtBQUssR0FBRyxFQUFFO1FBQzFDLENBQUMsQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFVLENBQUM7S0FDM0I7SUFFRCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbkIsQ0FBQztBQUVELE1BQU0sVUFBVSxFQUFFLENBQUMsQ0FBUyxFQUFFLENBQVMsRUFBRSxFQUFFLEdBQUcsS0FBSztJQUNsRCxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QixDQUFDO0FBRUQsTUFBTSxVQUFVLEVBQUUsQ0FBQyxDQUFTLEVBQUUsQ0FBUyxFQUFFLEVBQUUsR0FBRyxLQUFLO0lBQ2xELE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUFDLENBQVMsRUFBRSxDQUFTLEVBQUUsQ0FBUyxFQUFFLEVBQUUsR0FBRyxLQUFLO0lBQ2xFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUMvQyxDQUFDO0FBRUQsTUFBTSxVQUFVLE9BQU8sQ0FBQyxDQUFVLEVBQUUsQ0FBVTtJQUM3QyxPQUFPLE9BQU8sQ0FBQyxLQUFLLFFBQVEsSUFBSSxPQUFPLENBQUMsS0FBSyxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsTUFBTSxVQUFVLE9BQU8sQ0FBQyxPQUFhLEVBQUUsTUFBTSxHQUFHLEtBQUs7SUFDcEQsSUFBSSxDQUFDLEdBQWdCLE9BQU8sRUFDM0IsSUFBSSxHQUFnQixJQUFJLENBQUM7SUFFMUIsT0FBTyxDQUFDLEVBQUU7UUFDVCxJQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsSUFBSSxNQUFNLElBQUksSUFBSSxLQUFLLFFBQVEsQ0FBQyxJQUFJLEVBQUU7WUFDckMsTUFBTTtTQUNOO1FBQ0QsQ0FBQyxHQUFHLENBQUMsQ0FBQyxVQUFVLENBQUM7S0FDakI7SUFFRCxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxRQUFRLENBQUM7QUFDNUQsQ0FBQztBQUVELE1BQU0sVUFBVSxPQUFPLENBQUksQ0FBTTtJQUNoQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRVosS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ1QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNaLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDVDtJQUVELE9BQU8sQ0FBQyxDQUFDO0FBQ1YsQ0FBQztBQUVELE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxHQUFXO0lBQzNDLElBQUksR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHO1FBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNO1FBQUUsT0FBTyxFQUFFLENBQUM7SUFFM0IsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFDM0IsTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNiLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDakQsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFDL0IsR0FBRyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUNqQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDaEUsSUFBSyxNQUFjLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFO1lBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUUsTUFBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2xDLE1BQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFFLE1BQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQzlDO1lBQ0EsTUFBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNqQzs7WUFBTyxNQUFjLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO0tBQ3BDO0lBQ0QsT0FBTyxNQUFNLENBQUM7QUFDZixDQUFDO0FBRUQsTUFBTSxVQUFVLGNBQWMsQ0FBQyxDQUFRO0lBQ3RDLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDUCxJQUFJLE1BQU0sQ0FBQyxLQUFLO1lBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7O1lBQzlCLE9BQU87S0FDWjtJQUVELElBQUksQ0FBQyxDQUFDLGNBQWM7UUFBRSxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDekMsSUFBSSxDQUFDLENBQUMsWUFBWSxJQUFJLElBQUk7UUFBRSxDQUFDLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztJQUNsRCxJQUFJLENBQUMsQ0FBQyxlQUFlO1FBQUUsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO0lBQzNDLElBQUksTUFBTSxDQUFDLEtBQUs7UUFBRSxDQUFDLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztJQUN4Qyx5Q0FBeUM7QUFDMUMsQ0FBQztBQUVELE1BQU0sVUFBVSxVQUFVLENBQ3pCLEdBQVcsRUFDWCxLQUFhLEVBQ2IsSUFBWSxFQUNaLE1BQWMsRUFDZCxNQUFjO0lBRWQsbUVBQW1FO0lBQ25FLE1BQU0sWUFBWSxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFDNUMsV0FBVyxHQUFHLENBQUMsRUFBRSxFQUFFLFlBQVksRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUxRSxzREFBc0Q7SUFDdEQsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRTtRQUM1QixPQUFPLEtBQUssQ0FBQztLQUNiO0lBQ0QsSUFBSSxDQUFDLEdBQUcsS0FBSyxJQUFJLEtBQUssR0FBRyxFQUFFLEVBQUU7UUFDNUIsT0FBTyxLQUFLLENBQUM7S0FDYjtJQUNELElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTtRQUNiLE9BQU8sS0FBSyxDQUFDO0tBQ2I7SUFDRCxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUU7UUFDNUMsT0FBTyxLQUFLLENBQUM7S0FDYjtJQUVELHdFQUF3RTtJQUN4RSxJQUFJLE1BQU0sS0FBSyxTQUFTLElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRTtRQUNqRCxzQkFBc0I7UUFDdEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsRUFDM0MsR0FBRyxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFFMUIsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO1lBQ1osT0FBTyxLQUFLLENBQUM7U0FDYjtRQUNELElBQUksR0FBRyxHQUFHLE1BQU0sRUFBRTtZQUNqQixPQUFPLEtBQUssQ0FBQztTQUNiO1FBQ0QsSUFBSSxHQUFHLEdBQUcsTUFBTSxFQUFFO1lBQ2pCLE9BQU8sS0FBSyxDQUFDO1NBQ2I7S0FDRDtJQUVELE9BQU8sSUFBSSxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sVUFBVSxjQUFjLENBQzdCLElBQVksQ0FBQyxjQUFjLEVBQzNCLFlBQVksR0FBRyxHQUFHLEVBQ2xCLFlBQVksR0FBRyxHQUFHO0lBRWxCLE1BQU0sS0FBSyxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUM3QyxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNyQixJQUFJLENBQUMsR0FBRyxDQUFDLEVBQ1IsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUVaLElBQUksR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFaEMsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUU7UUFDN0IsTUFBTSxHQUFHLElBQUksQ0FBQztRQUNkLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQyxXQUFXO1FBQ3pCLENBQUMsRUFBRSxDQUFDO0tBQ0o7SUFFRCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUN0QyxJQUFJLEdBQ0gsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU07UUFDNUIsQ0FBQyxDQUFDLE1BQU07UUFDUixDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsWUFBWSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBRXpELE9BQU8sSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDaEQsQ0FBQztBQUVEOzs7Ozs7Ozs7Ozs7O0dBYUc7QUFDSCxNQUFNLFVBQVUsUUFBUSxDQUN2QixHQUFHLEdBQUcsRUFBRSxFQUNSLGFBQWEsR0FBRyxFQUFFLEVBQ2xCLGlCQUFpQixHQUFHLEVBQUU7SUFFdEIsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDdEQsZUFBZTtRQUNmLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxFQUFFLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7UUFDMUUsSUFBSSxLQUFLLEVBQUU7WUFDVixLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztTQUNwQjtRQUNELE9BQU8sS0FBSyxDQUFDO0tBQ2I7SUFFRCxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBc0IsQ0FBQztJQUNyRSxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDOUIsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBZTtRQUN2QyxNQUFNLENBQUMsYUFBcUIsQ0FBQyxRQUFRLENBQWEsQ0FBQztJQUVyRCxJQUFJLFFBQVEsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUMvQixJQUFJLGFBQWEsRUFBRTtRQUNsQixRQUFRLElBQUksS0FBSyxHQUFHLGFBQWEsR0FBRyxHQUFHLENBQUM7S0FDeEM7SUFDRCxJQUFJLGlCQUFpQixFQUFFO1FBQ3RCLFFBQVEsSUFBSSxLQUFLLEdBQUcsaUJBQWlCLEdBQUcsR0FBRyxDQUFDO0tBQzVDO0lBRUQsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqRCxNQUFNLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxJQUFJO1FBQ1YsMENBQTBDO1lBQzFDLHNEQUFzRDtZQUN0RCxRQUFRO1lBQ1IsSUFBSTtZQUNKLG9DQUFvQyxDQUFDO0lBQ3RDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLE1BQU0sTUFBTSxHQUFJLE1BQU0sQ0FBQyxhQUFxQixDQUFDLEtBQWUsQ0FBQztJQUU3RCxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQyxPQUFPLE1BQU0sQ0FBQztBQUNmLENBQUM7QUFJRCxNQUFNLENBQUMsTUFBTSxNQUFNLEdBR2YsQ0FBQyxTQUFTLE9BQU87SUFDcEIsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDO0lBQ3BCLE1BQU0sR0FBRyxHQUFHLFVBQVUsSUFBbUI7UUFDeEMsT0FBTyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3hDLENBQUMsQ0FBQztJQUVGLE9BQU87UUFDTixHQUFHO1lBQ0YsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNsQixDQUFDO1FBQ0QsRUFBRTtZQUNELFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDakIsQ0FBQztRQUVELElBQUksTUFBTTtZQUNULE9BQU8sR0FBRyxDQUFDLFFBQWUsQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFDRCxJQUFJLE1BQU07WUFDVCxPQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QixDQUFDO1FBQ0QsSUFBSSxLQUFLO1lBQ1IsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUNELElBQUksS0FBSztZQUNSLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JCLENBQUM7UUFDRCxJQUFJLFVBQVU7WUFDYixPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMxQixDQUFDO1FBQ0QsSUFBSSxLQUFLO1lBQ1IsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUNELElBQUksR0FBRztZQUNOLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLENBQUM7UUFDRCxJQUFJLE1BQU07WUFDVCxPQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QixDQUFDO1FBQ0QsSUFBSSxLQUFLO1lBQ1IsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUNELElBQUksU0FBUztZQUNaLE9BQU8sR0FBRyxDQUFDLFdBQWtCLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBQ0QsSUFBSSxLQUFLO1lBQ1IsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckIsQ0FBQztRQUNELElBQUksY0FBYztZQUNqQixPQUFPLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFDRCxJQUFJLFFBQVE7WUFDWCxPQUFPLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUN4QixDQUFDO1FBQ0QsSUFBSSxJQUFJO1lBQ1AsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEIsQ0FBQztRQUNELElBQUksR0FBRztZQUNOLE9BQU8sR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25CLENBQUM7UUFDRCxJQUFJLEtBQUs7WUFDUixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyQixDQUFDO1FBQ0QsSUFBSSxJQUFJO1lBQ1AsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEIsQ0FBQztRQUNELElBQUksT0FBTztZQUNWLE9BQU8sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3ZCLENBQUM7UUFDRCxJQUFJLE9BQU87WUFDVixPQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2QixDQUFDO1FBQ0QsSUFBSSxTQUFTO1lBQ1osT0FBTyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNELElBQUksS0FBSztZQUNSLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JCLENBQUM7UUFDRCxJQUFJLElBQUk7WUFDUCxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwQixDQUFDO0tBQ00sQ0FBQztBQUNWLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFTCxNQUFNLFVBQVUsTUFBTSxDQUFDLEdBQVc7SUFDakMsT0FBTyxrQkFBa0IsQ0FBQyxHQUFHLENBQUM7U0FDNUIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7U0FDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7U0FDcEIsT0FBTyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUM7U0FDckIsT0FBTyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUM7U0FDckIsT0FBTyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUM7U0FDckIsT0FBTyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN6QixDQUFDO0FBRUQ7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxnQkFBZ0IsQ0FDL0IsTUFBaUQsRUFDakQsTUFBZTtJQUVmLElBQUksTUFBTSxZQUFZLGVBQWUsRUFBRTtRQUN0QyxPQUFPLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztLQUN6QjtJQUVELE1BQU0sVUFBVSxHQUFHLEVBQUUsRUFDcEIsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUVWLEtBQUssTUFBTSxJQUFJLElBQUksTUFBTSxFQUFFO1FBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFO1lBQ3hELFNBQVM7U0FDVDtRQUVELE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQ3BELEtBQUssR0FBSSxNQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0IsSUFBSSxJQUFJLENBQUM7UUFDVCxJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDeEIsSUFBSSxLQUFLLEtBQUssSUFBSSxFQUFFO2dCQUNuQixJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ25CO2lCQUFNLElBQUksYUFBYSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNoQyxJQUFJLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2FBQ3BDO2lCQUFNLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUMxQixJQUFJLEdBQUcsS0FBSztxQkFDVixNQUFNLENBQUMsU0FBUyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUs7b0JBQ25ELElBQUksQ0FBRSxVQUFrQixDQUFDLEdBQUcsQ0FBQyxFQUFFO3dCQUM3QixVQUFrQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztxQkFDOUI7b0JBQ0QsSUFBSSxDQUFFLFVBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQ25DLFVBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO3dCQUN0QyxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQ2hCLGdCQUFnQixDQUFDOzRCQUNoQixDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxFQUFFLElBQUk7eUJBQy9CLENBQUMsQ0FDRixDQUFDO3FCQUNGO29CQUNELE9BQU8sR0FBRyxDQUFDO2dCQUNaLENBQUMsRUFBRSxFQUFFLENBQUM7cUJBQ0wsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ1o7aUJBQU07Z0JBQ04sY0FBYztnQkFDZCxJQUFJLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDekM7WUFFRCxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztTQUN0QjtLQUNEO0lBRUQsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLENBQUM7QUFFRCxNQUFNLFVBQVUsV0FBVyxDQUMxQixJQUFZLEVBQ1osR0FBNkI7SUFFN0IsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0lBQ2YsR0FBRyxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDO0lBRTdCLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUU7UUFDL0IsT0FBTyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3REO0lBRUQsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRTtRQUMxQyxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztLQUNuQjtTQUFNO1FBQ04sTUFBTSxPQUFPLEdBQUcsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXpDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNYLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3pCO0tBQ0Q7SUFFRCxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFbEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDdEMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzNCLElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRSxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUM3QyxPQUFPLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BDO0tBQ0Q7SUFFRCxPQUFPLElBQUksQ0FBQztBQUNiLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNILE1BQU0sVUFBVSxRQUFRLENBQ3ZCLEdBQVcsRUFDWCxNQUFpRDtJQUVqRCxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ1osT0FBTyxHQUFHLENBQUM7S0FDWDtJQUVELE1BQU0sZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFbEQsSUFBSSxnQkFBZ0IsRUFBRTtRQUNyQixNQUFNLFNBQVMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLElBQUksU0FBUyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ3JCLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztTQUM5QjtRQUVELEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsZ0JBQWdCLENBQUM7S0FDaEU7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNaLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQ3BDLElBQXFCLEVBQ3JCLFNBQWlCO0lBRWpCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxTQUFTLElBQUksQ0FBQyxDQUFDO0lBQzFELElBQUksU0FBUyxHQUFRLFNBQVMsQ0FBQztJQUUvQixJQUFJLEtBQUssRUFBRTtRQUNWLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEMsSUFBSSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssQ0FBQztRQUM5QixJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFO1lBQzdELFNBQVMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDO1NBQzlCO2FBQU0sSUFDTixDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2pELFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQ3hCO1lBQ0QsU0FBUyxHQUFHLFdBQVcsQ0FBQztTQUN4QjthQUFNLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUU7WUFDeEUsU0FBUyxHQUFHLEtBQUssQ0FBQztTQUNsQjtLQUNEO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDbEIsQ0FBQztBQUVEOztHQUVHO0FBQ0gsTUFBTSxVQUFVLElBQUk7SUFDbkIsT0FBTyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBTSxFQUFFLEVBQUU7UUFDM0UsT0FBTyxDQUNOLENBQUM7WUFDRCxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQ2hFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQUVELGNBQWMsZ0JBQWdCLENBQUM7QUFFL0IsT0FBTyxFQUFFLE9BQU8sSUFBSSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpZCA9IChmdW5jdGlvbiBpZCgpIHtcblx0Y29uc3QgY291bnRlcnMgPSBPYmplY3QuY3JlYXRlKHt9KTtcblx0Y291bnRlcnNbJ2lkJ10gPSAwO1xuXG5cdHJldHVybiAocHJlZml4ID0gJ2lkJyk6IHN0cmluZyA9PiB7XG5cdFx0aWYgKCEocHJlZml4IGluIGNvdW50ZXJzKSkge1xuXHRcdFx0Y291bnRlcnNbcHJlZml4XSA9IDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHByZWZpeCArICctJyArIGNvdW50ZXJzW3ByZWZpeF0rKztcblx0fTtcbn0pKCk7XG5cbmV4cG9ydCBjb25zdCBub29wID0gKCk6IHVuZGVmaW5lZCA9PiB2b2lkIDA7XG5cbi8vID09PT09PT09PT1UWVBFIENIRUNLRVJTPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5leHBvcnQgY29uc3QgaXNQbGFpbk9iamVjdCA9IChhOiB1bmtub3duKTogYSBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9PlxuXHRPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gKGE6IHVua25vd24pOiBhIGlzIHN0cmluZyA9PiB0eXBlb2YgYSA9PT0gJ3N0cmluZyc7XG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbiA9IChhOiB1bmtub3duKTogYSBpcyAoLi4uYXJnczogYW55W10pID0+IGFueSA9PlxuXHR0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoYTogdW5rbm93bik6IGJvb2xlYW4ge1xuXHRpZiAoaXNBcnJheShhKSkge1xuXHRcdHJldHVybiAhYS5sZW5ndGg7XG5cdH1cblx0aWYgKGlzUGxhaW5PYmplY3QoYSkpIHtcblx0XHRyZXR1cm4gIU9iamVjdC5rZXlzKGEpLmxlbmd0aDtcblx0fVxuXG5cdGlmICh0eXBlb2YgYSA9PT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gYS50cmltKCkubGVuZ3RoID09PSAwO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBhID09PSAnbnVtYmVyJykge1xuXHRcdHJldHVybiBpc05hTihhKTtcblx0fVxuXG5cdHJldHVybiAhYTtcbn1cblxuZXhwb3J0IGNvbnN0IGlzTm90RW1wdHkgPSAoYTogdW5rbm93bik6IGJvb2xlYW4gPT4gIWlzRW1wdHkoYSk7XG5leHBvcnQgY29uc3QgdG9BcnJheSA9IDxYPihhOiBJdGVyYWJsZTxYPik6IFhbXSA9PiBbLi4uYV07XG5leHBvcnQgY29uc3QgZXNjYXBlUmVnRXhwID0gKHN0cjogc3RyaW5nKTogc3RyaW5nID0+XG5cdHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcXFwvXSkvZywgJ1xcXFwkMScpO1xuXG4vLyA9PT09PT09PT09SEVMUEVSUz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGZ1bmN0aW9uIGNhbGxiYWNrKGZuOiB1bmtub3duLCBhcmdzPzogYW55W10sIGN0eD86IHVua25vd24pOiBhbnkge1xuXHRpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuaXF1ZTxYPihhcnI6IFhbXSk6IFhbXSB7XG5cdHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQoYXJyKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoPFQ+KFxuXHRvYmo6IHsgW2tleTogc3RyaW5nXTogVCB9IHwgVFtdLFxuXHRmbjogKHZhbHVlOiBULCBrZXk6IGFueSkgPT4gdm9pZFxuKTogdm9pZCB7XG5cdE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcblx0XHRjb25zdCB2YWx1ZTogVCA9IChvYmogYXMgYW55KVtrZXldO1xuXHRcdGZuKHZhbHVlLCBrZXkpO1xuXHR9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGFzc2lnbiA9XG5cdChPYmplY3QgYXMgYW55KS5hc3NpZ24gfHxcblx0ZnVuY3Rpb24gX2Fzc2lnbiguLi5hcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPltdKSB7XG5cdFx0Y29uc3QgdG8gPSBhcmdzWzBdO1xuXHRcdGxldCBmcm9tLCBzeW1ib2xzO1xuXG5cdFx0Zm9yIChsZXQgcyA9IDE7IHMgPCBhcmdzLmxlbmd0aDsgcysrKSB7XG5cdFx0XHRmcm9tID0gT2JqZWN0KGFyZ3Nbc10pO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG5cdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuXHRcdFx0XHRcdCh0byBhcyBhbnkpW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCdnZXRPd25Qcm9wZXJ0eVN5bWJvbHMnIGluIE9iamVjdCkge1xuXHRcdFx0XHRzeW1ib2xzID0gKE9iamVjdCBhcyBhbnkpLmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdFx0KHRvIGFzIGFueSlbc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0bztcblx0fTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lPFQ+KGE6IFQpOiBUIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nUGxhY2Vob2xkZXJSZXBsYWNlKFxuXHRzdHI6IHN0cmluZyxcblx0ZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IHN0cmluZyB7XG5cdGlmIChpc1N0cmluZyhzdHIpICYmIHN0ci5sZW5ndGggJiYgaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHRcdGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKS5zb3J0KCkucmV2ZXJzZSgpO1xuXHRcdGxldCByZWc7XG5cblx0XHRpZiAoa2V5cy5sZW5ndGgpIHtcblx0XHRcdGNvbnN0IG0gPSBrZXlzLmpvaW4oJ3wnKTtcblx0XHRcdHJlZyA9IG5ldyBSZWdFeHAoJzooJyArIG0gKyAnKScsICdnJyk7XG5cblx0XHRcdHJldHVybiBzdHIucmVwbGFjZShyZWcsIGZ1bmN0aW9uIHN0cmluZ0NodW5rUmVwbGFjZXIoLi4uYXJncykge1xuXHRcdFx0XHRjb25zdCByZXBsYWNlbWVudCA9IChkYXRhIGFzIGFueSlbYXJnc1sxXV07XG5cblx0XHRcdFx0aWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXJnc1swXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiByZXBsYWNlbWVudDtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzdHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0VG9MaW5lU3RyaW5nKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IHJlZyA9IC9bXCInXFxcXFxcblxcclxcdFxcdTIwMjhcXHUyMDI5XS9nLFxuXHRcdHRvRXNjYXBlczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG5cdFx0XHQnXCInOiAnXCInLFxuXHRcdFx0J1xcJyc6ICdcXCcnLFxuXHRcdFx0J1xcXFwnOiAnXFxcXCcsXG5cdFx0XHQnXFxuJzogJ24nLFxuXHRcdFx0J1xccic6ICdyJyxcblx0XHRcdCdcXHQnOiAndCcsXG5cdFx0XHQnXFx1MjAyOCc6ICcyMDI4Jyxcblx0XHRcdCdcXHUyMDI5JzogJzIwMjknLFxuXHRcdH07XG5cblx0cmV0dXJuIHRleHQucmVwbGFjZShyZWcsIChtYXRjaCkgPT4gJ1xcXFwnICsgKHRvRXNjYXBlcyBhcyBhbnkpW21hdGNoXSk7XG59XG5cbi8vID09PT09PT09PT1NQVRIPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBfc2V0RGlnaXRzU2VwKHg6IG51bWJlciwgc2VwOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRjb25zdCBzID0gU3RyaW5nKHgpLFxuXHRcdGFucyA9IFtdLFxuXHRcdGogPSBzLmluZGV4T2YoJy4nKSxcblx0XHRzdGFydCA9IGogIT09IC0xID8gaiA6IHMubGVuZ3RoLFxuXHRcdGVuZCA9IGogIT09IC0xID8gcy5zbGljZShzdGFydCArIDEpIDogW107XG5cdGxldCBjb3VudCA9IDAsXG5cdFx0aSA9IHN0YXJ0O1xuXG5cdGZvciAoOyBpID49IDA7IGktLSkge1xuXHRcdGlmIChjb3VudCA9PT0gMykge1xuXHRcdFx0Y291bnQgPSAwO1xuXHRcdFx0YW5zW2ldID0gaSAhPT0gMCA/IHNlcCArIHNbaV0gOiBzW2ldO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbnNbaV0gPSBzW2ldO1xuXHRcdH1cblx0XHRjb3VudCsrO1xuXHR9XG5cblx0cmV0dXJuIGFucy5jb25jYXQoZW5kKS5qb2luKCcnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlckZvcm1hdChcblx0eDogbnVtYmVyIHwgc3RyaW5nLFxuXHRkZWMgPSAyLFxuXHRkZWNpbWFsU2VwID0gJy4nLFxuXHRkaWdpdHNTZXAgPSAnICdcbik6IHN0cmluZyB7XG5cdGlmICgheCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGxldCBhbnMgPSBwYXJzZUZsb2F0KFN0cmluZyh4KSk7XG5cblx0aWYgKGRlYyA+PSAwKSB7XG5cdFx0Y29uc3QgZGVjaW1hbFBvdyA9IE1hdGgucG93KDEwLCBkZWMpO1xuXHRcdGFucyA9IE1hdGguZmxvb3IoYW5zICogZGVjaW1hbFBvdykgLyBkZWNpbWFsUG93O1xuXHR9XG5cblx0Y29uc3QgbiA9IF9zZXREaWdpdHNTZXAoYW5zLCBkaWdpdHNTZXApO1xuXHRjb25zdCBhID0gbi5zcGxpdCgnJyk7XG5cblx0Y29uc3QgZGVjaW1hbFBvcyA9IGEubGFzdEluZGV4T2YoJy4nKTtcblx0aWYgKGRlY2ltYWxQb3MgPj0gMCAmJiBkZWNpbWFsU2VwICE9PSAnLicpIHtcblx0XHRhW2RlY2ltYWxQb3NdID0gZGVjaW1hbFNlcDtcblx0fVxuXG5cdHJldHVybiBhLmpvaW4oJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIGVxID0gZmFsc2UpOiBib29sZWFuIHtcblx0cmV0dXJuIGVxID8geCA+PSB5IDogeCA+IHk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsdCh4OiBudW1iZXIsIHk6IG51bWJlciwgZXEgPSBmYWxzZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZXEgPyB4IDw9IHkgOiB4IDwgeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJldHdlZW4oeDogbnVtYmVyLCBhOiBudW1iZXIsIGI6IG51bWJlciwgZXEgPSBmYWxzZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZXEgPyB4ID49IGEgJiYgeCA8PSBiIDogeCA+IGEgJiYgeCA8IGI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JhbmdlKGE6IHVua25vd24sIGI6IHVua25vd24pOiBib29sZWFuIHtcblx0cmV0dXJuIHR5cGVvZiBhID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgYiA9PT0gJ251bWJlcicgJiYgYSA8IGI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luRE9NKGVsZW1lbnQ6IE5vZGUsIGluQm9keSA9IGZhbHNlKTogYm9vbGVhbiB7XG5cdGxldCBfOiBOb2RlIHwgbnVsbCA9IGVsZW1lbnQsXG5cdFx0bGFzdDogTm9kZSB8IG51bGwgPSBudWxsO1xuXG5cdHdoaWxlIChfKSB7XG5cdFx0bGFzdCA9IF87XG5cdFx0aWYgKGluQm9keSAmJiBsYXN0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0XyA9IF8ucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBpbkJvZHkgPyBsYXN0ID09PSBkb2N1bWVudC5ib2R5IDogbGFzdCA9PT0gZG9jdW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlPFg+KGE6IFhbXSk6IFhbXSB7XG5cdGxldCBqLCB4LCBpO1xuXG5cdGZvciAoaSA9IGEubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuXHRcdGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcblx0XHR4ID0gYVtpXTtcblx0XHRhW2ldID0gYVtqXTtcblx0XHRhW2pdID0geDtcblx0fVxuXG5cdHJldHVybiBhO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhzdHI6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuXHRpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJz8nKSBzdHIgPSBzdHIuc3Vic3RyaW5nKDEpO1xuXHRpZiAoIXN0ci5sZW5ndGgpIHJldHVybiB7fTtcblxuXHRjb25zdCBwYWlycyA9IHN0ci5zcGxpdCgnJicpLFxuXHRcdHBhcmFtcyA9IHt9O1xuXHRmb3IgKGxldCBpID0gMCwgbGVuID0gcGFpcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRjb25zdCBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcblx0XHRcdGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSxcblx0XHRcdHZhbHVlID0gcGFpci5sZW5ndGggPT09IDIgPyBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSkgOiBudWxsO1xuXHRcdGlmICgocGFyYW1zIGFzIGFueSlba2V5XSAhPSBudWxsKSB7XG5cdFx0XHRpZiAoIWlzQXJyYXkoKHBhcmFtcyBhcyBhbnkpW2tleV0pKSB7XG5cdFx0XHRcdChwYXJhbXMgYXMgYW55KVtrZXldID0gWyhwYXJhbXMgYXMgYW55KVtrZXldXTtcblx0XHRcdH1cblx0XHRcdChwYXJhbXMgYXMgYW55KVtrZXldLnB1c2godmFsdWUpO1xuXHRcdH0gZWxzZSAocGFyYW1zIGFzIGFueSlba2V5XSA9IHZhbHVlO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlOiBFdmVudCk6IHZvaWQge1xuXHRpZiAoIWUpIHtcblx0XHRpZiAod2luZG93LmV2ZW50KSBlID0gd2luZG93LmV2ZW50O1xuXHRcdGVsc2UgcmV0dXJuO1xuXHR9XG5cblx0aWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcblx0aWYgKGUuY2FuY2VsQnViYmxlICE9IG51bGwpIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0aWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRpZiAod2luZG93LmV2ZW50KSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cdC8vIGlmIChlLmNhbmNlbCAhPSBudWxsKSBlLmNhbmNlbCA9IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkQWdlKFxuXHRkYXk6IG51bWJlcixcblx0bW9udGg6IG51bWJlcixcblx0eWVhcjogbnVtYmVyLFxuXHRtaW5BZ2U6IG51bWJlcixcblx0bWF4QWdlOiBudW1iZXJcbik6IGJvb2xlYW4ge1xuXHQvLyBkZXBlbmRpbmcgb24gdGhlIHllYXIsIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhlIG1vbnRoXG5cdGNvbnN0IGZlYnJ1YXJ5RGF5cyA9IHllYXIgJSA0ID09PSAwID8gMjkgOiAyOCxcblx0XHRkYXlzSW5Nb250aCA9IFszMSwgZmVicnVhcnlEYXlzLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5cblx0Ly8gZmlyc3QsIGNoZWNrIHRoZSBpbmNvbWluZyBtb250aCBhbmQgeWVhciBhcmUgdmFsaWQuXG5cdGlmICghbW9udGggfHwgIWRheSB8fCAheWVhcikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoMSA+IG1vbnRoIHx8IG1vbnRoID4gMTIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKHllYXIgPCAwKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICgxID4gZGF5IHx8IGRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0pIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBpZiByZXF1aXJlZCwgdmVyaWZ5IHRoZSBjdXJyZW50IGRhdGUgaXMgTEFURVIgdGhhbiB0aGUgaW5jb21pbmcgZGF0ZS5cblx0aWYgKG1pbkFnZSAhPT0gdW5kZWZpbmVkIHx8IG1heEFnZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gd2UgZ2V0IGN1cnJlbnQgeWVhclxuXHRcdGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLFxuXHRcdFx0YWdlID0gY3VycmVudFllYXIgLSB5ZWFyO1xuXG5cdFx0aWYgKGFnZSA8IDApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGFnZSA8IG1pbkFnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoYWdlID4gbWF4QWdlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxlU2l6ZUZvcm1hdChcblx0c2l6ZTogbnVtYmVyIC8qIGluIGJ5dGVzICovLFxuXHRkZWNpbWFsUG9pbnQgPSAnLicsXG5cdHRob3VzYW5kc1NlcCA9ICcgJ1xuKTogc3RyaW5nIHtcblx0Y29uc3QgdW5pdHMgPSBbJ2J5dGUnLCAnS2InLCAnTWInLCAnR2InLCAnVGInXSxcblx0XHRpTWF4ID0gdW5pdHMubGVuZ3RoO1xuXHRsZXQgaSA9IDAsXG5cdFx0cmVzdWx0ID0gMDtcblxuXHRzaXplID0gcGFyc2VGbG9hdChTdHJpbmcoc2l6ZSkpO1xuXG5cdHdoaWxlIChzaXplID49IDEgJiYgaSA8IGlNYXgpIHtcblx0XHRyZXN1bHQgPSBzaXplO1xuXHRcdHNpemUgLz0gMTAwMDsgLy8gbm90IDEwMjRcblx0XHRpKys7XG5cdH1cblxuXHRjb25zdCBwYXJ0cyA9IFN0cmluZyhyZXN1bHQpLnNwbGl0KCcuJyksXG5cdFx0aGVhZCA9XG5cdFx0XHRwYXJzZUludChwYXJ0c1swXSkgPT09IHJlc3VsdFxuXHRcdFx0XHQ/IHJlc3VsdFxuXHRcdFx0XHQ6IG51bWJlckZvcm1hdChyZXN1bHQsIDIsIGRlY2ltYWxQb2ludCwgdGhvdXNhbmRzU2VwKTtcblxuXHRyZXR1cm4gaGVhZCArICcgJyArIHVuaXRzW2kgPT09IDAgPyAwIDogaSAtIDFdO1xufVxuXG4vKipcbiAqIE9wZW5zIHRoZSBwcm92aWRlZCB1cmwgYnkgaW5qZWN0aW5nIGEgaGlkZGVuIGlmcmFtZSB0aGF0IGNhbGxzXG4gKiB3aW5kb3cub3BlbigpLCB0aGVuIHJlbW92ZXMgdGhlIGlmcmFtZSBmcm9tIHRoZSBET00uXG4gKlxuICogUHJldmVudCByZXZlcnNlIHRhYm5hYmJpbmcgcGhpc2hpbmcgYXR0YWNrcyBjYXVzZWQgYnkgX2JsYW5rXG4gKlxuICogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmdpdGh1Yi5pby9yZWwtbm9vcGVuZXIvXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhbmllbHN0anVsZXMvYmxhbmtzaGllbGQvYmxvYi82ZTIwOGJmMjVhNDRiZjUwZDFhNWU4NWFlOTZmZWUwYzAxNWQwNWJjL2JsYW5rc2hpZWxkLmpzI0wxNjZcbiAqXG4gKiBAcGFyYW0gdXJsXG4gKiBAcGFyYW0gc3RyV2luZG93TmFtZVxuICogQHBhcmFtIHN0cldpbmRvd0ZlYXR1cmVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYWZlT3Blbihcblx0dXJsID0gJycsXG5cdHN0cldpbmRvd05hbWUgPSAnJyxcblx0c3RyV2luZG93RmVhdHVyZXMgPSAnJ1xuKTogV2luZG93IHwgbnVsbCB7XG5cdGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgIT09IC0xKSB7XG5cdFx0Ly8gSUUgYmVmb3JlIDExXG5cdFx0Y29uc3QgY2hpbGQgPSBvcGVuLmFwcGx5KHdpbmRvdywgW3VybCwgc3RyV2luZG93TmFtZSwgc3RyV2luZG93RmVhdHVyZXNdKTtcblx0XHRpZiAoY2hpbGQpIHtcblx0XHRcdGNoaWxkLm9wZW5lciA9IG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiBjaGlsZDtcblx0fVxuXG5cdGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpIGFzIEhUTUxJRnJhbWVFbGVtZW50O1xuXHRpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXHRjb25zdCBpZnJhbWVEb2MgPSAoaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fFxuXHRcdChpZnJhbWUuY29udGVudFdpbmRvdyBhcyBhbnkpLmRvY3VtZW50KSBhcyBEb2N1bWVudDtcblxuXHRsZXQgb3BlbkFyZ3MgPSAnXCInICsgdXJsICsgJ1wiJztcblx0aWYgKHN0cldpbmRvd05hbWUpIHtcblx0XHRvcGVuQXJncyArPSAnLCBcIicgKyBzdHJXaW5kb3dOYW1lICsgJ1wiJztcblx0fVxuXHRpZiAoc3RyV2luZG93RmVhdHVyZXMpIHtcblx0XHRvcGVuQXJncyArPSAnLCBcIicgKyBzdHJXaW5kb3dGZWF0dXJlcyArICdcIic7XG5cdH1cblxuXHRjb25zdCBzY3JpcHQgPSBpZnJhbWVEb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cdHNjcmlwdC50ZXh0ID1cblx0XHQnd2luZG93LnBhcmVudCA9IG51bGw7IHdpbmRvdy50b3AgPSBudWxsOycgK1xuXHRcdCd3aW5kb3cuZnJhbWVFbGVtZW50ID0gbnVsbDsgdmFyIGNoaWxkID0gd2luZG93Lm9wZW4oJyArXG5cdFx0b3BlbkFyZ3MgK1xuXHRcdCcpOycgK1xuXHRcdCdpZiAoY2hpbGQpIHsgY2hpbGQub3BlbmVyID0gbnVsbCB9Jztcblx0aWZyYW1lRG9jLmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0Y29uc3QgbmV3V2luID0gKGlmcmFtZS5jb250ZW50V2luZG93IGFzIGFueSkuY2hpbGQgYXMgV2luZG93O1xuXG5cdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcblx0cmV0dXJuIG5ld1dpbjtcbn1cblxudHlwZSBDb25zb2xlID0gdHlwZW9mIGNvbnNvbGU7XG5cbmV4cG9ydCBjb25zdCBsb2dnZXI6IENvbnNvbGUgJiB7XG5cdG9uOiAoKSA9PiB2b2lkO1xuXHRvZmY6ICgpID0+IHZvaWQ7XG59ID0gKGZ1bmN0aW9uIF9sb2dnZXIoKSB7XG5cdGxldCBfc2hvd0xvZyA9IHRydWU7XG5cdGNvbnN0IF9mbiA9IGZ1bmN0aW9uICh0eXBlOiBrZXlvZiBDb25zb2xlKSB7XG5cdFx0cmV0dXJuIF9zaG93TG9nID8gY29uc29sZVt0eXBlXSA6IG5vb3A7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRvZmYoKSB7XG5cdFx0XHRfc2hvd0xvZyA9IGZhbHNlO1xuXHRcdH0sXG5cdFx0b24oKSB7XG5cdFx0XHRfc2hvd0xvZyA9IHRydWU7XG5cdFx0fSxcblxuXHRcdGdldCBtZW1vcnkoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdtZW1vcnknIGFzIGFueSk7XG5cdFx0fSxcblx0XHRnZXQgYXNzZXJ0KCkge1xuXHRcdFx0cmV0dXJuIF9mbignYXNzZXJ0Jyk7XG5cdFx0fSxcblx0XHRnZXQgY2xlYXIoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdjbGVhcicpO1xuXHRcdH0sXG5cdFx0Z2V0IGNvdW50KCkge1xuXHRcdFx0cmV0dXJuIF9mbignY291bnQnKTtcblx0XHR9LFxuXHRcdGdldCBjb3VudFJlc2V0KCkge1xuXHRcdFx0cmV0dXJuIF9mbignY291bnRSZXNldCcpO1xuXHRcdH0sXG5cdFx0Z2V0IGRlYnVnKCkge1xuXHRcdFx0cmV0dXJuIF9mbignZGVidWcnKTtcblx0XHR9LFxuXHRcdGdldCBkaXIoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdkaXInKTtcblx0XHR9LFxuXHRcdGdldCBkaXJ4bWwoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdkaXJ4bWwnKTtcblx0XHR9LFxuXHRcdGdldCBlcnJvcigpIHtcblx0XHRcdHJldHVybiBfZm4oJ2Vycm9yJyk7XG5cdFx0fSxcblx0XHRnZXQgZXhjZXB0aW9uKCkge1xuXHRcdFx0cmV0dXJuIF9mbignZXhjZXB0aW9uJyBhcyBhbnkpO1xuXHRcdH0sXG5cdFx0Z2V0IGdyb3VwKCkge1xuXHRcdFx0cmV0dXJuIF9mbignZ3JvdXAnKTtcblx0XHR9LFxuXHRcdGdldCBncm91cENvbGxhcHNlZCgpIHtcblx0XHRcdHJldHVybiBfZm4oJ2dyb3VwQ29sbGFwc2VkJyk7XG5cdFx0fSxcblx0XHRnZXQgZ3JvdXBFbmQoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdncm91cEVuZCcpO1xuXHRcdH0sXG5cdFx0Z2V0IGluZm8oKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCdpbmZvJyk7XG5cdFx0fSxcblx0XHRnZXQgbG9nKCkge1xuXHRcdFx0cmV0dXJuIF9mbignbG9nJyk7XG5cdFx0fSxcblx0XHRnZXQgdGFibGUoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCd0YWJsZScpO1xuXHRcdH0sXG5cdFx0Z2V0IHRpbWUoKSB7XG5cdFx0XHRyZXR1cm4gX2ZuKCd0aW1lJyk7XG5cdFx0fSxcblx0XHRnZXQgdGltZUVuZCgpIHtcblx0XHRcdHJldHVybiBfZm4oJ3RpbWVFbmQnKTtcblx0XHR9LFxuXHRcdGdldCB0aW1lTG9nKCkge1xuXHRcdFx0cmV0dXJuIF9mbigndGltZUxvZycpO1xuXHRcdH0sXG5cdFx0Z2V0IHRpbWVTdGFtcCgpIHtcblx0XHRcdHJldHVybiBfZm4oJ3RpbWVTdGFtcCcpO1xuXHRcdH0sXG5cdFx0Z2V0IHRyYWNlKCkge1xuXHRcdFx0cmV0dXJuIF9mbigndHJhY2UnKTtcblx0XHR9LFxuXHRcdGdldCB3YXJuKCkge1xuXHRcdFx0cmV0dXJuIF9mbignd2FybicpO1xuXHRcdH0sXG5cdH0gYXMgYW55O1xufSkoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZSh2YWw6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKVxuXHRcdC5yZXBsYWNlKC8lMjQvZywgJyQnKVxuXHRcdC5yZXBsYWNlKC8lMjAvZywgJysnKVxuXHRcdC5yZXBsYWNlKC8lM0EvZ2ksICc6Jylcblx0XHQucmVwbGFjZSgvJTJDL2dpLCAnLCcpXG5cdFx0LnJlcGxhY2UoLyU1Qi9naSwgJ1snKVxuXHRcdC5yZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgcXVlcnkgc3RyaW5nIGZyb20gb2JqZWN0LiBSZWN1cnNpdmVseSFcbiAqIEBwYXJhbSBwYXJhbXNcbiAqIEBwYXJhbSBwcmVmaXhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUXVlcnlTdHJpbmcoXG5cdHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBVUkxTZWFyY2hQYXJhbXMsXG5cdHByZWZpeD86IHN0cmluZ1xuKTogc3RyaW5nIHtcblx0aWYgKHBhcmFtcyBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykge1xuXHRcdHJldHVybiBwYXJhbXMudG9TdHJpbmcoKTtcblx0fVxuXG5cdGNvbnN0IGR1cGxpY2F0ZXMgPSB7fSxcblx0XHRzdHIgPSBbXTtcblxuXHRmb3IgKGNvbnN0IHByb3AgaW4gcGFyYW1zKSB7XG5cdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGFyYW1zLCBwcm9wKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3Qga2V5ID0gcHJlZml4ID8gcHJlZml4ICsgJ1snICsgcHJvcCArICddJyA6IHByb3AsXG5cdFx0XHR2YWx1ZSA9IChwYXJhbXMgYXMgYW55KVtwcm9wXTtcblx0XHRsZXQgcGFpcjtcblx0XHRpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdHBhaXIgPSBlbmNvZGUoa2V5KTtcblx0XHRcdH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0cGFpciA9IGJ1aWxkUXVlcnlTdHJpbmcodmFsdWUsIGtleSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdHBhaXIgPSB2YWx1ZVxuXHRcdFx0XHRcdC5yZWR1Y2UoZnVuY3Rpb24gYXJyYXlWYWx1ZXNSZWR1Y2VyKGFjYywgaXRlbSwgaW5kZXgpIHtcblx0XHRcdFx0XHRcdGlmICghKGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldKSB7XG5cdFx0XHRcdFx0XHRcdChkdXBsaWNhdGVzIGFzIGFueSlba2V5XSA9IHt9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV1baXRlbV0pIHtcblx0XHRcdFx0XHRcdFx0KGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldW2l0ZW1dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGFjYy5jb25jYXQoXG5cdFx0XHRcdFx0XHRcdFx0YnVpbGRRdWVyeVN0cmluZyh7XG5cdFx0XHRcdFx0XHRcdFx0XHRba2V5ICsgJ1snICsgaW5kZXggKyAnXSddOiBpdGVtLFxuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0XHRcdH0sIFtdKVxuXHRcdFx0XHRcdC5qb2luKCcmJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBzY2FsYXIgdHlwZVxuXHRcdFx0XHRwYWlyID0gZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodmFsdWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHIucHVzaChwYWlyIHx8IGtleSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0ci5qb2luKCcmJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2hQYXJhbShcblx0bmFtZTogc3RyaW5nLFxuXHR1cmw/OiBzdHJpbmcgfCBVUkwgfCBMb2NhdGlvblxuKTogc3RyaW5nIHwgbnVsbCB7XG5cdGxldCBxdWVyeSA9ICcnO1xuXHR1cmwgPSB1cmwgfHwgd2luZG93LmxvY2F0aW9uO1xuXG5cdGlmIChVUkwucHJvdG90eXBlLnNlYXJjaFBhcmFtcykge1xuXHRcdHJldHVybiBuZXcgVVJMKHVybC50b1N0cmluZygpKS5zZWFyY2hQYXJhbXMuZ2V0KG5hbWUpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnICYmIHVybC5zZWFyY2gpIHtcblx0XHRxdWVyeSA9IHVybC5zZWFyY2g7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgbG9jX3N0ciA9IHVybC50b1N0cmluZygpO1xuXHRcdGNvbnN0IGsgPSBsb2Nfc3RyLnNwbGl0KCcnKS5pbmRleE9mKCc/Jyk7XG5cblx0XHRpZiAoayA+PSAwKSB7XG5cdFx0XHRxdWVyeSA9IGxvY19zdHIuc2xpY2Uoayk7XG5cdFx0fVxuXHR9XG5cblx0Y29uc3QgcGFpcnMgPSBxdWVyeS5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IHBhcnRzID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcblx0XHRjb25zdCBrZXkgPSBwYXJ0c1swXSB8fCAnJztcblx0XHRpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1sxXSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgd2l0aCBhIGdpdmVuIHBhcmFtc1xuICpcbiAqIEBwYXJhbSB1cmxcbiAqIEBwYXJhbSBwYXJhbXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkVVJMKFxuXHR1cmw6IHN0cmluZyxcblx0cGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFVSTFNlYXJjaFBhcmFtc1xuKTogc3RyaW5nIHtcblx0aWYgKCFwYXJhbXMpIHtcblx0XHRyZXR1cm4gdXJsO1xuXHR9XG5cblx0Y29uc3Qgc2VyaWFsaXplZFBhcmFtcyA9IGJ1aWxkUXVlcnlTdHJpbmcocGFyYW1zKTtcblxuXHRpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuXHRcdGNvbnN0IGhhc2hJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG5cdFx0aWYgKGhhc2hJbmRleCAhPT0gLTEpIHtcblx0XHRcdHVybCA9IHVybC5zbGljZSgwLCBoYXNoSW5kZXgpO1xuXHRcdH1cblxuXHRcdHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcblx0fVxuXG5cdHJldHVybiB1cmw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RmllbGRMYWJlbFRleHQoXG5cdGZvcm06IEhUTUxGb3JtRWxlbWVudCxcblx0ZmllbGROYW1lOiBzdHJpbmdcbik6IHN0cmluZyB7XG5cdGNvbnN0IGZpZWxkID0gZm9ybS5xdWVyeVNlbGVjdG9yKGBbbmFtZT0nJHtmaWVsZE5hbWV9J11gKTtcblx0bGV0IGxhYmVsVGV4dDogYW55ID0gZmllbGROYW1lO1xuXG5cdGlmIChmaWVsZCkge1xuXHRcdGNvbnN0IGlkID0gZmllbGQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXHRcdGxldCBsYWJlbCwgcGxhY2Vob2xkZXIsIHRpdGxlO1xuXHRcdGlmIChpZCAmJiAobGFiZWwgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYGxhYmVsW2Zvcj0nJHtpZH0nXWApKSkge1xuXHRcdFx0bGFiZWxUZXh0ID0gbGFiZWwudGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdChwbGFjZWhvbGRlciA9IGZpZWxkLmdldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInKSkgJiZcblx0XHRcdHBsYWNlaG9sZGVyLnRyaW0oKS5sZW5ndGhcblx0XHQpIHtcblx0XHRcdGxhYmVsVGV4dCA9IHBsYWNlaG9sZGVyO1xuXHRcdH0gZWxzZSBpZiAoKHRpdGxlID0gZmllbGQuZ2V0QXR0cmlidXRlKCd0aXRsZScpKSAmJiB0aXRsZS50cmltKCkubGVuZ3RoKSB7XG5cdFx0XHRsYWJlbFRleHQgPSB0aXRsZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbGFiZWxUZXh0O1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHV1aWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dWlkKCk6IHN0cmluZyB7XG5cdHJldHVybiAoJycgKyAxZTcgKyAtMWUzICsgLTRlMyArIC04ZTMgKyAtMWUxMSkucmVwbGFjZSgvWzAxOF0vZywgKGM6IGFueSkgPT4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHRjIF5cblx0XHRcdChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoYyAvIDQpKSlcblx0XHQpLnRvU3RyaW5nKDE2KTtcblx0fSk7XG59XG5cbmV4cG9ydCAqIGZyb20gJy4vc2NyaXB0TG9hZGVyJztcblxuZXhwb3J0IHsgZGVmYXVsdCBhcyBQYXRoUmVzb2x2ZXIgfSBmcm9tICcuL1BhdGhSZXNvbHZlcic7XG4iXX0=