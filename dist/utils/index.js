export const id = (function () {
    let _naturalId = 0;
    return () => 'id-' + _naturalId++;
})();
// tslint:disable-next-line: no-empty
export const noop = () => { };
// ==========TYPE CHECKERS====================================
export const isArray = Array.isArray;
export const isPlainObject = (a) => Object.prototype.toString.call(a) === '[object Object]';
export const isString = (a) => typeof a === 'string';
export const isFunction = (a) => typeof a === 'function';
export const isEmpty = function (a) {
    if (isArray(a)) {
        return !a.length;
    }
    if (isPlainObject(a)) {
        return !Object.keys(a).length;
    }
    if (typeof a === 'string') {
        return a.trim().length === 0;
    }
    if (typeof a === 'number') {
        return isNaN(a);
    }
    return !a;
};
export const isNotEmpty = (a) => !isEmpty(a);
export const toArray = (a) => [].concat.apply([], a);
export const escapeRegExp = (str) => str.replace(/([.+*?=^!:${}()[\]|\/])/g, '\\$1');
// ==========HELPERS====================================
export const callback = function (fn, args, ctx) {
    if (typeof fn === 'function') {
        return fn.apply(ctx, args);
    }
    return null;
};
export const forEach = function (obj, fn) {
    Object.keys(obj).forEach((key) => {
        const value = obj[key];
        fn(value, key);
    });
};
export const assign = Object.assign ||
    function (target, source) {
        const to = target;
        let from, symbols;
        for (let s = 1; s < arguments.length; s++) {
            from = Object(arguments[s]);
            for (const key in from) {
                if (Object.prototype.hasOwnProperty.call(from, key)) {
                    to[key] = from[key];
                }
            }
            if ('getOwnPropertySymbols' in Object) {
                symbols = Object.getOwnPropertySymbols(from);
                for (let i = 0; i < symbols.length; i++) {
                    if (from.propertyIsEnumerable(symbols[i])) {
                        to[symbols[i]] = from[symbols[i]];
                    }
                }
            }
        }
        return to;
    };
export const clone = function (a) {
    return JSON.parse(JSON.stringify(a));
};
export const stringPlaceholderReplace = function (str, data) {
    if (isString(str) && str.length && isPlainObject(data)) {
        const keys = Object.keys(data).sort().reverse();
        let reg;
        if (keys.length) {
            const m = keys.join('|');
            reg = new RegExp(':(' + m + ')', 'g');
            return str.replace(reg, function () {
                const replacement = data[arguments[1]];
                if (replacement === undefined) {
                    return arguments[0];
                }
                return replacement;
            });
        }
    }
    return str;
};
export const textToLineString = (text) => {
    const reg = /["'\\\n\r\t\u2028\u2029]/g, toEscapes = {
        '"': '"',
        // tslint:disable-next-line: quotemark
        "'": "'",
        '\\': '\\',
        '\n': 'n',
        '\r': 'r',
        '\t': 't',
        '\u2028': '2028',
        '\u2029': '2029',
    };
    return text.replace(reg, (match) => '\\' + toEscapes[match]);
};
// ==========MATH====================================
export const _setDigitsSep = function (x, sep) {
    const s = String(x), ans = [], j = s.indexOf('.'), start = j !== -1 ? j : s.length, end = j !== -1 ? s.slice(start + 1) : [];
    let count = 0, i = start;
    for (; i >= 0; i--) {
        if (count === 3) {
            count = 0;
            ans[i] = i !== 0 ? sep + s[i] : s[i];
        }
        else {
            ans[i] = s[i];
        }
        count++;
    }
    return ans.concat(end).join('');
};
export const numberFormat = function (x, dec = 2, decimalSep = '.', digitsSep = ' ') {
    if (!x) {
        return '';
    }
    let ans = parseFloat(String(x)), decimalPos;
    if (dec >= 0) {
        const decimalPow = Math.pow(10, dec);
        ans = Math.floor(ans * decimalPow) / decimalPow;
    }
    const n = _setDigitsSep(ans, digitsSep);
    const a = n.split('');
    decimalPos = a.lastIndexOf('.');
    if (decimalPos >= 0 && decimalSep !== '.') {
        a[decimalPos] = decimalSep;
    }
    return a.join('');
};
export const gt = function (x, y, eq = false) {
    return eq ? x >= y : x > y;
};
export const lt = function (x, y, eq = false) {
    return eq ? x <= y : x < y;
};
export const between = function (x, a, b, eq = false) {
    return eq ? x >= a && x <= b : x > a && x < b;
};
export const isRange = function (a, b) {
    return typeof a === 'number' && typeof b === 'number' && a < b;
};
export const isInDOM = function (element, inBody = false) {
    let _ = element, last;
    while (_) {
        last = _;
        if (inBody && last === document.body) {
            break;
        }
        _ = _.parentNode;
    }
    return inBody ? last === document.body : last === document;
};
export const buildQueryString = function (object, prefix) {
    const duplicates = {}, str = [];
    for (const prop in object) {
        if (!Object.prototype.hasOwnProperty.call(object, prop)) {
            continue;
        }
        const key = prefix ? prefix + '[' + prop + ']' : prop, value = object[prop];
        let pair;
        if (value !== undefined) {
            if (value === null) {
                pair = encodeURIComponent(key);
            }
            else if (isPlainObject(value)) {
                pair = buildQueryString(value, key);
            }
            else if (isArray(value)) {
                pair = value
                    .reduce(function (memo, item) {
                    if (!duplicates[key])
                        duplicates[key] = {};
                    if (!duplicates[key][item]) {
                        duplicates[key][item] = true;
                        return memo.concat(encodeURIComponent(key) +
                            '=' +
                            encodeURIComponent(item));
                    }
                    return memo;
                }, [])
                    .join('&');
            }
            else {
                pair =
                    encodeURIComponent(key) + '=' + encodeURIComponent(value);
            }
            str.push(pair);
        }
    }
    return str.join('&');
};
export const shuffle = (a) => {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
};
export const parseQueryString = function (str) {
    if (str.charAt(0) === '?')
        str = str.substring(1);
    if (!str.length)
        return {};
    const pairs = str.split('&'), params = {};
    for (let i = 0, len = pairs.length; i < len; i++) {
        const pair = pairs[i].split('='), key = decodeURIComponent(pair[0]), value = pair.length === 2 ? decodeURIComponent(pair[1]) : null;
        if (params[key] != null) {
            if (!isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(value);
        }
        else
            params[key] = value;
    }
    return params;
};
export const preventDefault = function (e) {
    if (!e) {
        if (window.event)
            e = window.event;
        else
            return;
    }
    if (e.preventDefault)
        e.preventDefault();
    if (e.cancelBubble != null)
        e.cancelBubble = true;
    if (e.stopPropagation)
        e.stopPropagation();
    if (window.event)
        e.returnValue = false;
    // if (e.cancel != null) e.cancel = true;
};
export const isValidAge = (day, month, year, minAge, maxAge) => {
    // depending on the year, calculate the number of days in the month
    const februaryDays = year % 4 === 0 ? 29 : 28, daysInMonth = [
        31,
        februaryDays,
        31,
        30,
        31,
        30,
        31,
        31,
        30,
        31,
        30,
        31,
    ];
    // first, check the incoming month and year are valid.
    if (!month || !day || !year) {
        return false;
    }
    if (1 > month || month > 12) {
        return false;
    }
    if (year < 0) {
        return false;
    }
    if (1 > day || day > daysInMonth[month - 1]) {
        return false;
    }
    // if required, verify the current date is LATER than the incoming date.
    if (minAge !== undefined || maxAge !== undefined) {
        // we get current year
        const currentYear = new Date().getFullYear(), age = currentYear - year;
        if (age < 0) {
            return false;
        }
        if (age < minAge) {
            return false;
        }
        if (age > maxAge) {
            return false;
        }
    }
    return true;
};
export const fileSizeFormat = function (size /* in bytes */, decimalPoint = '.', thousandsSep = ' ') {
    const units = ['byte', 'Kb', 'Mb', 'Gb', 'Tb'], iMax = units.length;
    let i = 0, result = 0;
    size = parseFloat(String(size));
    while (size >= 1 && i < iMax) {
        result = size;
        size /= 1000; // not 1024
        i++;
    }
    const parts = String(result).split('.'), head = parseInt(parts[0]) === result
        ? result
        : numberFormat(result, 2, decimalPoint, thousandsSep);
    return head + ' ' + units[i === 0 ? 0 : i - 1];
};
/**
 * Opens the provided url by injecting a hidden iframe that calls
 * window.open(), then removes the iframe from the DOM.
 *
 * Prevent reverse tabnabbing phishing attacks caused by _blank
 *
 * https://mathiasbynens.github.io/rel-noopener/
 *
 * https://github.com/danielstjules/blankshield/blob/6e208bf25a44bf50d1a5e85ae96fee0c015d05bc/blankshield.js#L166
 *
 * @param url
 * @param strWindowName
 * @param strWindowFeatures
 */
export const safeOpen = function (url = '', strWindowName = '', strWindowFeatures = '') {
    if (window.navigator.userAgent.indexOf('MSIE') !== -1) {
        // IE before 11
        const child = open.apply(window, [
            url,
            strWindowName,
            strWindowFeatures,
        ]);
        if (child) {
            child.opener = null;
        }
        return child;
    }
    let iframe, iframeDoc, script, openArgs, newWin;
    iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    iframeDoc = (iframe.contentDocument ||
        iframe.contentWindow.document);
    openArgs = '"' + url + '"';
    if (strWindowName) {
        openArgs += ', "' + strWindowName + '"';
    }
    if (strWindowFeatures) {
        openArgs += ', "' + strWindowFeatures + '"';
    }
    script = iframeDoc.createElement('script');
    script.type = 'text/javascript';
    script.text =
        'window.parent = null; window.top = null;' +
            'window.frameElement = null; var child = window.open(' +
            openArgs +
            ');' +
            'if (child) { child.opener = null }';
    iframeDoc.body.appendChild(script);
    newWin = iframe.contentWindow.child;
    document.body.removeChild(iframe);
    return newWin;
};
const _fn = function (type) {
    if (window.__oweb_show_log === true) {
        return console[type];
    }
    else {
        return noop;
    }
};
export const logger = {
    get debug() {
        return _fn('debug');
    },
    get log() {
        return _fn('debug');
    },
    get info() {
        return _fn('debug');
    },
    get error() {
        return _fn('debug');
    },
    get warn() {
        return _fn('debug');
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7SUFDbEIsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBRW5CLE9BQU8sR0FBVyxFQUFFLENBQUMsS0FBSyxHQUFHLFVBQVUsRUFBRSxDQUFDO0FBQzNDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFTCxxQ0FBcUM7QUFDckMsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQztBQUU3Qiw4REFBOEQ7QUFDOUQsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDckMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQUMsQ0FBTSxFQUFXLEVBQUUsQ0FDaEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLGlCQUFpQixDQUFDO0FBQ3pELE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQU0sRUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQ3ZFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBRyxDQUFDLENBQU0sRUFBZ0MsRUFBRSxDQUNsRSxPQUFPLENBQUMsS0FBSyxVQUFVLENBQUM7QUFDekIsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBTTtJQUN0QyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQ2pCO0lBQ0QsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzlCO0lBRUQsSUFB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LE1BQU0sR0FBRyxHQUFHLFVBQ1gsSUFBMkQ7SUFFM0QsSUFBSyxNQUFjLENBQUMsZUFBZSxLQUFLLElBQUksRUFBRTtRQUM3QyxPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNyQjtTQUFNO1FBQ04sT0FBTyxJQUFJLENBQUM7S0FDWjtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLE1BQU0sR0FBRztJQUNyQixJQUFJLEtBQUs7UUFDUixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBQ0QsSUFBSSxHQUFHO1FBQ04sT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckIsQ0FBQztJQUNELElBQUksSUFBSTtRQUNQLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFDRCxJQUFJLEtBQUs7UUFDUixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBQ0QsSUFBSSxJQUFJO1FBQ1AsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckIsQ0FBQztDQUNELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaWQgPSAoZnVuY3Rpb24gKCkge1xuXHRsZXQgX25hdHVyYWxJZCA9IDA7XG5cblx0cmV0dXJuICgpOiBzdHJpbmcgPT4gJ2lkLScgKyBfbmF0dXJhbElkKys7XG59KSgpO1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWVtcHR5XG5leHBvcnQgY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xuXG4vLyA9PT09PT09PT09VFlQRSBDSEVDS0VSUz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuZXhwb3J0IGNvbnN0IGlzUGxhaW5PYmplY3QgPSAoYTogYW55KTogYm9vbGVhbiA9PlxuXHRPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuZXhwb3J0IGNvbnN0IGlzU3RyaW5nID0gKGE6IGFueSk6IGEgaXMgc3RyaW5nID0+IHR5cGVvZiBhID09PSAnc3RyaW5nJztcbmV4cG9ydCBjb25zdCBpc0Z1bmN0aW9uID0gKGE6IGFueSk6IGEgaXMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnkgPT5cblx0dHlwZW9mIGEgPT09ICdmdW5jdGlvbic7XG5leHBvcnQgY29uc3QgaXNFbXB0eSA9IGZ1bmN0aW9uIChhOiBhbnkpOiBib29sZWFuIHtcblx0aWYgKGlzQXJyYXkoYSkpIHtcblx0XHRyZXR1cm4gIWEubGVuZ3RoO1xuXHR9XG5cdGlmIChpc1BsYWluT2JqZWN0KGEpKSB7XG5cdFx0cmV0dXJuICFPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG5cdH1cblxuXHRpZiAodHlwZW9mIGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIGEudHJpbSgpLmxlbmd0aCA9PT0gMDtcblx0fVxuXG5cdGlmICh0eXBlb2YgYSA9PT0gJ251bWJlcicpIHtcblx0XHRyZXR1cm4gaXNOYU4oYSk7XG5cdH1cblxuXHRyZXR1cm4gIWE7XG59O1xuXG5leHBvcnQgY29uc3QgaXNOb3RFbXB0eSA9IChhOiBhbnkpOiBib29sZWFuID0+ICFpc0VtcHR5KGEpO1xuZXhwb3J0IGNvbnN0IHRvQXJyYXkgPSAoYTogYW55KTogYW55W10gPT4gW10uY29uY2F0LmFwcGx5KFtdLCBhKTtcbmV4cG9ydCBjb25zdCBlc2NhcGVSZWdFeHAgPSAoc3RyOiBzdHJpbmcpID0+XG5cdHN0ci5yZXBsYWNlKC8oWy4rKj89XiE6JHt9KClbXFxdfFxcL10pL2csICdcXFxcJDEnKTtcbi8vID09PT09PT09PT1IRUxQRVJTPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgY2FsbGJhY2sgPSBmdW5jdGlvbiAoZm46IGFueSwgYXJncz86IGFueVtdLCBjdHg/OiBhbnkpOiBhbnkge1xuXHRpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0cmV0dXJuIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCBmb3JFYWNoID0gZnVuY3Rpb24gPFQ+KFxuXHRvYmo6IHsgW2tleTogc3RyaW5nXTogVCB9IHwgVFtdLFxuXHRmbjogKHZhbHVlOiBULCBrZXk6IGFueSkgPT4gdm9pZCxcbikge1xuXHRPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG5cdFx0Y29uc3QgdmFsdWU6IFQgPSAob2JqIGFzIGFueSlba2V5XTtcblx0XHRmbih2YWx1ZSwga2V5KTtcblx0fSk7XG59O1xuXG5leHBvcnQgY29uc3QgYXNzaWduID1cblx0KE9iamVjdCBhcyBhbnkpLmFzc2lnbiB8fFxuXHRmdW5jdGlvbiAodGFyZ2V0OiBvYmplY3QsIHNvdXJjZTogb2JqZWN0KSB7XG5cdFx0Y29uc3QgdG8gPSB0YXJnZXQ7XG5cdFx0bGV0IGZyb20sIHN5bWJvbHM7XG5cblx0XHRmb3IgKGxldCBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XG5cdFx0XHRcdGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuXHRcdFx0XHRcdCh0byBhcyBhbnkpW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKCdnZXRPd25Qcm9wZXJ0eVN5bWJvbHMnIGluIE9iamVjdCkge1xuXHRcdFx0XHRzeW1ib2xzID0gKE9iamVjdCBhcyBhbnkpLmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKGZyb20ucHJvcGVydHlJc0VudW1lcmFibGUoc3ltYm9sc1tpXSkpIHtcblx0XHRcdFx0XHRcdCh0byBhcyBhbnkpW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdG87XG5cdH07XG5cbmV4cG9ydCBjb25zdCBjbG9uZSA9IGZ1bmN0aW9uIDxUPihhOiBUKTogVCB7XG5cdHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGEpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzdHJpbmdQbGFjZWhvbGRlclJlcGxhY2UgPSBmdW5jdGlvbiAoXG5cdHN0cjogc3RyaW5nLFxuXHRkYXRhOiBvYmplY3QsXG4pOiBzdHJpbmcge1xuXHRpZiAoaXNTdHJpbmcoc3RyKSAmJiBzdHIubGVuZ3RoICYmIGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0XHRjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSkuc29ydCgpLnJldmVyc2UoKTtcblx0XHRsZXQgcmVnO1xuXG5cdFx0aWYgKGtleXMubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBtID0ga2V5cy5qb2luKCd8Jyk7XG5cdFx0XHRyZWcgPSBuZXcgUmVnRXhwKCc6KCcgKyBtICsgJyknLCAnZycpO1xuXG5cdFx0XHRyZXR1cm4gc3RyLnJlcGxhY2UocmVnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNvbnN0IHJlcGxhY2VtZW50ID0gKGRhdGEgYXMgYW55KVthcmd1bWVudHNbMV1dO1xuXG5cdFx0XHRcdGlmIChyZXBsYWNlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFyZ3VtZW50c1swXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiByZXBsYWNlbWVudDtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzdHI7XG59O1xuXG5leHBvcnQgY29uc3QgdGV4dFRvTGluZVN0cmluZyA9ICh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuXHRjb25zdCByZWcgPSAvW1wiJ1xcXFxcXG5cXHJcXHRcXHUyMDI4XFx1MjAyOV0vZyxcblx0XHR0b0VzY2FwZXM6IG9iamVjdCA9IHtcblx0XHRcdCdcIic6ICdcIicsXG5cdFx0XHQvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHF1b3RlbWFya1xuXHRcdFx0XCInXCI6IFwiJ1wiLFxuXHRcdFx0J1xcXFwnOiAnXFxcXCcsXG5cdFx0XHQnXFxuJzogJ24nLFxuXHRcdFx0J1xccic6ICdyJyxcblx0XHRcdCdcXHQnOiAndCcsXG5cdFx0XHQnXFx1MjAyOCc6ICcyMDI4Jyxcblx0XHRcdCdcXHUyMDI5JzogJzIwMjknLFxuXHRcdH07XG5cblx0cmV0dXJuIHRleHQucmVwbGFjZShyZWcsIChtYXRjaCkgPT4gJ1xcXFwnICsgKHRvRXNjYXBlcyBhcyBhbnkpW21hdGNoXSk7XG59O1xuXG4vLyA9PT09PT09PT09TUFUSD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgX3NldERpZ2l0c1NlcCA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHNlcDogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3QgcyA9IFN0cmluZyh4KSxcblx0XHRhbnMgPSBbXSxcblx0XHRqID0gcy5pbmRleE9mKCcuJyksXG5cdFx0c3RhcnQgPSBqICE9PSAtMSA/IGogOiBzLmxlbmd0aCxcblx0XHRlbmQgPSBqICE9PSAtMSA/IHMuc2xpY2Uoc3RhcnQgKyAxKSA6IFtdO1xuXHRsZXQgY291bnQgPSAwLFxuXHRcdGkgPSBzdGFydDtcblxuXHRmb3IgKDsgaSA+PSAwOyBpLS0pIHtcblx0XHRpZiAoY291bnQgPT09IDMpIHtcblx0XHRcdGNvdW50ID0gMDtcblx0XHRcdGFuc1tpXSA9IGkgIT09IDAgPyBzZXAgKyBzW2ldIDogc1tpXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5zW2ldID0gc1tpXTtcblx0XHR9XG5cdFx0Y291bnQrKztcblx0fVxuXG5cdHJldHVybiBhbnMuY29uY2F0KGVuZCkuam9pbignJyk7XG59O1xuXG5leHBvcnQgY29uc3QgbnVtYmVyRm9ybWF0ID0gZnVuY3Rpb24gKFxuXHR4OiBudW1iZXIgfCBzdHJpbmcsXG5cdGRlYzogbnVtYmVyID0gMixcblx0ZGVjaW1hbFNlcDogc3RyaW5nID0gJy4nLFxuXHRkaWdpdHNTZXA6IHN0cmluZyA9ICcgJyxcbik6IHN0cmluZyB7XG5cdGlmICgheCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGxldCBhbnMgPSBwYXJzZUZsb2F0KFN0cmluZyh4KSksXG5cdFx0ZGVjaW1hbFBvcztcblxuXHRpZiAoZGVjID49IDApIHtcblx0XHRjb25zdCBkZWNpbWFsUG93ID0gTWF0aC5wb3coMTAsIGRlYyk7XG5cdFx0YW5zID0gTWF0aC5mbG9vcihhbnMgKiBkZWNpbWFsUG93KSAvIGRlY2ltYWxQb3c7XG5cdH1cblxuXHRjb25zdCBuID0gX3NldERpZ2l0c1NlcChhbnMsIGRpZ2l0c1NlcCk7XG5cdGNvbnN0IGEgPSBuLnNwbGl0KCcnKTtcblxuXHRkZWNpbWFsUG9zID0gYS5sYXN0SW5kZXhPZignLicpO1xuXHRpZiAoZGVjaW1hbFBvcyA+PSAwICYmIGRlY2ltYWxTZXAgIT09ICcuJykge1xuXHRcdGFbZGVjaW1hbFBvc10gPSBkZWNpbWFsU2VwO1xuXHR9XG5cblx0cmV0dXJuIGEuam9pbignJyk7XG59O1xuXG5leHBvcnQgY29uc3QgZ3QgPSBmdW5jdGlvbiAoXG5cdHg6IG51bWJlcixcblx0eTogbnVtYmVyLFxuXHRlcTogYm9vbGVhbiA9IGZhbHNlLFxuKTogYm9vbGVhbiB7XG5cdHJldHVybiBlcSA/IHggPj0geSA6IHggPiB5O1xufTtcbmV4cG9ydCBjb25zdCBsdCA9IGZ1bmN0aW9uIChcblx0eDogbnVtYmVyLFxuXHR5OiBudW1iZXIsXG5cdGVxOiBib29sZWFuID0gZmFsc2UsXG4pOiBib29sZWFuIHtcblx0cmV0dXJuIGVxID8geCA8PSB5IDogeCA8IHk7XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IGZ1bmN0aW9uIChcblx0eDogbnVtYmVyLFxuXHRhOiBudW1iZXIsXG5cdGI6IG51bWJlcixcblx0ZXE6IGJvb2xlYW4gPSBmYWxzZSxcbik6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZXEgPyB4ID49IGEgJiYgeCA8PSBiIDogeCA+IGEgJiYgeCA8IGI7XG59O1xuXG5leHBvcnQgY29uc3QgaXNSYW5nZSA9IGZ1bmN0aW9uIChhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gdHlwZW9mIGEgPT09ICdudW1iZXInICYmIHR5cGVvZiBiID09PSAnbnVtYmVyJyAmJiBhIDwgYjtcbn07XG5cbmV4cG9ydCBjb25zdCBpc0luRE9NID0gZnVuY3Rpb24gKFxuXHRlbGVtZW50OiBhbnksXG5cdGluQm9keTogYm9vbGVhbiA9IGZhbHNlLFxuKTogYm9vbGVhbiB7XG5cdGxldCBfID0gZWxlbWVudCxcblx0XHRsYXN0O1xuXG5cdHdoaWxlIChfKSB7XG5cdFx0bGFzdCA9IF87XG5cdFx0aWYgKGluQm9keSAmJiBsYXN0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0XyA9IF8ucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBpbkJvZHkgPyBsYXN0ID09PSBkb2N1bWVudC5ib2R5IDogbGFzdCA9PT0gZG9jdW1lbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChcblx0b2JqZWN0OiBvYmplY3QsXG5cdHByZWZpeDogc3RyaW5nLFxuKTogc3RyaW5nIHtcblx0Y29uc3QgZHVwbGljYXRlcyA9IHt9LFxuXHRcdHN0ciA9IFtdO1xuXG5cdGZvciAoY29uc3QgcHJvcCBpbiBvYmplY3QpIHtcblx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3ApKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBrZXkgPSBwcmVmaXggPyBwcmVmaXggKyAnWycgKyBwcm9wICsgJ10nIDogcHJvcCxcblx0XHRcdHZhbHVlID0gKG9iamVjdCBhcyBhbnkpW3Byb3BdO1xuXHRcdGxldCBwYWlyO1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0cGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuXHRcdFx0fSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRwYWlyID0gYnVpbGRRdWVyeVN0cmluZyh2YWx1ZSwga2V5KTtcblx0XHRcdH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0cGFpciA9IHZhbHVlXG5cdFx0XHRcdFx0LnJlZHVjZShmdW5jdGlvbiAobWVtbywgaXRlbSkge1xuXHRcdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV0pXG5cdFx0XHRcdFx0XHRcdChkdXBsaWNhdGVzIGFzIGFueSlba2V5XSA9IHt9O1xuXHRcdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV1baXRlbV0pIHtcblx0XHRcdFx0XHRcdFx0KGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldW2l0ZW1dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1lbW8uY29uY2F0KFxuXHRcdFx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChrZXkpICtcblx0XHRcdFx0XHRcdFx0XHRcdCc9JyArXG5cdFx0XHRcdFx0XHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoaXRlbSksXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWVtbztcblx0XHRcdFx0XHR9LCBbXSlcblx0XHRcdFx0XHQuam9pbignJicpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGFpciA9XG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHIucHVzaChwYWlyKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaHVmZmxlID0gKGE6IGFueVtdKTogYW55W10gPT4ge1xuXHRsZXQgaiwgeCwgaTtcblxuXHRmb3IgKGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcblx0XHRqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG5cdFx0eCA9IGFbaV07XG5cdFx0YVtpXSA9IGFbal07XG5cdFx0YVtqXSA9IHg7XG5cdH1cblxuXHRyZXR1cm4gYTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7XG5cdGlmIChzdHIuY2hhckF0KDApID09PSAnPycpIHN0ciA9IHN0ci5zdWJzdHJpbmcoMSk7XG5cdGlmICghc3RyLmxlbmd0aCkgcmV0dXJuIHt9O1xuXG5cdGNvbnN0IHBhaXJzID0gc3RyLnNwbGl0KCcmJyksXG5cdFx0cGFyYW1zID0ge307XG5cdGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYWlycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdGNvbnN0IHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHRcdFx0a2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pLFxuXHRcdFx0dmFsdWUgPSBwYWlyLmxlbmd0aCA9PT0gMiA/IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSA6IG51bGw7XG5cdFx0aWYgKChwYXJhbXMgYXMgYW55KVtrZXldICE9IG51bGwpIHtcblx0XHRcdGlmICghaXNBcnJheSgocGFyYW1zIGFzIGFueSlba2V5XSkpIHtcblx0XHRcdFx0KHBhcmFtcyBhcyBhbnkpW2tleV0gPSBbKHBhcmFtcyBhcyBhbnkpW2tleV1dO1xuXHRcdFx0fVxuXHRcdFx0KHBhcmFtcyBhcyBhbnkpW2tleV0ucHVzaCh2YWx1ZSk7XG5cdFx0fSBlbHNlIChwYXJhbXMgYXMgYW55KVtrZXldID0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIHBhcmFtcztcbn07XG5cbmV4cG9ydCBjb25zdCBwcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIChlOiBFdmVudCkge1xuXHRpZiAoIWUpIHtcblx0XHRpZiAod2luZG93LmV2ZW50KSBlID0gd2luZG93LmV2ZW50O1xuXHRcdGVsc2UgcmV0dXJuO1xuXHR9XG5cblx0aWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcblx0aWYgKGUuY2FuY2VsQnViYmxlICE9IG51bGwpIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0aWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRpZiAod2luZG93LmV2ZW50KSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cdC8vIGlmIChlLmNhbmNlbCAhPSBudWxsKSBlLmNhbmNlbCA9IHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZEFnZSA9IChcblx0ZGF5OiBudW1iZXIsXG5cdG1vbnRoOiBudW1iZXIsXG5cdHllYXI6IG51bWJlcixcblx0bWluQWdlOiBudW1iZXIsXG5cdG1heEFnZTogbnVtYmVyLFxuKTogYm9vbGVhbiA9PiB7XG5cdC8vIGRlcGVuZGluZyBvbiB0aGUgeWVhciwgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGhcblx0Y29uc3QgZmVicnVhcnlEYXlzID0geWVhciAlIDQgPT09IDAgPyAyOSA6IDI4LFxuXHRcdGRheXNJbk1vbnRoID0gW1xuXHRcdFx0MzEsXG5cdFx0XHRmZWJydWFyeURheXMsXG5cdFx0XHQzMSxcblx0XHRcdDMwLFxuXHRcdFx0MzEsXG5cdFx0XHQzMCxcblx0XHRcdDMxLFxuXHRcdFx0MzEsXG5cdFx0XHQzMCxcblx0XHRcdDMxLFxuXHRcdFx0MzAsXG5cdFx0XHQzMSxcblx0XHRdO1xuXG5cdC8vIGZpcnN0LCBjaGVjayB0aGUgaW5jb21pbmcgbW9udGggYW5kIHllYXIgYXJlIHZhbGlkLlxuXHRpZiAoIW1vbnRoIHx8ICFkYXkgfHwgIXllYXIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKDEgPiBtb250aCB8fCBtb250aCA+IDEyKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICh5ZWFyIDwgMCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoMSA+IGRheSB8fCBkYXkgPiBkYXlzSW5Nb250aFttb250aCAtIDFdKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gaWYgcmVxdWlyZWQsIHZlcmlmeSB0aGUgY3VycmVudCBkYXRlIGlzIExBVEVSIHRoYW4gdGhlIGluY29taW5nIGRhdGUuXG5cdGlmIChtaW5BZ2UgIT09IHVuZGVmaW5lZCB8fCBtYXhBZ2UgIT09IHVuZGVmaW5lZCkge1xuXHRcdC8vIHdlIGdldCBjdXJyZW50IHllYXJcblx0XHRjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcblx0XHRcdGFnZSA9IGN1cnJlbnRZZWFyIC0geWVhcjtcblxuXHRcdGlmIChhZ2UgPCAwKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGlmIChhZ2UgPCBtaW5BZ2UpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGFnZSA+IG1heEFnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbGVTaXplRm9ybWF0ID0gZnVuY3Rpb24gKFxuXHRzaXplOiBudW1iZXIgLyogaW4gYnl0ZXMgKi8sXG5cdGRlY2ltYWxQb2ludDogc3RyaW5nID0gJy4nLFxuXHR0aG91c2FuZHNTZXA6IHN0cmluZyA9ICcgJyxcbikge1xuXHRjb25zdCB1bml0cyA9IFsnYnl0ZScsICdLYicsICdNYicsICdHYicsICdUYiddLFxuXHRcdGlNYXggPSB1bml0cy5sZW5ndGg7XG5cdGxldCBpID0gMCxcblx0XHRyZXN1bHQgPSAwO1xuXG5cdHNpemUgPSBwYXJzZUZsb2F0KFN0cmluZyhzaXplKSk7XG5cblx0d2hpbGUgKHNpemUgPj0gMSAmJiBpIDwgaU1heCkge1xuXHRcdHJlc3VsdCA9IHNpemU7XG5cdFx0c2l6ZSAvPSAxMDAwOyAvLyBub3QgMTAyNFxuXHRcdGkrKztcblx0fVxuXG5cdGNvbnN0IHBhcnRzID0gU3RyaW5nKHJlc3VsdCkuc3BsaXQoJy4nKSxcblx0XHRoZWFkID1cblx0XHRcdHBhcnNlSW50KHBhcnRzWzBdKSA9PT0gcmVzdWx0XG5cdFx0XHRcdD8gcmVzdWx0XG5cdFx0XHRcdDogbnVtYmVyRm9ybWF0KHJlc3VsdCwgMiwgZGVjaW1hbFBvaW50LCB0aG91c2FuZHNTZXApO1xuXG5cdHJldHVybiBoZWFkICsgJyAnICsgdW5pdHNbaSA9PT0gMCA/IDAgOiBpIC0gMV07XG59O1xuXG4vKipcbiAqIE9wZW5zIHRoZSBwcm92aWRlZCB1cmwgYnkgaW5qZWN0aW5nIGEgaGlkZGVuIGlmcmFtZSB0aGF0IGNhbGxzXG4gKiB3aW5kb3cub3BlbigpLCB0aGVuIHJlbW92ZXMgdGhlIGlmcmFtZSBmcm9tIHRoZSBET00uXG4gKlxuICogUHJldmVudCByZXZlcnNlIHRhYm5hYmJpbmcgcGhpc2hpbmcgYXR0YWNrcyBjYXVzZWQgYnkgX2JsYW5rXG4gKlxuICogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmdpdGh1Yi5pby9yZWwtbm9vcGVuZXIvXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhbmllbHN0anVsZXMvYmxhbmtzaGllbGQvYmxvYi82ZTIwOGJmMjVhNDRiZjUwZDFhNWU4NWFlOTZmZWUwYzAxNWQwNWJjL2JsYW5rc2hpZWxkLmpzI0wxNjZcbiAqXG4gKiBAcGFyYW0gdXJsXG4gKiBAcGFyYW0gc3RyV2luZG93TmFtZVxuICogQHBhcmFtIHN0cldpbmRvd0ZlYXR1cmVzXG4gKi9cbmV4cG9ydCBjb25zdCBzYWZlT3BlbiA9IGZ1bmN0aW9uIChcblx0dXJsOiBzdHJpbmcgPSAnJyxcblx0c3RyV2luZG93TmFtZTogc3RyaW5nID0gJycsXG5cdHN0cldpbmRvd0ZlYXR1cmVzOiBzdHJpbmcgPSAnJyxcbikge1xuXHRpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTVNJRScpICE9PSAtMSkge1xuXHRcdC8vIElFIGJlZm9yZSAxMVxuXHRcdGNvbnN0IGNoaWxkID0gb3Blbi5hcHBseSh3aW5kb3csIFtcblx0XHRcdHVybCxcblx0XHRcdHN0cldpbmRvd05hbWUsXG5cdFx0XHRzdHJXaW5kb3dGZWF0dXJlcyxcblx0XHRdKTtcblx0XHRpZiAoY2hpbGQpIHtcblx0XHRcdGNoaWxkLm9wZW5lciA9IG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiBjaGlsZDtcblx0fVxuXG5cdGxldCBpZnJhbWUsIGlmcmFtZURvYywgc2NyaXB0LCBvcGVuQXJncywgbmV3V2luO1xuXG5cdGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpIGFzIEhUTUxJRnJhbWVFbGVtZW50O1xuXHRpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXHRpZnJhbWVEb2MgPSAoaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fFxuXHRcdChpZnJhbWUuY29udGVudFdpbmRvdyBhcyBhbnkpLmRvY3VtZW50KSBhcyBEb2N1bWVudDtcblxuXHRvcGVuQXJncyA9ICdcIicgKyB1cmwgKyAnXCInO1xuXHRpZiAoc3RyV2luZG93TmFtZSkge1xuXHRcdG9wZW5BcmdzICs9ICcsIFwiJyArIHN0cldpbmRvd05hbWUgKyAnXCInO1xuXHR9XG5cdGlmIChzdHJXaW5kb3dGZWF0dXJlcykge1xuXHRcdG9wZW5BcmdzICs9ICcsIFwiJyArIHN0cldpbmRvd0ZlYXR1cmVzICsgJ1wiJztcblx0fVxuXG5cdHNjcmlwdCA9IGlmcmFtZURvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcblx0c2NyaXB0LnRleHQgPVxuXHRcdCd3aW5kb3cucGFyZW50ID0gbnVsbDsgd2luZG93LnRvcCA9IG51bGw7JyArXG5cdFx0J3dpbmRvdy5mcmFtZUVsZW1lbnQgPSBudWxsOyB2YXIgY2hpbGQgPSB3aW5kb3cub3BlbignICtcblx0XHRvcGVuQXJncyArXG5cdFx0Jyk7JyArXG5cdFx0J2lmIChjaGlsZCkgeyBjaGlsZC5vcGVuZXIgPSBudWxsIH0nO1xuXHRpZnJhbWVEb2MuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHRuZXdXaW4gPSAoaWZyYW1lLmNvbnRlbnRXaW5kb3cgYXMgYW55KS5jaGlsZCBhcyBXaW5kb3c7XG5cblx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuXHRyZXR1cm4gbmV3V2luO1xufTtcblxuY29uc3QgX2ZuID0gZnVuY3Rpb24gKFxuXHR0eXBlOiAnZXJyb3InIHwgJ3dhcm4nIHwgJ2xvZycgfCAnaW5mbycgfCAnZGVidWcnIHwgJ3RyYWNlJyxcbikge1xuXHRpZiAoKHdpbmRvdyBhcyBhbnkpLl9fb3dlYl9zaG93X2xvZyA9PT0gdHJ1ZSkge1xuXHRcdHJldHVybiBjb25zb2xlW3R5cGVdO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBub29wO1xuXHR9XG59O1xuXG5leHBvcnQgY29uc3QgbG9nZ2VyID0ge1xuXHRnZXQgZGVidWcoKSB7XG5cdFx0cmV0dXJuIF9mbignZGVidWcnKTtcblx0fSxcblx0Z2V0IGxvZygpIHtcblx0XHRyZXR1cm4gX2ZuKCdkZWJ1ZycpO1xuXHR9LFxuXHRnZXQgaW5mbygpIHtcblx0XHRyZXR1cm4gX2ZuKCdkZWJ1ZycpO1xuXHR9LFxuXHRnZXQgZXJyb3IoKSB7XG5cdFx0cmV0dXJuIF9mbignZGVidWcnKTtcblx0fSxcblx0Z2V0IHdhcm4oKSB7XG5cdFx0cmV0dXJuIF9mbignZGVidWcnKTtcblx0fSxcbn07XG4iXX0=