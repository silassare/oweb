export const id = (function () {
    let _naturalId = 0;
    return () => 'id-' + _naturalId++;
})();
// tslint:disable-next-line: no-empty
export const noop = () => { };
// ==========TYPE CHECKERS====================================
export const isArray = Array.isArray;
export const isPlainObject = (a) => Object.prototype.toString.call(a) === '[object Object]';
export const isString = (a) => typeof a === 'string';
export const isFunction = (a) => typeof a === 'function';
export const isEmpty = function (a) {
    if (isArray(a)) {
        return !a.length;
    }
    if (isPlainObject(a)) {
        return !Object.keys(a).length;
    }
    if (typeof a === 'string') {
        return a.trim().length === 0;
    }
    if (typeof a === 'number') {
        return isNaN(a);
    }
    return !a;
};
export const isNotEmpty = (a) => !isEmpty(a);
export const toArray = (a) => [].concat.apply([], a);
export const escapeRegExp = (str) => str.replace(/([.+*?=^!:${}()[\]|\/])/g, '\\$1');
// ==========HELPERS====================================
export const callback = function (fn, args, ctx) {
    if (typeof fn === 'function') {
        return fn.apply(ctx, args);
    }
    return null;
};
export const forEach = function (obj, fn) {
    Object.keys(obj).forEach((key) => {
        const value = obj[key];
        fn(value, key);
    });
};
export const assign = Object.assign ||
    function (target, source) {
        const to = target;
        let from, symbols;
        for (let s = 1; s < arguments.length; s++) {
            from = Object(arguments[s]);
            for (const key in from) {
                if (Object.prototype.hasOwnProperty.call(from, key)) {
                    to[key] = from[key];
                }
            }
            if ('getOwnPropertySymbols' in Object) {
                symbols = Object.getOwnPropertySymbols(from);
                for (let i = 0; i < symbols.length; i++) {
                    if (from.propertyIsEnumerable(symbols[i])) {
                        to[symbols[i]] = from[symbols[i]];
                    }
                }
            }
        }
        return to;
    };
export const clone = function (a) {
    return JSON.parse(JSON.stringify(a));
};
export const stringPlaceholderReplace = function (str, data) {
    if (isString(str) && str.length && isPlainObject(data)) {
        const keys = Object.keys(data).sort().reverse();
        let reg;
        if (keys.length) {
            const m = keys.join('|');
            reg = new RegExp(':(' + m + ')', 'g');
            return str.replace(reg, function () {
                const replacement = data[arguments[1]];
                if (replacement === undefined) {
                    return arguments[0];
                }
                return replacement;
            });
        }
    }
    return str;
};
export const textToLineString = (text) => {
    const reg = /["'\\\n\r\t\u2028\u2029]/g, toEscapes = {
        '"': '"',
        '\'': '\'',
        '\\': '\\',
        '\n': 'n',
        '\r': 'r',
        '\t': 't',
        '\u2028': '2028',
        '\u2029': '2029',
    };
    return text.replace(reg, (match) => '\\' + toEscapes[match]);
};
// ==========MATH====================================
export const _setDigitsSep = function (x, sep) {
    const s = String(x), ans = [], j = s.indexOf('.'), start = j !== -1 ? j : s.length, end = j !== -1 ? s.slice(start + 1) : [];
    let count = 0, i = start;
    for (; i >= 0; i--) {
        if (count === 3) {
            count = 0;
            ans[i] = i !== 0 ? sep + s[i] : s[i];
        }
        else {
            ans[i] = s[i];
        }
        count++;
    }
    return ans.concat(end).join('');
};
export const numberFormat = function (x, dec = 2, decimalSep = '.', digitsSep = ' ') {
    if (!x) {
        return '';
    }
    let ans = parseFloat(String(x)), decimalPos;
    if (dec >= 0) {
        const decimalPow = Math.pow(10, dec);
        ans = Math.floor(ans * decimalPow) / decimalPow;
    }
    const n = _setDigitsSep(ans, digitsSep);
    const a = n.split('');
    decimalPos = a.lastIndexOf('.');
    if (decimalPos >= 0 && decimalSep !== '.') {
        a[decimalPos] = decimalSep;
    }
    return a.join('');
};
export const gt = function (x, y, eq = false) {
    return eq ? x >= y : x > y;
};
export const lt = function (x, y, eq = false) {
    return eq ? x <= y : x < y;
};
export const between = function (x, a, b, eq = false) {
    return eq ? x >= a && x <= b : x > a && x < b;
};
export const isRange = function (a, b) {
    return typeof a === 'number' && typeof b === 'number' && a < b;
};
export const isInDOM = function (element, inBody = false) {
    let _ = element, last;
    while (_) {
        last = _;
        if (inBody && last === document.body) {
            break;
        }
        _ = _.parentNode;
    }
    return inBody ? last === document.body : last === document;
};
export const buildQueryString = function (object, prefix) {
    const duplicates = {}, str = [];
    for (const prop in object) {
        if (!Object.prototype.hasOwnProperty.call(object, prop)) {
            continue;
        }
        const key = prefix ? prefix + '[' + prop + ']' : prop, value = object[prop];
        let pair;
        if (value !== undefined) {
            if (value === null) {
                pair = encodeURIComponent(key);
            }
            else if (isPlainObject(value)) {
                pair = buildQueryString(value, key);
            }
            else if (isArray(value)) {
                pair = value
                    .reduce(function (memo, item) {
                    if (!duplicates[key])
                        duplicates[key] = {};
                    if (!duplicates[key][item]) {
                        duplicates[key][item] = true;
                        return memo.concat(encodeURIComponent(key) +
                            '=' +
                            encodeURIComponent(item));
                    }
                    return memo;
                }, [])
                    .join('&');
            }
            else {
                pair =
                    encodeURIComponent(key) + '=' + encodeURIComponent(value);
            }
            str.push(pair);
        }
    }
    return str.join('&');
};
export const shuffle = (a) => {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
};
export const parseQueryString = function (str) {
    if (str.charAt(0) === '?')
        str = str.substring(1);
    if (!str.length)
        return {};
    const pairs = str.split('&'), params = {};
    for (let i = 0, len = pairs.length; i < len; i++) {
        const pair = pairs[i].split('='), key = decodeURIComponent(pair[0]), value = pair.length === 2 ? decodeURIComponent(pair[1]) : null;
        if (params[key] != null) {
            if (!isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(value);
        }
        else
            params[key] = value;
    }
    return params;
};
export const preventDefault = function (e) {
    if (!e) {
        if (window.event)
            e = window.event;
        else
            return;
    }
    if (e.preventDefault)
        e.preventDefault();
    if (e.cancelBubble != null)
        e.cancelBubble = true;
    if (e.stopPropagation)
        e.stopPropagation();
    if (window.event)
        e.returnValue = false;
    // if (e.cancel != null) e.cancel = true;
};
export const isValidAge = (day, month, year, minAge, maxAge) => {
    // depending on the year, calculate the number of days in the month
    const februaryDays = year % 4 === 0 ? 29 : 28, daysInMonth = [
        31,
        februaryDays,
        31,
        30,
        31,
        30,
        31,
        31,
        30,
        31,
        30,
        31,
    ];
    // first, check the incoming month and year are valid.
    if (!month || !day || !year) {
        return false;
    }
    if (1 > month || month > 12) {
        return false;
    }
    if (year < 0) {
        return false;
    }
    if (1 > day || day > daysInMonth[month - 1]) {
        return false;
    }
    // if required, verify the current date is LATER than the incoming date.
    if (minAge !== undefined || maxAge !== undefined) {
        // we get current year
        const currentYear = new Date().getFullYear(), age = currentYear - year;
        if (age < 0) {
            return false;
        }
        if (age < minAge) {
            return false;
        }
        if (age > maxAge) {
            return false;
        }
    }
    return true;
};
export const fileSizeFormat = function (size /* in bytes */, decimalPoint = '.', thousandsSep = ' ') {
    const units = ['byte', 'Kb', 'Mb', 'Gb', 'Tb'], iMax = units.length;
    let i = 0, result = 0;
    size = parseFloat(String(size));
    while (size >= 1 && i < iMax) {
        result = size;
        size /= 1000; // not 1024
        i++;
    }
    const parts = String(result).split('.'), head = parseInt(parts[0]) === result
        ? result
        : numberFormat(result, 2, decimalPoint, thousandsSep);
    return head + ' ' + units[i === 0 ? 0 : i - 1];
};
/**
 * Opens the provided url by injecting a hidden iframe that calls
 * window.open(), then removes the iframe from the DOM.
 *
 * Prevent reverse tabnabbing phishing attacks caused by _blank
 *
 * https://mathiasbynens.github.io/rel-noopener/
 *
 * https://github.com/danielstjules/blankshield/blob/6e208bf25a44bf50d1a5e85ae96fee0c015d05bc/blankshield.js#L166
 *
 * @param url
 * @param strWindowName
 * @param strWindowFeatures
 */
export const safeOpen = function (url = '', strWindowName = '', strWindowFeatures = '') {
    if (window.navigator.userAgent.indexOf('MSIE') !== -1) {
        // IE before 11
        const child = open.apply(window, [
            url,
            strWindowName,
            strWindowFeatures,
        ]);
        if (child) {
            child.opener = null;
        }
        return child;
    }
    let iframe, iframeDoc, script, openArgs, newWin;
    iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    iframeDoc = (iframe.contentDocument ||
        iframe.contentWindow.document);
    openArgs = '"' + url + '"';
    if (strWindowName) {
        openArgs += ', "' + strWindowName + '"';
    }
    if (strWindowFeatures) {
        openArgs += ', "' + strWindowFeatures + '"';
    }
    script = iframeDoc.createElement('script');
    script.type = 'text/javascript';
    script.text =
        'window.parent = null; window.top = null;' +
            'window.frameElement = null; var child = window.open(' +
            openArgs +
            ');' +
            'if (child) { child.opener = null }';
    iframeDoc.body.appendChild(script);
    newWin = iframe.contentWindow.child;
    document.body.removeChild(iframe);
    return newWin;
};
const _fn = function (type) {
    return function (...args) {
        if (window.__oweb_show_log !== false) {
            if (console[type]) {
                console[type](...args);
            }
        }
        return undefined;
    };
};
export const _debug = _fn('debug'), _log = _fn('log'), _info = _fn('info'), _warn = _fn('warn'), _error = _fn('error');
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7SUFDbEIsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBRW5CLE9BQU8sR0FBVyxFQUFFLENBQUMsS0FBSyxHQUFHLFVBQVUsRUFBRSxDQUFDO0FBQzNDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFTCxxQ0FBcUM7QUFDckMsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFFLENBQUMsQ0FBQztBQUU3Qiw4REFBOEQ7QUFDOUQsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDckMsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQUMsQ0FBTSxFQUFXLEVBQUUsQ0FDaEQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLGlCQUFpQixDQUFDO0FBQ3pELE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQU0sRUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQ3ZFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBRyxDQUFDLENBQU0sRUFBZ0MsRUFBRSxDQUNsRSxPQUFPLENBQUMsS0FBSyxVQUFVLENBQUM7QUFDekIsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBTTtJQUN0QyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQ2pCO0lBQ0QsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzlCO0lBRUQsSUFB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QUcsVUFBVSxJQUFpRDtJQUN0RSxPQUFPLFVBQVUsR0FBRyxJQUFXO1FBQzlCLElBQUssTUFBYyxDQUFDLGVBQWUsS0FBSyxLQUFLLEVBQUU7WUFDOUMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ2xCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO2FBQ3ZCO1NBQ0Q7UUFFRCxPQUFPLFNBQVMsQ0FBQztJQUNsQixDQUFDLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUNqQyxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUNqQixLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUNuQixLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUNuQixNQUFNLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlkID0gKGZ1bmN0aW9uICgpIHtcblx0bGV0IF9uYXR1cmFsSWQgPSAwO1xuXG5cdHJldHVybiAoKTogc3RyaW5nID0+ICdpZC0nICsgX25hdHVyYWxJZCsrO1xufSkoKTtcblxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1lbXB0eVxuZXhwb3J0IGNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuLy8gPT09PT09PT09PVRZUEUgQ0hFQ0tFUlM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbmV4cG9ydCBjb25zdCBpc1BsYWluT2JqZWN0ID0gKGE6IGFueSk6IGJvb2xlYW4gPT5cblx0T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpID09PSAnW29iamVjdCBPYmplY3RdJztcbmV4cG9ydCBjb25zdCBpc1N0cmluZyA9IChhOiBhbnkpOiBhIGlzIHN0cmluZyA9PiB0eXBlb2YgYSA9PT0gJ3N0cmluZyc7XG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbiA9IChhOiBhbnkpOiBhIGlzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55ID0+XG5cdHR5cGVvZiBhID09PSAnZnVuY3Rpb24nO1xuZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSBmdW5jdGlvbiAoYTogYW55KTogYm9vbGVhbiB7XG5cdGlmIChpc0FycmF5KGEpKSB7XG5cdFx0cmV0dXJuICFhLmxlbmd0aDtcblx0fVxuXHRpZiAoaXNQbGFpbk9iamVjdChhKSkge1xuXHRcdHJldHVybiAhT2JqZWN0LmtleXMoYSkubGVuZ3RoO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBhID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBhLnRyaW0oKS5sZW5ndGggPT09IDA7XG5cdH1cblxuXHRpZiAodHlwZW9mIGEgPT09ICdudW1iZXInKSB7XG5cdFx0cmV0dXJuIGlzTmFOKGEpO1xuXHR9XG5cblx0cmV0dXJuICFhO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzTm90RW1wdHkgPSAoYTogYW55KTogYm9vbGVhbiA9PiAhaXNFbXB0eShhKTtcbmV4cG9ydCBjb25zdCB0b0FycmF5ID0gKGE6IGFueSk6IGFueVtdID0+IFtdLmNvbmNhdC5hcHBseShbXSwgYSk7XG5leHBvcnQgY29uc3QgZXNjYXBlUmVnRXhwID0gKHN0cjogc3RyaW5nKSA9PlxuXHRzdHIucmVwbGFjZSgvKFsuKyo/PV4hOiR7fSgpW1xcXXxcXC9dKS9nLCAnXFxcXCQxJyk7XG4vLyA9PT09PT09PT09SEVMUEVSUz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24gKGZuOiBhbnksIGFyZ3M/OiBhbnlbXSwgY3R4PzogYW55KTogYW55IHtcblx0aWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHJldHVybiBmbi5hcHBseShjdHgsIGFyZ3MpO1xuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgZm9yRWFjaCA9IGZ1bmN0aW9uIDxUPihcblx0b2JqOiB7IFtrZXk6IHN0cmluZ106IFQgfSB8IFRbXSxcblx0Zm46ICh2YWx1ZTogVCwga2V5OiBhbnkpID0+IHZvaWQsXG4pIHtcblx0T2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuXHRcdGNvbnN0IHZhbHVlOiBUID0gKG9iaiBhcyBhbnkpW2tleV07XG5cdFx0Zm4odmFsdWUsIGtleSk7XG5cdH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGFzc2lnbiA9XG5cdChPYmplY3QgYXMgYW55KS5hc3NpZ24gfHxcblx0ZnVuY3Rpb24gKHRhcmdldDogb2JqZWN0LCBzb3VyY2U6IG9iamVjdCkge1xuXHRcdGNvbnN0IHRvID0gdGFyZ2V0O1xuXHRcdGxldCBmcm9tLCBzeW1ib2xzO1xuXG5cdFx0Zm9yIChsZXQgcyA9IDE7IHMgPCBhcmd1bWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xuXHRcdFx0XHRpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb20sIGtleSkpIHtcblx0XHRcdFx0XHQodG8gYXMgYW55KVtrZXldID0gZnJvbVtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICgnZ2V0T3duUHJvcGVydHlTeW1ib2xzJyBpbiBPYmplY3QpIHtcblx0XHRcdFx0c3ltYm9scyA9IChPYmplY3QgYXMgYW55KS5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZnJvbSk7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmIChmcm9tLnByb3BlcnR5SXNFbnVtZXJhYmxlKHN5bWJvbHNbaV0pKSB7XG5cdFx0XHRcdFx0XHQodG8gYXMgYW55KVtzeW1ib2xzW2ldXSA9IGZyb21bc3ltYm9sc1tpXV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRvO1xuXHR9O1xuXG5leHBvcnQgY29uc3QgY2xvbmUgPSBmdW5jdGlvbiA8VD4oYTogVCk6IFQge1xuXHRyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc3RyaW5nUGxhY2Vob2xkZXJSZXBsYWNlID0gZnVuY3Rpb24gKFxuXHRzdHI6IHN0cmluZyxcblx0ZGF0YTogb2JqZWN0LFxuKTogc3RyaW5nIHtcblx0aWYgKGlzU3RyaW5nKHN0cikgJiYgc3RyLmxlbmd0aCAmJiBpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdFx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpLnNvcnQoKS5yZXZlcnNlKCk7XG5cdFx0bGV0IHJlZztcblxuXHRcdGlmIChrZXlzLmxlbmd0aCkge1xuXHRcdFx0Y29uc3QgbSA9IGtleXMuam9pbignfCcpO1xuXHRcdFx0cmVnID0gbmV3IFJlZ0V4cCgnOignICsgbSArICcpJywgJ2cnKTtcblxuXHRcdFx0cmV0dXJuIHN0ci5yZXBsYWNlKHJlZywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zdCByZXBsYWNlbWVudCA9IChkYXRhIGFzIGFueSlbYXJndW1lbnRzWzFdXTtcblxuXHRcdFx0XHRpZiAocmVwbGFjZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJldHVybiBhcmd1bWVudHNbMF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gcmVwbGFjZW1lbnQ7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyO1xufTtcblxuZXhwb3J0IGNvbnN0IHRleHRUb0xpbmVTdHJpbmcgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcblx0Y29uc3QgcmVnID0gL1tcIidcXFxcXFxuXFxyXFx0XFx1MjAyOFxcdTIwMjldL2csXG5cdFx0dG9Fc2NhcGVzOiBvYmplY3QgPSB7XG5cdFx0XHQnXCInOiAnXCInLFxuXHRcdFx0J1xcJyc6ICdcXCcnLFxuXHRcdFx0J1xcXFwnOiAnXFxcXCcsXG5cdFx0XHQnXFxuJzogJ24nLFxuXHRcdFx0J1xccic6ICdyJyxcblx0XHRcdCdcXHQnOiAndCcsXG5cdFx0XHQnXFx1MjAyOCc6ICcyMDI4Jyxcblx0XHRcdCdcXHUyMDI5JzogJzIwMjknLFxuXHRcdH07XG5cblx0cmV0dXJuIHRleHQucmVwbGFjZShyZWcsIChtYXRjaCkgPT4gJ1xcXFwnICsgKHRvRXNjYXBlcyBhcyBhbnkpW21hdGNoXSk7XG59O1xuXG4vLyA9PT09PT09PT09TUFUSD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgX3NldERpZ2l0c1NlcCA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHNlcDogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3QgcyA9IFN0cmluZyh4KSxcblx0XHRhbnMgPSBbXSxcblx0XHRqID0gcy5pbmRleE9mKCcuJyksXG5cdFx0c3RhcnQgPSBqICE9PSAtMSA/IGogOiBzLmxlbmd0aCxcblx0XHRlbmQgPSBqICE9PSAtMSA/IHMuc2xpY2Uoc3RhcnQgKyAxKSA6IFtdO1xuXHRsZXQgY291bnQgPSAwLFxuXHRcdGkgPSBzdGFydDtcblxuXHRmb3IgKDsgaSA+PSAwOyBpLS0pIHtcblx0XHRpZiAoY291bnQgPT09IDMpIHtcblx0XHRcdGNvdW50ID0gMDtcblx0XHRcdGFuc1tpXSA9IGkgIT09IDAgPyBzZXAgKyBzW2ldIDogc1tpXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5zW2ldID0gc1tpXTtcblx0XHR9XG5cdFx0Y291bnQrKztcblx0fVxuXG5cdHJldHVybiBhbnMuY29uY2F0KGVuZCkuam9pbignJyk7XG59O1xuXG5leHBvcnQgY29uc3QgbnVtYmVyRm9ybWF0ID0gZnVuY3Rpb24gKFxuXHR4OiBudW1iZXIgfCBzdHJpbmcsXG5cdGRlYzogbnVtYmVyID0gMixcblx0ZGVjaW1hbFNlcDogc3RyaW5nID0gJy4nLFxuXHRkaWdpdHNTZXA6IHN0cmluZyA9ICcgJyxcbik6IHN0cmluZyB7XG5cdGlmICgheCkge1xuXHRcdHJldHVybiAnJztcblx0fVxuXG5cdGxldCBhbnMgPSBwYXJzZUZsb2F0KFN0cmluZyh4KSksXG5cdFx0ZGVjaW1hbFBvcztcblxuXHRpZiAoZGVjID49IDApIHtcblx0XHRjb25zdCBkZWNpbWFsUG93ID0gTWF0aC5wb3coMTAsIGRlYyk7XG5cdFx0YW5zID0gTWF0aC5mbG9vcihhbnMgKiBkZWNpbWFsUG93KSAvIGRlY2ltYWxQb3c7XG5cdH1cblxuXHRjb25zdCBuID0gX3NldERpZ2l0c1NlcChhbnMsIGRpZ2l0c1NlcCk7XG5cdGNvbnN0IGEgPSBuLnNwbGl0KCcnKTtcblxuXHRkZWNpbWFsUG9zID0gYS5sYXN0SW5kZXhPZignLicpO1xuXHRpZiAoZGVjaW1hbFBvcyA+PSAwICYmIGRlY2ltYWxTZXAgIT09ICcuJykge1xuXHRcdGFbZGVjaW1hbFBvc10gPSBkZWNpbWFsU2VwO1xuXHR9XG5cblx0cmV0dXJuIGEuam9pbignJyk7XG59O1xuXG5leHBvcnQgY29uc3QgZ3QgPSBmdW5jdGlvbiAoXG5cdHg6IG51bWJlcixcblx0eTogbnVtYmVyLFxuXHRlcTogYm9vbGVhbiA9IGZhbHNlLFxuKTogYm9vbGVhbiB7XG5cdHJldHVybiBlcSA/IHggPj0geSA6IHggPiB5O1xufTtcbmV4cG9ydCBjb25zdCBsdCA9IGZ1bmN0aW9uIChcblx0eDogbnVtYmVyLFxuXHR5OiBudW1iZXIsXG5cdGVxOiBib29sZWFuID0gZmFsc2UsXG4pOiBib29sZWFuIHtcblx0cmV0dXJuIGVxID8geCA8PSB5IDogeCA8IHk7XG59O1xuXG5leHBvcnQgY29uc3QgYmV0d2VlbiA9IGZ1bmN0aW9uIChcblx0eDogbnVtYmVyLFxuXHRhOiBudW1iZXIsXG5cdGI6IG51bWJlcixcblx0ZXE6IGJvb2xlYW4gPSBmYWxzZSxcbik6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZXEgPyB4ID49IGEgJiYgeCA8PSBiIDogeCA+IGEgJiYgeCA8IGI7XG59O1xuXG5leHBvcnQgY29uc3QgaXNSYW5nZSA9IGZ1bmN0aW9uIChhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gdHlwZW9mIGEgPT09ICdudW1iZXInICYmIHR5cGVvZiBiID09PSAnbnVtYmVyJyAmJiBhIDwgYjtcbn07XG5cbmV4cG9ydCBjb25zdCBpc0luRE9NID0gZnVuY3Rpb24gKFxuXHRlbGVtZW50OiBhbnksXG5cdGluQm9keTogYm9vbGVhbiA9IGZhbHNlLFxuKTogYm9vbGVhbiB7XG5cdGxldCBfID0gZWxlbWVudCxcblx0XHRsYXN0O1xuXG5cdHdoaWxlIChfKSB7XG5cdFx0bGFzdCA9IF87XG5cdFx0aWYgKGluQm9keSAmJiBsYXN0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0XyA9IF8ucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBpbkJvZHkgPyBsYXN0ID09PSBkb2N1bWVudC5ib2R5IDogbGFzdCA9PT0gZG9jdW1lbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChcblx0b2JqZWN0OiBvYmplY3QsXG5cdHByZWZpeDogc3RyaW5nLFxuKTogc3RyaW5nIHtcblx0Y29uc3QgZHVwbGljYXRlcyA9IHt9LFxuXHRcdHN0ciA9IFtdO1xuXG5cdGZvciAoY29uc3QgcHJvcCBpbiBvYmplY3QpIHtcblx0XHRpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3ApKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBrZXkgPSBwcmVmaXggPyBwcmVmaXggKyAnWycgKyBwcm9wICsgJ10nIDogcHJvcCxcblx0XHRcdHZhbHVlID0gKG9iamVjdCBhcyBhbnkpW3Byb3BdO1xuXHRcdGxldCBwYWlyO1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0cGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuXHRcdFx0fSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRwYWlyID0gYnVpbGRRdWVyeVN0cmluZyh2YWx1ZSwga2V5KTtcblx0XHRcdH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0cGFpciA9IHZhbHVlXG5cdFx0XHRcdFx0LnJlZHVjZShmdW5jdGlvbiAobWVtbywgaXRlbSkge1xuXHRcdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV0pXG5cdFx0XHRcdFx0XHRcdChkdXBsaWNhdGVzIGFzIGFueSlba2V5XSA9IHt9O1xuXHRcdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV1baXRlbV0pIHtcblx0XHRcdFx0XHRcdFx0KGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldW2l0ZW1dID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1lbW8uY29uY2F0KFxuXHRcdFx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChrZXkpICtcblx0XHRcdFx0XHRcdFx0XHRcdCc9JyArXG5cdFx0XHRcdFx0XHRcdFx0XHRlbmNvZGVVUklDb21wb25lbnQoaXRlbSksXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWVtbztcblx0XHRcdFx0XHR9LCBbXSlcblx0XHRcdFx0XHQuam9pbignJicpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGFpciA9XG5cdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHIucHVzaChwYWlyKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzaHVmZmxlID0gKGE6IGFueVtdKTogYW55W10gPT4ge1xuXHRsZXQgaiwgeCwgaTtcblxuXHRmb3IgKGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcblx0XHRqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG5cdFx0eCA9IGFbaV07XG5cdFx0YVtpXSA9IGFbal07XG5cdFx0YVtqXSA9IHg7XG5cdH1cblxuXHRyZXR1cm4gYTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7XG5cdGlmIChzdHIuY2hhckF0KDApID09PSAnPycpIHN0ciA9IHN0ci5zdWJzdHJpbmcoMSk7XG5cdGlmICghc3RyLmxlbmd0aCkgcmV0dXJuIHt9O1xuXG5cdGNvbnN0IHBhaXJzID0gc3RyLnNwbGl0KCcmJyksXG5cdFx0cGFyYW1zID0ge307XG5cdGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYWlycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdGNvbnN0IHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHRcdFx0a2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pLFxuXHRcdFx0dmFsdWUgPSBwYWlyLmxlbmd0aCA9PT0gMiA/IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSA6IG51bGw7XG5cdFx0aWYgKChwYXJhbXMgYXMgYW55KVtrZXldICE9IG51bGwpIHtcblx0XHRcdGlmICghaXNBcnJheSgocGFyYW1zIGFzIGFueSlba2V5XSkpIHtcblx0XHRcdFx0KHBhcmFtcyBhcyBhbnkpW2tleV0gPSBbKHBhcmFtcyBhcyBhbnkpW2tleV1dO1xuXHRcdFx0fVxuXHRcdFx0KHBhcmFtcyBhcyBhbnkpW2tleV0ucHVzaCh2YWx1ZSk7XG5cdFx0fSBlbHNlIChwYXJhbXMgYXMgYW55KVtrZXldID0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIHBhcmFtcztcbn07XG5cbmV4cG9ydCBjb25zdCBwcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uIChlOiBFdmVudCkge1xuXHRpZiAoIWUpIHtcblx0XHRpZiAod2luZG93LmV2ZW50KSBlID0gd2luZG93LmV2ZW50O1xuXHRcdGVsc2UgcmV0dXJuO1xuXHR9XG5cblx0aWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcblx0aWYgKGUuY2FuY2VsQnViYmxlICE9IG51bGwpIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0aWYgKGUuc3RvcFByb3BhZ2F0aW9uKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRpZiAod2luZG93LmV2ZW50KSBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cdC8vIGlmIChlLmNhbmNlbCAhPSBudWxsKSBlLmNhbmNlbCA9IHRydWU7XG59O1xuXG5leHBvcnQgY29uc3QgaXNWYWxpZEFnZSA9IChcblx0ZGF5OiBudW1iZXIsXG5cdG1vbnRoOiBudW1iZXIsXG5cdHllYXI6IG51bWJlcixcblx0bWluQWdlOiBudW1iZXIsXG5cdG1heEFnZTogbnVtYmVyLFxuKTogYm9vbGVhbiA9PiB7XG5cdC8vIGRlcGVuZGluZyBvbiB0aGUgeWVhciwgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGhcblx0Y29uc3QgZmVicnVhcnlEYXlzID0geWVhciAlIDQgPT09IDAgPyAyOSA6IDI4LFxuXHRcdGRheXNJbk1vbnRoID0gW1xuXHRcdFx0MzEsXG5cdFx0XHRmZWJydWFyeURheXMsXG5cdFx0XHQzMSxcblx0XHRcdDMwLFxuXHRcdFx0MzEsXG5cdFx0XHQzMCxcblx0XHRcdDMxLFxuXHRcdFx0MzEsXG5cdFx0XHQzMCxcblx0XHRcdDMxLFxuXHRcdFx0MzAsXG5cdFx0XHQzMSxcblx0XHRdO1xuXG5cdC8vIGZpcnN0LCBjaGVjayB0aGUgaW5jb21pbmcgbW9udGggYW5kIHllYXIgYXJlIHZhbGlkLlxuXHRpZiAoIW1vbnRoIHx8ICFkYXkgfHwgIXllYXIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKDEgPiBtb250aCB8fCBtb250aCA+IDEyKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICh5ZWFyIDwgMCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoMSA+IGRheSB8fCBkYXkgPiBkYXlzSW5Nb250aFttb250aCAtIDFdKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gaWYgcmVxdWlyZWQsIHZlcmlmeSB0aGUgY3VycmVudCBkYXRlIGlzIExBVEVSIHRoYW4gdGhlIGluY29taW5nIGRhdGUuXG5cdGlmIChtaW5BZ2UgIT09IHVuZGVmaW5lZCB8fCBtYXhBZ2UgIT09IHVuZGVmaW5lZCkge1xuXHRcdC8vIHdlIGdldCBjdXJyZW50IHllYXJcblx0XHRjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcblx0XHRcdGFnZSA9IGN1cnJlbnRZZWFyIC0geWVhcjtcblxuXHRcdGlmIChhZ2UgPCAwKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGlmIChhZ2UgPCBtaW5BZ2UpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGFnZSA+IG1heEFnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGZpbGVTaXplRm9ybWF0ID0gZnVuY3Rpb24gKFxuXHRzaXplOiBudW1iZXIgLyogaW4gYnl0ZXMgKi8sXG5cdGRlY2ltYWxQb2ludDogc3RyaW5nID0gJy4nLFxuXHR0aG91c2FuZHNTZXA6IHN0cmluZyA9ICcgJyxcbikge1xuXHRjb25zdCB1bml0cyA9IFsnYnl0ZScsICdLYicsICdNYicsICdHYicsICdUYiddLFxuXHRcdGlNYXggPSB1bml0cy5sZW5ndGg7XG5cdGxldCBpID0gMCxcblx0XHRyZXN1bHQgPSAwO1xuXG5cdHNpemUgPSBwYXJzZUZsb2F0KFN0cmluZyhzaXplKSk7XG5cblx0d2hpbGUgKHNpemUgPj0gMSAmJiBpIDwgaU1heCkge1xuXHRcdHJlc3VsdCA9IHNpemU7XG5cdFx0c2l6ZSAvPSAxMDAwOyAvLyBub3QgMTAyNFxuXHRcdGkrKztcblx0fVxuXG5cdGNvbnN0IHBhcnRzID0gU3RyaW5nKHJlc3VsdCkuc3BsaXQoJy4nKSxcblx0XHRoZWFkID1cblx0XHRcdHBhcnNlSW50KHBhcnRzWzBdKSA9PT0gcmVzdWx0XG5cdFx0XHRcdD8gcmVzdWx0XG5cdFx0XHRcdDogbnVtYmVyRm9ybWF0KHJlc3VsdCwgMiwgZGVjaW1hbFBvaW50LCB0aG91c2FuZHNTZXApO1xuXG5cdHJldHVybiBoZWFkICsgJyAnICsgdW5pdHNbaSA9PT0gMCA/IDAgOiBpIC0gMV07XG59O1xuXG4vKipcbiAqIE9wZW5zIHRoZSBwcm92aWRlZCB1cmwgYnkgaW5qZWN0aW5nIGEgaGlkZGVuIGlmcmFtZSB0aGF0IGNhbGxzXG4gKiB3aW5kb3cub3BlbigpLCB0aGVuIHJlbW92ZXMgdGhlIGlmcmFtZSBmcm9tIHRoZSBET00uXG4gKlxuICogUHJldmVudCByZXZlcnNlIHRhYm5hYmJpbmcgcGhpc2hpbmcgYXR0YWNrcyBjYXVzZWQgYnkgX2JsYW5rXG4gKlxuICogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmdpdGh1Yi5pby9yZWwtbm9vcGVuZXIvXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2RhbmllbHN0anVsZXMvYmxhbmtzaGllbGQvYmxvYi82ZTIwOGJmMjVhNDRiZjUwZDFhNWU4NWFlOTZmZWUwYzAxNWQwNWJjL2JsYW5rc2hpZWxkLmpzI0wxNjZcbiAqXG4gKiBAcGFyYW0gdXJsXG4gKiBAcGFyYW0gc3RyV2luZG93TmFtZVxuICogQHBhcmFtIHN0cldpbmRvd0ZlYXR1cmVzXG4gKi9cbmV4cG9ydCBjb25zdCBzYWZlT3BlbiA9IGZ1bmN0aW9uIChcblx0dXJsOiBzdHJpbmcgPSAnJyxcblx0c3RyV2luZG93TmFtZTogc3RyaW5nID0gJycsXG5cdHN0cldpbmRvd0ZlYXR1cmVzOiBzdHJpbmcgPSAnJyxcbikge1xuXHRpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignTVNJRScpICE9PSAtMSkge1xuXHRcdC8vIElFIGJlZm9yZSAxMVxuXHRcdGNvbnN0IGNoaWxkID0gb3Blbi5hcHBseSh3aW5kb3csIFtcblx0XHRcdHVybCxcblx0XHRcdHN0cldpbmRvd05hbWUsXG5cdFx0XHRzdHJXaW5kb3dGZWF0dXJlcyxcblx0XHRdKTtcblx0XHRpZiAoY2hpbGQpIHtcblx0XHRcdGNoaWxkLm9wZW5lciA9IG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiBjaGlsZDtcblx0fVxuXG5cdGxldCBpZnJhbWUsIGlmcmFtZURvYywgc2NyaXB0LCBvcGVuQXJncywgbmV3V2luO1xuXG5cdGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpIGFzIEhUTUxJRnJhbWVFbGVtZW50O1xuXHRpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXHRpZnJhbWVEb2MgPSAoaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fFxuXHRcdChpZnJhbWUuY29udGVudFdpbmRvdyBhcyBhbnkpLmRvY3VtZW50KSBhcyBEb2N1bWVudDtcblxuXHRvcGVuQXJncyA9ICdcIicgKyB1cmwgKyAnXCInO1xuXHRpZiAoc3RyV2luZG93TmFtZSkge1xuXHRcdG9wZW5BcmdzICs9ICcsIFwiJyArIHN0cldpbmRvd05hbWUgKyAnXCInO1xuXHR9XG5cdGlmIChzdHJXaW5kb3dGZWF0dXJlcykge1xuXHRcdG9wZW5BcmdzICs9ICcsIFwiJyArIHN0cldpbmRvd0ZlYXR1cmVzICsgJ1wiJztcblx0fVxuXG5cdHNjcmlwdCA9IGlmcmFtZURvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcblx0c2NyaXB0LnRleHQgPVxuXHRcdCd3aW5kb3cucGFyZW50ID0gbnVsbDsgd2luZG93LnRvcCA9IG51bGw7JyArXG5cdFx0J3dpbmRvdy5mcmFtZUVsZW1lbnQgPSBudWxsOyB2YXIgY2hpbGQgPSB3aW5kb3cub3BlbignICtcblx0XHRvcGVuQXJncyArXG5cdFx0Jyk7JyArXG5cdFx0J2lmIChjaGlsZCkgeyBjaGlsZC5vcGVuZXIgPSBudWxsIH0nO1xuXHRpZnJhbWVEb2MuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHRuZXdXaW4gPSAoaWZyYW1lLmNvbnRlbnRXaW5kb3cgYXMgYW55KS5jaGlsZCBhcyBXaW5kb3c7XG5cblx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xuXHRyZXR1cm4gbmV3V2luO1xufTtcblxuY29uc3QgX2ZuID0gZnVuY3Rpb24gKHR5cGU6ICdlcnJvcicgfCAnd2FybicgfCAnbG9nJyB8ICdpbmZvJyB8ICdkZWJ1ZycpIHtcblx0cmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkge1xuXHRcdGlmICgod2luZG93IGFzIGFueSkuX19vd2ViX3Nob3dfbG9nICE9PSBmYWxzZSkge1xuXHRcdFx0aWYgKGNvbnNvbGVbdHlwZV0pIHtcblx0XHRcdFx0Y29uc29sZVt0eXBlXSguLi5hcmdzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9O1xufTtcblxuZXhwb3J0IGNvbnN0IF9kZWJ1ZyA9IF9mbignZGVidWcnKSxcblx0X2xvZyA9IF9mbignbG9nJyksXG5cdF9pbmZvID0gX2ZuKCdpbmZvJyksXG5cdF93YXJuID0gX2ZuKCd3YXJuJyksXG5cdF9lcnJvciA9IF9mbignZXJyb3InKTtcbiJdfQ==