// ==========TYPE CHECKERS====================================
let _naturalId = 0;
const isArray = Array.isArray;
const naturalId = () => 'id-' + _naturalId++;
const isPlainObject = (a) => Object.prototype.toString.call(a) === '[object Object]';
const isString = (a) => typeof a === 'string';
const isFunction = (a) => typeof a === 'function';
const isEmpty = function (a) {
    if (isArray(a)) {
        return !a.length;
    }
    if (isPlainObject(a)) {
        return !Object.keys(a).length;
    }
    if (typeof a === 'string') {
        return a.trim().length === 0;
    }
    if (typeof a === 'number') {
        return isNaN(a);
    }
    return !a;
};
const isNotEmpty = (a) => !isEmpty(a);
const toArray = (a) => [].concat.apply([], a);
const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
// ==========HELPERS====================================
const callback = function (fn, args, ctx) {
    if (typeof fn === 'function') {
        return fn.apply(ctx, args);
    }
    return null;
};
const forEach = function (obj, fn) {
    Object.keys(obj).forEach((key) => {
        let value = obj[key];
        fn(value, key);
    });
};
const assign = Object.assign ||
    function (target, source) {
        let to = target, from, symbols;
        for (let s = 1; s < arguments.length; s++) {
            from = Object(arguments[s]);
            for (let key in from) {
                if (from.hasOwnProperty(key)) {
                    to[key] = from[key];
                }
            }
            if ('getOwnPropertySymbols' in Object) {
                symbols = Object.getOwnPropertySymbols(from);
                for (let i = 0; i < symbols.length; i++) {
                    if (from.propertyIsEnumerable(symbols[i])) {
                        to[symbols[i]] = from[symbols[i]];
                    }
                }
            }
        }
        return to;
    };
const copy = function (a) {
    return JSON.parse(JSON.stringify(a));
};
const stringKeyReplace = function (str, data) {
    if (isString(str) && str.length && isPlainObject(data)) {
        let keys = Object.keys(data)
            .sort()
            .reverse(), reg;
        if (keys.length) {
            let m = keys.join('|');
            reg = new RegExp(':(' + m + ')', 'g');
            return str.replace(reg, function () {
                let replacement = data[arguments[1]];
                if (replacement === undefined) {
                    return arguments[0];
                }
                return replacement;
            });
        }
    }
    return str;
};
const textToLineString = (text) => {
    let reg = /["'\\\n\r\t\u2028\u2029]/g, to_escapes = {
        '"': '"',
        "'": "'",
        '\\': '\\',
        '\n': 'n',
        '\r': 'r',
        '\t': 't',
        '\u2028': '2028',
        '\u2029': '2029',
    };
    return text.replace(reg, match => '\\' + to_escapes[match]);
};
const expose = function (items, ctx) {
    let out = {};
    items.forEach(function (key) {
        let item = ctx[key];
        // methods and properties
        if (isFunction(item)) {
            out[key] = function () {
                let res = item.apply(ctx, arguments);
                return res === ctx ? out : res;
            };
        }
        else {
            out[key] = item;
        }
    });
    return out;
};
const getFrom = function (from, key) {
    let { [key]: value } = from || {};
    return value;
};
// ==========MATH====================================
const _setDigitsSep = function (x, sep) {
    let s = String(x), count = 0, ans = [], j = s.indexOf('.'), start = j !== -1 ? j : s.length, end = j !== -1 ? s.slice(start + 1) : [], i = start;
    for (; i >= 0; i--) {
        if (count === 3) {
            count = 0;
            ans[i] = i !== 0 ? sep + s[i] : s[i];
        }
        else {
            ans[i] = s[i];
        }
        count++;
    }
    return ans.concat(end).join('');
};
const math = {
    numberFormat: function (x, dec = 2, decimalSep = '.', digitsSep = ' ') {
        if (!x) {
            return '';
        }
        let ans = parseFloat(String(x)), decimalPos;
        if (dec >= 0) {
            let decimalPow = Math.pow(10, dec);
            ans = Math.floor(ans * decimalPow) / decimalPow;
        }
        let n = _setDigitsSep(ans, digitsSep);
        let a = n.split('');
        decimalPos = a.lastIndexOf('.');
        if (decimalPos >= 0 && decimalSep !== '.') {
            a[decimalPos] = decimalSep;
        }
        return a.join('');
    },
    gt: function (x, y, eq = false) {
        return eq ? x >= y : x > y;
    },
    lt: function (x, y, eq = false) {
        return eq ? x <= y : x < y;
    },
    between: function (x, a, b, eq = false) {
        return eq ? x >= a && x <= b : x > a && x < b;
    },
    isRange: function (a, b) {
        return typeof a === 'number' && typeof b === 'number' && a < b;
    },
};
const isInDOM = function (element, inBody = false) {
    let _ = element, last;
    while (_) {
        last = _;
        if (inBody && last === document.body) {
            break;
        }
        _ = _.parentNode;
    }
    return inBody ? last === document.body : last === document;
};
const buildQueryString = function (object, prefix) {
    const duplicates = {}, str = [];
    for (let prop in object) {
        if (!Object.prototype.hasOwnProperty.call(object, prop)) {
            continue;
        }
        let key = prefix ? prefix + '[' + prop + ']' : prop, value = object[prop], pair;
        if (value !== undefined) {
            if (value === null) {
                pair = encodeURIComponent(key);
            }
            else if (Utils.isPlainObject(value)) {
                pair = buildQueryString(value, key);
            }
            else if (Utils.isArray(value)) {
                pair = value
                    .reduce(function (memo, item) {
                    if (!duplicates[key])
                        duplicates[key] = {};
                    if (!duplicates[key][item]) {
                        duplicates[key][item] = true;
                        return memo.concat(encodeURIComponent(key) +
                            '=' +
                            encodeURIComponent(item));
                    }
                    return memo;
                }, [])
                    .join('&');
            }
            else {
                pair =
                    encodeURIComponent(key) + '=' + encodeURIComponent(value);
            }
            str.push(pair);
        }
    }
    return str.join('&');
};
const shuffle = (a) => {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
};
const parseQueryString = function (str) {
    if (str.charAt(0) === '?')
        str = str.substring(1);
    if (!str.length)
        return {};
    const pairs = str.split('&'), params = {};
    for (let i = 0, len = pairs.length; i < len; i++) {
        let pair = pairs[i].split('='), key = decodeURIComponent(pair[0]), value = pair.length == 2 ? decodeURIComponent(pair[1]) : null;
        if (params[key] != null) {
            if (!Utils.isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(value);
        }
        else
            params[key] = value;
    }
    return params;
};
const preventDefault = function (e) {
    if (!e) {
        if (window.event)
            e = window.event;
        else
            return;
    }
    if (e.preventDefault)
        e.preventDefault();
    if (e.cancelBubble != null)
        e.cancelBubble = true;
    if (e.stopPropagation)
        e.stopPropagation();
    if (window.event)
        e.returnValue = false;
    // if (e.cancel != null) e.cancel = true;
}, eventCancel = function (e) {
    console.warn('"Utils.eventCancel" is deprecated, use "Utils.preventDefault" instead');
    preventDefault(e);
};
const isValidAge = (day, month, year, minAge, maxAge) => {
    // depending on the year, calculate the number of days in the month
    let daysInMonth, februaryDays = year % 4 === 0 ? 29 : 28;
    daysInMonth = [31, februaryDays, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    // first, check the incoming month and year are valid.
    if (!month || !day || !year) {
        return false;
    }
    if (1 > month || month > 12) {
        return false;
    }
    if (year < 0) {
        return false;
    }
    if (1 > day || day > daysInMonth[month - 1]) {
        return false;
    }
    // if required, verify the current date is LATER than the incoming date.
    if (minAge !== undefined || maxAge !== undefined) {
        // we get current year
        let currentYear = new Date().getFullYear(), age = currentYear - year;
        if (age < 0) {
            return false;
        }
        if (age < minAge) {
            return false;
        }
        if (age > maxAge) {
            return false;
        }
    }
    return true;
};
const fileSizeFormat = function (size /* in bytes */, decimalPoint = '.', thousandsSep = ' ') {
    let units = ['byte', 'Kb', 'Mb', 'Gb', 'Tb'], i_max = units.length, i = 0, result = 0;
    size = parseFloat(String(size));
    while (size >= 1 && i < i_max) {
        result = size;
        size /= 1000; // not 1024
        i++;
    }
    let parts = String(result).split('.'), head = parseInt(parts[0]) === result
        ? result
        : Utils.math.numberFormat(result, 2, decimalPoint, thousandsSep);
    return head + ' ' + units[i == 0 ? 0 : i - 1];
};
/**
 * Opens the provided url by injecting a hidden iframe that calls
 * window.open(), then removes the iframe from the DOM.
 *
 * Prevent reverse tabnabbing phishing attacks caused by _blank
 *
 * https://mathiasbynens.github.io/rel-noopener/
 *
 * https://github.com/danielstjules/blankshield/blob/6e208bf25a44bf50d1a5e85ae96fee0c015d05bc/blankshield.js#L166
 *
 * @param url
 * @param strWindowName
 * @param strWindowFeatures
 */
const safeOpen = function (url = '', strWindowName = '', strWindowFeatures = '') {
    if (window.navigator.userAgent.indexOf('MSIE') !== -1) {
        // IE before 11
        let child = open.apply(window, [url, strWindowName, strWindowFeatures]);
        if (child) {
            child.opener = null;
        }
        return child;
    }
    let iframe, iframeDoc, script, openArgs, newWin;
    iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    iframeDoc = (iframe.contentDocument ||
        iframe.contentWindow.document);
    openArgs = '"' + url + '"';
    if (strWindowName) {
        openArgs += ', "' + strWindowName + '"';
    }
    if (strWindowFeatures) {
        openArgs += ', "' + strWindowFeatures + '"';
    }
    script = iframeDoc.createElement('script');
    script.type = 'text/javascript';
    script.text =
        'window.parent = null; window.top = null;' +
            'window.frameElement = null; var child = window.open(' +
            openArgs +
            ');' +
            'if (child) { child.opener = null }';
    iframeDoc.body.appendChild(script);
    newWin = iframe.contentWindow.child;
    document.body.removeChild(iframe);
    return newWin;
};
const Utils = {
    isPlainObject,
    isString,
    isArray,
    isFunction,
    isEmpty,
    isNotEmpty,
    toArray,
    isInDOM,
    shuffle,
    escapeRegExp,
    id: naturalId,
    // ============
    callback,
    assign,
    copy,
    expose,
    getFrom,
    stringKeyReplace,
    textToLineString,
    forEach,
    // ============
    math,
    isValidAge,
    // ============
    buildQueryString,
    parseQueryString,
    // ============
    eventCancel,
    preventDefault,
    // ============
    fileSizeFormat,
    // ============
    safeOpen,
};
export default Utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsOERBQThEO0FBQzlELElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztBQUNuQixNQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQzlCLE1BQU0sU0FBUyxHQUFHLEdBQVcsRUFBRSxDQUFDLEtBQUssR0FBRyxVQUFVLEVBQUUsQ0FBQztBQUNyRCxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQU0sRUFBVyxFQUFFLENBQ3pDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxpQkFBaUIsQ0FBQztBQUN6RCxNQUFNLFFBQVEsR0FBRyxDQUFDLENBQU0sRUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQ2hFLE1BQU0sVUFBVSxHQUFHLENBQUMsQ0FBTSxFQUFpQixFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssVUFBVSxDQUFDO0FBQ3RFLE1BQU0sT0FBTyxHQUFHLFVBQVMsQ0FBTTtJQUM5QixJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQ2pCO0lBQ0QsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzlCO0lBRUQsSUFBSSxPQUFPLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDMUIsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztLQUM3QjtJQUVELElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQzFCLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hCO0lBRUQs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SUFBSSxHQUFHLGlCQUFpQixDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxJQUFJO1FBQ1YsMENBQTBDO1lBQzFDLHNEQUFzRDtZQUN0RCxRQUFRO1lBQ1IsSUFBSTtZQUNKLG9DQUFvQyxDQUFDO0lBQ3RDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLE1BQU0sR0FBSSxNQUFNLENBQUMsYUFBcUIsQ0FBQyxLQUFlLENBQUM7SUFFdkQsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEMsT0FBTyxNQUFNLENBQUM7QUFDZixDQUFDLENBQUM7QUFFRixNQUFNLEtBQUssR0FBRztJQUNiLGFBQWE7SUFDYixRQUFRO0lBQ1IsT0FBTztJQUNQLFVBQVU7SUFDVixPQUFPO0lBQ1AsVUFBVTtJQUNWLE9BQU87SUFDUCxPQUFPO0lBQ1AsT0FBTztJQUNQLFlBQVk7SUFDWixFQUFFLEVBQUUsU0FBUztJQUNiLGVBQWU7SUFDZixRQUFRO0lBQ1IsTUFBTTtJQUNOLElBQUk7SUFDSixNQUFNO0lBQ04sT0FBTztJQUNQLGdCQUFnQjtJQUNoQixnQkFBZ0I7SUFDaEIsT0FBTztJQUNQLGVBQWU7SUFDZixJQUFJO0lBQ0osVUFBVTtJQUNWLGVBQWU7SUFDZixnQkFBZ0I7SUFDaEIsZ0JBQWdCO0lBQ2hCLGVBQWU7SUFDZixXQUFXO0lBQ1gsY0FBYztJQUNkLGVBQWU7SUFDZixjQUFjO0lBQ2QsZUFBZTtJQUNmLFFBQVE7Q0FDUixDQUFDO0FBRUYsZUFBZSxLQUFLLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09VFlQRSBDSEVDS0VSUz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxubGV0IF9uYXR1cmFsSWQgPSAwO1xuY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5jb25zdCBuYXR1cmFsSWQgPSAoKTogc3RyaW5nID0+ICdpZC0nICsgX25hdHVyYWxJZCsrO1xuY29uc3QgaXNQbGFpbk9iamVjdCA9IChhOiBhbnkpOiBib29sZWFuID0+XG5cdE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5jb25zdCBpc1N0cmluZyA9IChhOiBhbnkpOiBhIGlzIHN0cmluZyA9PiB0eXBlb2YgYSA9PT0gJ3N0cmluZyc7XG5jb25zdCBpc0Z1bmN0aW9uID0gKGE6IGFueSk6IGEgaXMgRnVuY3Rpb24gPT4gdHlwZW9mIGEgPT09ICdmdW5jdGlvbic7XG5jb25zdCBpc0VtcHR5ID0gZnVuY3Rpb24oYTogYW55KTogYm9vbGVhbiB7XG5cdGlmIChpc0FycmF5KGEpKSB7XG5cdFx0cmV0dXJuICFhLmxlbmd0aDtcblx0fVxuXHRpZiAoaXNQbGFpbk9iamVjdChhKSkge1xuXHRcdHJldHVybiAhT2JqZWN0LmtleXMoYSkubGVuZ3RoO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBhID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBhLnRyaW0oKS5sZW5ndGggPT09IDA7XG5cdH1cblxuXHRpZiAodHlwZW9mIGEgPT09ICdudW1iZXInKSB7XG5cdFx0cmV0dXJuIGlzTmFOKGEpO1xuXHR9XG5cblx0cmV0dXJuICFhO1xufTtcblxuY29uc3QgaXNOb3RFbXB0eSA9IChhOiBhbnkpOiBib29sZWFuID0+ICFpc0VtcHR5KGEpO1xuY29uc3QgdG9BcnJheSA9IChhOiBhbnkpOiBBcnJheTxhbnk+ID0+IFtdLmNvbmNhdC5hcHBseShbXSwgYSk7XG5jb25zdCBlc2NhcGVSZWdFeHAgPSAoc3RyOiBzdHJpbmcpID0+XG5cdHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xuLy8gPT09PT09PT09PUhFTFBFUlM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24oZm46IGFueSwgYXJncz86IEFycmF5PGFueT4sIGN0eD86IGFueSk6IGFueSB7XG5cdGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gZm4uYXBwbHkoY3R4LCBhcmdzKTtcblx0fVxuXG5cdHJldHVybiBudWxsO1xufTtcblxuY29uc3QgZm9yRWFjaCA9IGZ1bmN0aW9uPFQ+KFxuXHRvYmo6IHsgW2tleTogc3RyaW5nXTogVCB9IHwgQXJyYXk8VD4sXG5cdGZuOiAodmFsdWU6IFQsIGtleTogYW55KSA9PiB2b2lkXG4pIHtcblx0T2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXk6IHN0cmluZykgPT4ge1xuXHRcdGxldCB2YWx1ZTogVCA9IChvYmogYXMgYW55KVtrZXldO1xuXHRcdGZuKHZhbHVlLCBrZXkpO1xuXHR9KTtcbn07XG5cbmNvbnN0IGFzc2lnbiA9XG5cdChPYmplY3QgYXMgYW55KS5hc3NpZ24gfHxcblx0ZnVuY3Rpb24odGFyZ2V0OiBvYmplY3QsIHNvdXJjZTogb2JqZWN0KSB7XG5cdFx0bGV0IHRvID0gdGFyZ2V0LFxuXHRcdFx0ZnJvbSxcblx0XHRcdHN5bWJvbHM7XG5cblx0XHRmb3IgKGxldCBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0XHRmb3IgKGxldCBrZXkgaW4gZnJvbSkge1xuXHRcdFx0XHRpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0KHRvIGFzIGFueSlba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoJ2dldE93blByb3BlcnR5U3ltYm9scycgaW4gT2JqZWN0KSB7XG5cdFx0XHRcdHN5bWJvbHMgPSAoT2JqZWN0IGFzIGFueSkuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGZyb20pO1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHN5bWJvbHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoZnJvbS5wcm9wZXJ0eUlzRW51bWVyYWJsZShzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdFx0KHRvIGFzIGFueSlbc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0bztcblx0fTtcblxuY29uc3QgY29weSA9IGZ1bmN0aW9uPFQ+KGE6IFQpOiBUIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYSkpO1xufTtcblxuY29uc3Qgc3RyaW5nS2V5UmVwbGFjZSA9IGZ1bmN0aW9uKHN0cjogc3RyaW5nLCBkYXRhOiBvYmplY3QpOiBzdHJpbmcge1xuXHRpZiAoaXNTdHJpbmcoc3RyKSAmJiBzdHIubGVuZ3RoICYmIGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0XHRsZXQga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpXG5cdFx0XHRcdC5zb3J0KClcblx0XHRcdFx0LnJldmVyc2UoKSxcblx0XHRcdHJlZztcblxuXHRcdGlmIChrZXlzLmxlbmd0aCkge1xuXHRcdFx0bGV0IG0gPSBrZXlzLmpvaW4oJ3wnKTtcblx0XHRcdHJlZyA9IG5ldyBSZWdFeHAoJzooJyArIG0gKyAnKScsICdnJyk7XG5cblx0XHRcdHJldHVybiBzdHIucmVwbGFjZShyZWcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsZXQgcmVwbGFjZW1lbnQgPSAoZGF0YSBhcyBhbnkpW2FyZ3VtZW50c1sxXV07XG5cblx0XHRcdFx0aWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXJndW1lbnRzWzBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHJlcGxhY2VtZW50O1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0cjtcbn07XG5cbmNvbnN0IHRleHRUb0xpbmVTdHJpbmcgPSAodGV4dDogc3RyaW5nKTogc3RyaW5nID0+IHtcblx0bGV0IHJlZyA9IC9bXCInXFxcXFxcblxcclxcdFxcdTIwMjhcXHUyMDI5XS9nLFxuXHRcdHRvX2VzY2FwZXM6IG9iamVjdCA9IHtcblx0XHRcdCdcIic6ICdcIicsXG5cdFx0XHRcIidcIjogXCInXCIsXG5cdFx0XHQnXFxcXCc6ICdcXFxcJyxcblx0XHRcdCdcXG4nOiAnbicsXG5cdFx0XHQnXFxyJzogJ3InLFxuXHRcdFx0J1xcdCc6ICd0Jyxcblx0XHRcdCdcXHUyMDI4JzogJzIwMjgnLFxuXHRcdFx0J1xcdTIwMjknOiAnMjAyOScsXG5cdFx0fTtcblxuXHRyZXR1cm4gdGV4dC5yZXBsYWNlKHJlZywgbWF0Y2ggPT4gJ1xcXFwnICsgKHRvX2VzY2FwZXMgYXMgYW55KVttYXRjaF0pO1xufTtcblxuY29uc3QgZXhwb3NlID0gZnVuY3Rpb24oaXRlbXM6IEFycmF5PHN0cmluZz4sIGN0eDogYW55KTogb2JqZWN0IHtcblx0bGV0IG91dDogb2JqZWN0ID0ge307XG5cdGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG5cdFx0bGV0IGl0ZW0gPSBjdHhba2V5XTtcblx0XHQvLyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzXG5cdFx0aWYgKGlzRnVuY3Rpb24oaXRlbSkpIHtcblx0XHRcdChvdXQgYXMgYW55KVtrZXldID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxldCByZXMgPSBpdGVtLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcblxuXHRcdFx0XHRyZXR1cm4gcmVzID09PSBjdHggPyBvdXQgOiByZXM7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQob3V0IGFzIGFueSlba2V5XSA9IGl0ZW07XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gb3V0O1xufTtcblxuY29uc3QgZ2V0RnJvbSA9IGZ1bmN0aW9uKGZyb206IG9iamVjdCwga2V5OiBzdHJpbmcpOiBhbnkge1xuXHRsZXQgeyBba2V5XTogdmFsdWUgfTogYW55ID0gZnJvbSB8fCB7fTtcblxuXHRyZXR1cm4gdmFsdWU7XG59O1xuXG4vLyA9PT09PT09PT09TUFUSD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBfc2V0RGlnaXRzU2VwID0gZnVuY3Rpb24oeDogbnVtYmVyLCBzZXA6IHN0cmluZyk6IHN0cmluZyB7XG5cdGxldCBzID0gU3RyaW5nKHgpLFxuXHRcdGNvdW50ID0gMCxcblx0XHRhbnMgPSBbXSxcblx0XHRqID0gcy5pbmRleE9mKCcuJyksXG5cdFx0c3RhcnQgPSBqICE9PSAtMSA/IGogOiBzLmxlbmd0aCxcblx0XHRlbmQgPSBqICE9PSAtMSA/IHMuc2xpY2Uoc3RhcnQgKyAxKSA6IFtdLFxuXHRcdGkgPSBzdGFydDtcblxuXHRmb3IgKDsgaSA+PSAwOyBpLS0pIHtcblx0XHRpZiAoY291bnQgPT09IDMpIHtcblx0XHRcdGNvdW50ID0gMDtcblx0XHRcdGFuc1tpXSA9IGkgIT09IDAgPyBzZXAgKyBzW2ldIDogc1tpXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5zW2ldID0gc1tpXTtcblx0XHR9XG5cdFx0Y291bnQrKztcblx0fVxuXG5cdHJldHVybiBhbnMuY29uY2F0KGVuZCkuam9pbignJyk7XG59O1xuXG5jb25zdCBtYXRoID0ge1xuXHRudW1iZXJGb3JtYXQ6IGZ1bmN0aW9uKFxuXHRcdHg6IG51bWJlciB8IHN0cmluZyxcblx0XHRkZWM6IG51bWJlciA9IDIsXG5cdFx0ZGVjaW1hbFNlcDogc3RyaW5nID0gJy4nLFxuXHRcdGRpZ2l0c1NlcDogc3RyaW5nID0gJyAnXG5cdCk6IHN0cmluZyB7XG5cdFx0aWYgKCF4KSB7XG5cdFx0XHRyZXR1cm4gJyc7XG5cdFx0fVxuXG5cdFx0bGV0IGFucyA9IHBhcnNlRmxvYXQoU3RyaW5nKHgpKSxcblx0XHRcdGRlY2ltYWxQb3M7XG5cblx0XHRpZiAoZGVjID49IDApIHtcblx0XHRcdGxldCBkZWNpbWFsUG93ID0gTWF0aC5wb3coMTAsIGRlYyk7XG5cdFx0XHRhbnMgPSBNYXRoLmZsb29yKGFucyAqIGRlY2ltYWxQb3cpIC8gZGVjaW1hbFBvdztcblx0XHR9XG5cblx0XHRsZXQgbiA9IF9zZXREaWdpdHNTZXAoYW5zLCBkaWdpdHNTZXApO1xuXHRcdGxldCBhID0gbi5zcGxpdCgnJyk7XG5cblx0XHRkZWNpbWFsUG9zID0gYS5sYXN0SW5kZXhPZignLicpO1xuXHRcdGlmIChkZWNpbWFsUG9zID49IDAgJiYgZGVjaW1hbFNlcCAhPT0gJy4nKSB7XG5cdFx0XHRhW2RlY2ltYWxQb3NdID0gZGVjaW1hbFNlcDtcblx0XHR9XG5cblx0XHRyZXR1cm4gYS5qb2luKCcnKTtcblx0fSxcblx0Z3Q6IGZ1bmN0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyLCBlcTogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGVxID8geCA+PSB5IDogeCA+IHk7XG5cdH0sXG5cdGx0OiBmdW5jdGlvbih4OiBudW1iZXIsIHk6IG51bWJlciwgZXE6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBlcSA/IHggPD0geSA6IHggPCB5O1xuXHR9LFxuXHRiZXR3ZWVuOiBmdW5jdGlvbihcblx0XHR4OiBudW1iZXIsXG5cdFx0YTogbnVtYmVyLFxuXHRcdGI6IG51bWJlcixcblx0XHRlcTogYm9vbGVhbiA9IGZhbHNlXG5cdCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBlcSA/IHggPj0gYSAmJiB4IDw9IGIgOiB4ID4gYSAmJiB4IDwgYjtcblx0fSxcblx0aXNSYW5nZTogZnVuY3Rpb24oYTogbnVtYmVyLCBiOiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHlwZW9mIGEgPT09ICdudW1iZXInICYmIHR5cGVvZiBiID09PSAnbnVtYmVyJyAmJiBhIDwgYjtcblx0fSxcbn07XG5cbmNvbnN0IGlzSW5ET00gPSBmdW5jdGlvbihlbGVtZW50OiBhbnksIGluQm9keTogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG5cdGxldCBfID0gZWxlbWVudCxcblx0XHRsYXN0O1xuXG5cdHdoaWxlIChfKSB7XG5cdFx0bGFzdCA9IF87XG5cdFx0aWYgKGluQm9keSAmJiBsYXN0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0XyA9IF8ucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBpbkJvZHkgPyBsYXN0ID09PSBkb2N1bWVudC5ib2R5IDogbGFzdCA9PT0gZG9jdW1lbnQ7XG59O1xuXG5jb25zdCBidWlsZFF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24ob2JqZWN0OiBvYmplY3QsIHByZWZpeDogc3RyaW5nKTogc3RyaW5nIHtcblx0Y29uc3QgZHVwbGljYXRlcyA9IHt9LFxuXHRcdHN0ciA9IFtdO1xuXG5cdGZvciAobGV0IHByb3AgaW4gb2JqZWN0KSB7XG5cdFx0aWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wKSkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0bGV0IGtleSA9IHByZWZpeCA/IHByZWZpeCArICdbJyArIHByb3AgKyAnXScgOiBwcm9wLFxuXHRcdFx0dmFsdWUgPSAob2JqZWN0IGFzIGFueSlbcHJvcF0sXG5cdFx0XHRwYWlyO1xuXHRcdGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpZiAodmFsdWUgPT09IG51bGwpIHtcblx0XHRcdFx0cGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuXHRcdFx0fSBlbHNlIGlmIChVdGlscy5pc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHRcdFx0XHRwYWlyID0gYnVpbGRRdWVyeVN0cmluZyh2YWx1ZSwga2V5KTtcblx0XHRcdH0gZWxzZSBpZiAoVXRpbHMuaXNBcnJheSh2YWx1ZSkpIHtcblx0XHRcdFx0cGFpciA9IHZhbHVlXG5cdFx0XHRcdFx0LnJlZHVjZShmdW5jdGlvbihtZW1vLCBpdGVtKSB7XG5cdFx0XHRcdFx0XHRpZiAoIShkdXBsaWNhdGVzIGFzIGFueSlba2V5XSlcblx0XHRcdFx0XHRcdFx0KGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldID0ge307XG5cdFx0XHRcdFx0XHRpZiAoIShkdXBsaWNhdGVzIGFzIGFueSlba2V5XVtpdGVtXSkge1xuXHRcdFx0XHRcdFx0XHQoZHVwbGljYXRlcyBhcyBhbnkpW2tleV1baXRlbV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbWVtby5jb25jYXQoXG5cdFx0XHRcdFx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgK1xuXHRcdFx0XHRcdFx0XHRcdFx0Jz0nICtcblx0XHRcdFx0XHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChpdGVtKVxuXHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0XHRcdFx0fSwgW10pXG5cdFx0XHRcdFx0LmpvaW4oJyYnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhaXIgPVxuXHRcdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0c3RyLnB1c2gocGFpcik7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0ci5qb2luKCcmJyk7XG59O1xuXG5jb25zdCBzaHVmZmxlID0gKGE6IEFycmF5PGFueT4pOiBBcnJheTxhbnk+ID0+IHtcblx0bGV0IGosIHgsIGk7XG5cblx0Zm9yIChpID0gYS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG5cdFx0aiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuXHRcdHggPSBhW2ldO1xuXHRcdGFbaV0gPSBhW2pdO1xuXHRcdGFbal0gPSB4O1xuXHR9XG5cblx0cmV0dXJuIGE7XG59O1xuXG5jb25zdCBwYXJzZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24oc3RyOiBzdHJpbmcpIHtcblx0aWYgKHN0ci5jaGFyQXQoMCkgPT09ICc/Jykgc3RyID0gc3RyLnN1YnN0cmluZygxKTtcblx0aWYgKCFzdHIubGVuZ3RoKSByZXR1cm4ge307XG5cblx0Y29uc3QgcGFpcnMgPSBzdHIuc3BsaXQoJyYnKSxcblx0XHRwYXJhbXMgPSB7fTtcblx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHBhaXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0bGV0IHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHRcdFx0a2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pLFxuXHRcdFx0dmFsdWUgPSBwYWlyLmxlbmd0aCA9PSAyID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pIDogbnVsbDtcblx0XHRpZiAoKHBhcmFtcyBhcyBhbnkpW2tleV0gIT0gbnVsbCkge1xuXHRcdFx0aWYgKCFVdGlscy5pc0FycmF5KChwYXJhbXMgYXMgYW55KVtrZXldKSkge1xuXHRcdFx0XHQocGFyYW1zIGFzIGFueSlba2V5XSA9IFsocGFyYW1zIGFzIGFueSlba2V5XV07XG5cdFx0XHR9XG5cdFx0XHQocGFyYW1zIGFzIGFueSlba2V5XS5wdXNoKHZhbHVlKTtcblx0XHR9IGVsc2UgKHBhcmFtcyBhcyBhbnkpW2tleV0gPSB2YWx1ZTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufTtcblxuY29uc3QgcHJldmVudERlZmF1bHQgPSBmdW5jdGlvbihlOiBFdmVudCkge1xuXHRcdGlmICghZSkge1xuXHRcdFx0aWYgKHdpbmRvdy5ldmVudCkgZSA9IHdpbmRvdy5ldmVudDtcblx0XHRcdGVsc2UgcmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0aWYgKGUuY2FuY2VsQnViYmxlICE9IG51bGwpIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcblx0XHRpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0aWYgKHdpbmRvdy5ldmVudCkgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuXHRcdC8vIGlmIChlLmNhbmNlbCAhPSBudWxsKSBlLmNhbmNlbCA9IHRydWU7XG5cdH0sXG5cdGV2ZW50Q2FuY2VsID0gZnVuY3Rpb24oZTogRXZlbnQpIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHQnXCJVdGlscy5ldmVudENhbmNlbFwiIGlzIGRlcHJlY2F0ZWQsIHVzZSBcIlV0aWxzLnByZXZlbnREZWZhdWx0XCIgaW5zdGVhZCdcblx0XHQpO1xuXG5cdFx0cHJldmVudERlZmF1bHQoZSk7XG5cdH07XG5cbmNvbnN0IGlzVmFsaWRBZ2UgPSAoXG5cdGRheTogbnVtYmVyLFxuXHRtb250aDogbnVtYmVyLFxuXHR5ZWFyOiBudW1iZXIsXG5cdG1pbkFnZTogbnVtYmVyLFxuXHRtYXhBZ2U6IG51bWJlclxuKTogYm9vbGVhbiA9PiB7XG5cdC8vIGRlcGVuZGluZyBvbiB0aGUgeWVhciwgY2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGhcblx0bGV0IGRheXNJbk1vbnRoLFxuXHRcdGZlYnJ1YXJ5RGF5cyA9IHllYXIgJSA0ID09PSAwID8gMjkgOiAyODtcblxuXHRkYXlzSW5Nb250aCA9IFszMSwgZmVicnVhcnlEYXlzLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5cblx0Ly8gZmlyc3QsIGNoZWNrIHRoZSBpbmNvbWluZyBtb250aCBhbmQgeWVhciBhcmUgdmFsaWQuXG5cdGlmICghbW9udGggfHwgIWRheSB8fCAheWVhcikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoMSA+IG1vbnRoIHx8IG1vbnRoID4gMTIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKHllYXIgPCAwKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICgxID4gZGF5IHx8IGRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0pIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBpZiByZXF1aXJlZCwgdmVyaWZ5IHRoZSBjdXJyZW50IGRhdGUgaXMgTEFURVIgdGhhbiB0aGUgaW5jb21pbmcgZGF0ZS5cblx0aWYgKG1pbkFnZSAhPT0gdW5kZWZpbmVkIHx8IG1heEFnZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gd2UgZ2V0IGN1cnJlbnQgeWVhclxuXHRcdGxldCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcblx0XHRcdGFnZSA9IGN1cnJlbnRZZWFyIC0geWVhcjtcblxuXHRcdGlmIChhZ2UgPCAwKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGlmIChhZ2UgPCBtaW5BZ2UpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGFnZSA+IG1heEFnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufTtcblxuY29uc3QgZmlsZVNpemVGb3JtYXQgPSBmdW5jdGlvbihcblx0c2l6ZTogbnVtYmVyIC8qIGluIGJ5dGVzICovLFxuXHRkZWNpbWFsUG9pbnQ6IHN0cmluZyA9ICcuJyxcblx0dGhvdXNhbmRzU2VwOiBzdHJpbmcgPSAnICdcbikge1xuXHRsZXQgdW5pdHMgPSBbJ2J5dGUnLCAnS2InLCAnTWInLCAnR2InLCAnVGInXSxcblx0XHRpX21heCA9IHVuaXRzLmxlbmd0aCxcblx0XHRpID0gMCxcblx0XHRyZXN1bHQgPSAwO1xuXG5cdHNpemUgPSBwYXJzZUZsb2F0KFN0cmluZyhzaXplKSk7XG5cblx0d2hpbGUgKHNpemUgPj0gMSAmJiBpIDwgaV9tYXgpIHtcblx0XHRyZXN1bHQgPSBzaXplO1xuXHRcdHNpemUgLz0gMTAwMDsgLy8gbm90IDEwMjRcblx0XHRpKys7XG5cdH1cblxuXHRsZXQgcGFydHMgPSBTdHJpbmcocmVzdWx0KS5zcGxpdCgnLicpLFxuXHRcdGhlYWQgPVxuXHRcdFx0cGFyc2VJbnQocGFydHNbMF0pID09PSByZXN1bHRcblx0XHRcdFx0PyByZXN1bHRcblx0XHRcdFx0OiBVdGlscy5tYXRoLm51bWJlckZvcm1hdChcblx0XHRcdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0XHRcdDIsXG5cdFx0XHRcdFx0XHRkZWNpbWFsUG9pbnQsXG5cdFx0XHRcdFx0XHR0aG91c2FuZHNTZXBcblx0XHRcdFx0ICApO1xuXG5cdHJldHVybiBoZWFkICsgJyAnICsgdW5pdHNbaSA9PSAwID8gMCA6IGkgLSAxXTtcbn07XG5cbi8qKlxuICogT3BlbnMgdGhlIHByb3ZpZGVkIHVybCBieSBpbmplY3RpbmcgYSBoaWRkZW4gaWZyYW1lIHRoYXQgY2FsbHNcbiAqIHdpbmRvdy5vcGVuKCksIHRoZW4gcmVtb3ZlcyB0aGUgaWZyYW1lIGZyb20gdGhlIERPTS5cbiAqXG4gKiBQcmV2ZW50IHJldmVyc2UgdGFibmFiYmluZyBwaGlzaGluZyBhdHRhY2tzIGNhdXNlZCBieSBfYmxhbmtcbiAqXG4gKiBodHRwczovL21hdGhpYXNieW5lbnMuZ2l0aHViLmlvL3JlbC1ub29wZW5lci9cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFuaWVsc3RqdWxlcy9ibGFua3NoaWVsZC9ibG9iLzZlMjA4YmYyNWE0NGJmNTBkMWE1ZTg1YWU5NmZlZTBjMDE1ZDA1YmMvYmxhbmtzaGllbGQuanMjTDE2NlxuICpcbiAqIEBwYXJhbSB1cmxcbiAqIEBwYXJhbSBzdHJXaW5kb3dOYW1lXG4gKiBAcGFyYW0gc3RyV2luZG93RmVhdHVyZXNcbiAqL1xuY29uc3Qgc2FmZU9wZW4gPSBmdW5jdGlvbihcblx0dXJsOiBzdHJpbmcgPSAnJyxcblx0c3RyV2luZG93TmFtZTogc3RyaW5nID0gJycsXG5cdHN0cldpbmRvd0ZlYXR1cmVzOiBzdHJpbmcgPSAnJ1xuKSB7XG5cdGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdNU0lFJykgIT09IC0xKSB7XG5cdFx0Ly8gSUUgYmVmb3JlIDExXG5cdFx0bGV0IGNoaWxkID0gb3Blbi5hcHBseSh3aW5kb3csIFt1cmwsIHN0cldpbmRvd05hbWUsIHN0cldpbmRvd0ZlYXR1cmVzXSk7XG5cdFx0aWYgKGNoaWxkKSB7XG5cdFx0XHRjaGlsZC5vcGVuZXIgPSBudWxsO1xuXHRcdH1cblx0XHRyZXR1cm4gY2hpbGQ7XG5cdH1cblxuXHRsZXQgaWZyYW1lLCBpZnJhbWVEb2MsIHNjcmlwdCwgb3BlbkFyZ3MsIG5ld1dpbjtcblxuXHRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKSBhcyBIVE1MSUZyYW1lRWxlbWVudDtcblx0aWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblx0aWZyYW1lRG9jID0gKGlmcmFtZS5jb250ZW50RG9jdW1lbnQgfHxcblx0XHQoaWZyYW1lLmNvbnRlbnRXaW5kb3cgYXMgYW55KS5kb2N1bWVudCkgYXMgRG9jdW1lbnQ7XG5cblx0b3BlbkFyZ3MgPSAnXCInICsgdXJsICsgJ1wiJztcblx0aWYgKHN0cldpbmRvd05hbWUpIHtcblx0XHRvcGVuQXJncyArPSAnLCBcIicgKyBzdHJXaW5kb3dOYW1lICsgJ1wiJztcblx0fVxuXHRpZiAoc3RyV2luZG93RmVhdHVyZXMpIHtcblx0XHRvcGVuQXJncyArPSAnLCBcIicgKyBzdHJXaW5kb3dGZWF0dXJlcyArICdcIic7XG5cdH1cblxuXHRzY3JpcHQgPSBpZnJhbWVEb2MuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG5cdHNjcmlwdC50ZXh0ID1cblx0XHQnd2luZG93LnBhcmVudCA9IG51bGw7IHdpbmRvdy50b3AgPSBudWxsOycgK1xuXHRcdCd3aW5kb3cuZnJhbWVFbGVtZW50ID0gbnVsbDsgdmFyIGNoaWxkID0gd2luZG93Lm9wZW4oJyArXG5cdFx0b3BlbkFyZ3MgK1xuXHRcdCcpOycgK1xuXHRcdCdpZiAoY2hpbGQpIHsgY2hpbGQub3BlbmVyID0gbnVsbCB9Jztcblx0aWZyYW1lRG9jLmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0bmV3V2luID0gKGlmcmFtZS5jb250ZW50V2luZG93IGFzIGFueSkuY2hpbGQgYXMgV2luZG93O1xuXG5cdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcblx0cmV0dXJuIG5ld1dpbjtcbn07XG5cbmNvbnN0IFV0aWxzID0ge1xuXHRpc1BsYWluT2JqZWN0LFxuXHRpc1N0cmluZyxcblx0aXNBcnJheSxcblx0aXNGdW5jdGlvbixcblx0aXNFbXB0eSxcblx0aXNOb3RFbXB0eSxcblx0dG9BcnJheSxcblx0aXNJbkRPTSxcblx0c2h1ZmZsZSxcblx0ZXNjYXBlUmVnRXhwLFxuXHRpZDogbmF0dXJhbElkLFxuXHQvLyA9PT09PT09PT09PT1cblx0Y2FsbGJhY2ssXG5cdGFzc2lnbixcblx0Y29weSxcblx0ZXhwb3NlLFxuXHRnZXRGcm9tLFxuXHRzdHJpbmdLZXlSZXBsYWNlLFxuXHR0ZXh0VG9MaW5lU3RyaW5nLFxuXHRmb3JFYWNoLFxuXHQvLyA9PT09PT09PT09PT1cblx0bWF0aCxcblx0aXNWYWxpZEFnZSxcblx0Ly8gPT09PT09PT09PT09XG5cdGJ1aWxkUXVlcnlTdHJpbmcsXG5cdHBhcnNlUXVlcnlTdHJpbmcsXG5cdC8vID09PT09PT09PT09PVxuXHRldmVudENhbmNlbCxcblx0cHJldmVudERlZmF1bHQsXG5cdC8vID09PT09PT09PT09PVxuXHRmaWxlU2l6ZUZvcm1hdCxcblx0Ly8gPT09PT09PT09PT09XG5cdHNhZmVPcGVuLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iXX0=