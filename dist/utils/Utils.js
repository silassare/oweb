// ==========TYPE CHECKERS====================================
let _naturalId = 0;
let isArray = Array.isArray;
let naturalId = () => "id_" + (_naturalId++);
let isPlainObject = (a) => Object.prototype.toString.call(a) === "[object Object]";
let isString = (a) => typeof a === "string";
let isFunction = (a) => typeof a === "function";
let isEmpty = function (a) {
    if (isArray(a)) {
        return !a.length;
    }
    if (isPlainObject(a)) {
        return !Object.keys(a).length;
    }
    if (typeof a === "string") {
        return a.trim().length === 0;
    }
    if (typeof a === "number") {
        return isNaN(a);
    }
    return !a;
};
let isNotEmpty = (a) => !isEmpty(a);
let toArray = (a) => [].concat.apply([], a);
// ==========HELPERS====================================
let callback = function (fn, args, ctx) {
    if (typeof fn === "function") {
        return fn.apply(ctx, args);
    }
    return null;
};
let forEach = function (obj, fn) {
    Object.keys(obj).forEach((key) => {
        let value = obj[key];
        fn(value, key);
    });
};
let assign = Object.assign || function (target, source) {
    let to = target, from, symbols;
    for (let s = 1; s < arguments.length; s++) {
        from = Object(arguments[s]);
        for (let key in from) {
            if (from.hasOwnProperty(key)) {
                to[key] = from[key];
            }
        }
        if ("getOwnPropertySymbols" in Object) {
            symbols = Object.getOwnPropertySymbols(from);
            for (let i = 0; i < symbols.length; i++) {
                if (from.propertyIsEnumerable(symbols[i])) {
                    to[symbols[i]] = from[symbols[i]];
                }
            }
        }
    }
    return to;
};
let stringKeyReplace = function (str, data) {
    if (isString(str) && str.length && isPlainObject(data)) {
        let keys = Object.keys(data).sort().reverse(), reg;
        if (keys.length) {
            let m = keys.join("|");
            reg = new RegExp(":(" + m + ")", "g");
            return str.replace(reg, function () {
                let replacement = data[arguments[1]];
                if (replacement === undefined) {
                    return arguments[0];
                }
                return replacement;
            });
        }
    }
    return str;
};
let textToLineString = (text) => {
    let reg = /["'\\\n\r\t\u2028\u2029]/g, to_escapes = {
        "\"": "\"",
        "'": "'",
        "\\": "\\",
        "\n": "n",
        "\r": "r",
        "\t": "t",
        "\u2028": "2028",
        "\u2029": "2029"
    };
    return text.replace(reg, (match) => "\\" + to_escapes[match]);
};
let expose = function (items, ctx) {
    let out = {};
    items.forEach(function (key) {
        let item = ctx[key];
        // methods and properties
        if (isFunction(item)) {
            out[key] = function () {
                let res = item.apply(ctx, arguments);
                return (res === ctx) ? out : res;
            };
        }
        else {
            out[key] = item;
        }
    });
    return out;
};
let getFrom = function (from, key) {
    let { [key]: value } = from || {};
    return value;
};
// ==========MATH====================================
let _setDigitsSep = function (x, sep) {
    let s = String(x), count = 0, ans = [], j = s.indexOf("."), start = (j !== -1) ? j : s.length, end = (j !== -1) ? s.slice(start + 1) : [], i = start;
    for (; i >= 0; i--) {
        if (count === 3) {
            count = 0;
            ans[i] = (i !== 0) ? sep + s[i] : s[i];
        }
        else {
            ans[i] = s[i];
        }
        count++;
    }
    return ans.concat(end).join("");
};
let math = {
    numberFormat: function (x, dec = 2, decimalSep = ".", digitsSep = " ") {
        if (!x) {
            return "";
        }
        let ans = parseFloat(String(x)), decimalPos;
        if (dec >= 0) {
            let decimalPow = Math.pow(10, dec);
            ans = Math.floor(ans * decimalPow) / decimalPow;
        }
        let n = _setDigitsSep(ans, digitsSep);
        let a = n.split("");
        decimalPos = a.lastIndexOf(".");
        if (decimalPos >= 0 && decimalSep !== ".") {
            a[decimalPos] = decimalSep;
        }
        return a.join("");
    },
    gt: function (x, y, eq = false) {
        return eq ? x >= y : x > y;
    },
    lt: function (x, y, eq = false) {
        return eq ? x <= y : x < y;
    },
    between: function (x, a, b, eq = false) {
        return eq ? (x >= a && x <= b) : (x > a && x < b);
    },
    isRange: function (a, b) {
        return typeof a === "number" && typeof b === "number" && a < b;
    }
};
let isInDOM = function (element, inBody = false) {
    let _ = element, last;
    while (_) {
        last = _;
        if (inBody && last === document.body) {
            break;
        }
        _ = _.parentNode;
    }
    return inBody ? last === document.body : last === document;
};
let buildQueryString = function (object, prefix) {
    let duplicates = {}, str = [];
    for (let prop in object) {
        if (!Object.prototype.hasOwnProperty.call(object, prop)) {
            continue;
        }
        let key = prefix ? prefix + "[" + prop + "]" : prop, value = object[prop], pair;
        if (value !== undefined) {
            if (value === null) {
                pair = encodeURIComponent(key);
            }
            else if (Utils.isPlainObject(value)) {
                pair = buildQueryString(value, key);
            }
            else if (Utils.isArray(value)) {
                pair = value.reduce(function (memo, item) {
                    if (!duplicates[key])
                        duplicates[key] = {};
                    if (!duplicates[key][item]) {
                        duplicates[key][item] = true;
                        return memo.concat(encodeURIComponent(key) + "=" + encodeURIComponent(item));
                    }
                    return memo;
                }, []).join("&");
            }
            else {
                pair = encodeURIComponent(key) + "=" + encodeURIComponent(value);
            }
            str.push(pair);
        }
    }
    return str.join("&");
};
let shuffle = (a) => {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
};
let parseQueryString = function (str) {
    if (str.charAt(0) === "?")
        str = str.substring(1);
    if (!str.length)
        return {};
    let pairs = str.split("&"), params = {};
    for (let i = 0, len = pairs.length; i < len; i++) {
        let pair = pairs[i].split("="), key = decodeURIComponent(pair[0]), value = pair.length == 2 ? decodeURIComponent(pair[1]) : null;
        if (params[key] != null) {
            if (!Utils.isArray(params[key])) {
                params[key] = [params[key]];
            }
            params[key].push(value);
        }
        else
            params[key] = value;
    }
    return params;
};
let eventCancel = function (e) {
    if (!e) {
        if (window.event)
            e = window.event;
        else
            return;
    }
    if (e.cancelBubble != null)
        e.cancelBubble = true;
    if (e.stopPropagation)
        e.stopPropagation();
    if (e.preventDefault)
        e.preventDefault();
    if (window.event)
        e.returnValue = false;
    // if (e.cancel != null) e.cancel = true;
};
let isValidAge = (day, month, year, minAge, maxAge) => {
    // depending on the year, calculate the number of days in the month
    let daysInMonth, februaryDays = (year % 4 === 0) ? 29 : 28;
    daysInMonth = [31, februaryDays, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    // first, check the incoming month and year are valid.
    if (!month || !day || !year) {
        return false;
    }
    if (1 > month || month > 12) {
        return false;
    }
    if (year < 0) {
        return false;
    }
    if (1 > day || day > daysInMonth[month - 1]) {
        return false;
    }
    // if required, verify the current date is LATER than the incoming date.
    if (minAge !== undefined || maxAge !== undefined) {
        // we get current year
        let currentYear = (new Date).getFullYear(), age = currentYear - year;
        if (age < 0) {
            return false;
        }
        if (age < minAge) {
            return false;
        }
        if (age > maxAge) {
            return false;
        }
    }
    return true;
};
let fileSizeFormat = function (size, decimalSep = ".", digitsSep = " ") {
    let units = ["Kb", "Mb", "Gb", "Tb"], i_max = units.length, i = 0, ko = 1024, result = 0;
    size = parseFloat(String(size));
    while (size >= 1 && i < i_max) {
        result = size;
        size /= ko;
        i++;
    }
    if (!i) {
        i = 1;
    }
    let parts = String(result).split("."), head = (parseInt(parts[0]) === result) ? result : Utils.math.numberFormat(result, 2, decimalSep, digitsSep);
    return head + " " + units[i - 1];
};
let Utils = {
    isPlainObject, isString, isArray,
    isFunction, isEmpty, isNotEmpty,
    toArray, isInDOM, shuffle, id: naturalId,
    // ============
    callback, assign, expose, getFrom,
    stringKeyReplace, textToLineString,
    forEach,
    // ============
    math, isValidAge,
    // ============
    buildQueryString, parseQueryString,
    // ============
    eventCancel,
    // ============
    fileSizeFormat
};
export default Utils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsOERBQThEO0FBQzlELElBQUksVUFBVSxHQUFNLENBQUMsQ0FBQztBQUN0QixJQUFJLE9BQU8sR0FBUyxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ2xDLElBQUksU0FBUyxHQUFPLEdBQVcsRUFBRSxDQUFDLEtBQUssR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7QUFDekQsSUFBSSxhQUFhLEdBQUcsQ0FBQyxDQUFNLEVBQVcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxpQkFBaUIsQ0FBQztBQUNqRyxJQUFJLFFBQVEsR0FBUSxDQUFDLENBQU0sRUFBZSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDO0FBQ25FLElBQUksVUFBVSxHQUFNLENBQUMsQ0FBTSxFQUFpQixFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssVUFBVSxDQUFDO0FBQ3ZFLElBQUksT0FBTyxHQUFTLFVBQVUsQ0FBTTtJQUVuQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNmLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQ2pCO0lBQ0QsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDckIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzlCO0lBRUQsSUFBSSxPQUFPLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDMUIsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQTtLQUM1QjtJQUVELElBQUksT0FBTyxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQzFCLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tB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QUNkLGdCQUFnQixFQUFFLGdCQUFnQjtJQUNuQyxlQUFlO0lBQ2QsV0FBVztJQUNaLGVBQWU7SUFDZCxjQUFjO0NBQ2QsQ0FBQztBQUVGLGVBQWUsS0FBSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PVRZUEUgQ0hFQ0tFUlM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmxldCBfbmF0dXJhbElkICAgID0gMDtcbmxldCBpc0FycmF5ICAgICAgID0gQXJyYXkuaXNBcnJheTtcbmxldCBuYXR1cmFsSWQgICAgID0gKCk6IHN0cmluZyA9PiBcImlkX1wiICsgKF9uYXR1cmFsSWQrKyk7XG5sZXQgaXNQbGFpbk9iamVjdCA9IChhOiBhbnkpOiBib29sZWFuID0+IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbmxldCBpc1N0cmluZyAgICAgID0gKGE6IGFueSk6IGEgaXMgc3RyaW5nID0+IHR5cGVvZiBhID09PSBcInN0cmluZ1wiO1xubGV0IGlzRnVuY3Rpb24gICAgPSAoYTogYW55KTogYSBpcyBGdW5jdGlvbiA9PiB0eXBlb2YgYSA9PT0gXCJmdW5jdGlvblwiO1xubGV0IGlzRW1wdHkgICAgICAgPSBmdW5jdGlvbiAoYTogYW55KTogYm9vbGVhbiB7XG5cblx0aWYgKGlzQXJyYXkoYSkpIHtcblx0XHRyZXR1cm4gIWEubGVuZ3RoO1xuXHR9XG5cdGlmIChpc1BsYWluT2JqZWN0KGEpKSB7XG5cdFx0cmV0dXJuICFPYmplY3Qua2V5cyhhKS5sZW5ndGg7XG5cdH1cblxuXHRpZiAodHlwZW9mIGEgPT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gYS50cmltKCkubGVuZ3RoID09PSAwXG5cdH1cblxuXHRpZiAodHlwZW9mIGEgPT09IFwibnVtYmVyXCIpIHtcblx0XHRyZXR1cm4gaXNOYU4oYSk7XG5cdH1cblxuXHRyZXR1cm4gIWE7XG59O1xuXG5sZXQgaXNOb3RFbXB0eSA9IChhOiBhbnkpOiBib29sZWFuID0+ICFpc0VtcHR5KGEpO1xubGV0IHRvQXJyYXkgICAgPSAoYTogYW55KTogQXJyYXk8YW55PiA9PiBbXS5jb25jYXQuYXBwbHkoW10sIGEpO1xuXG4vLyA9PT09PT09PT09SEVMUEVSUz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxubGV0IGNhbGxiYWNrID0gZnVuY3Rpb24gKGZuOiBhbnksIGFyZ3M/OiBBcnJheTxhbnk+LCBjdHg/OiBhbnkpOiBhbnkge1xuXHRpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRyZXR1cm4gZm4uYXBwbHkoY3R4LCBhcmdzKTtcblx0fVxuXG5cdHJldHVybiBudWxsO1xufTtcblxubGV0IGZvckVhY2ggPSBmdW5jdGlvbiA8VD4ob2JqOiB7IFtrZXk6IHN0cmluZ106IFQgfSB8IEFycmF5PFQ+LCBmbjogKHZhbHVlOiBULCBrZXk6IGFueSkgPT4gdm9pZCkge1xuXHRPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG5cdFx0bGV0IHZhbHVlOiBUID0gKG9iaiBhcyBhbnkpW2tleV07XG5cdFx0Zm4odmFsdWUsIGtleSk7XG5cdH0pO1xufTtcblxubGV0IGFzc2lnbiA9IChPYmplY3QgYXMgYW55KS5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldDogb2JqZWN0LCBzb3VyY2U6IG9iamVjdCkge1xuXG5cdGxldCB0byA9IHRhcmdldCwgZnJvbSwgc3ltYm9scztcblxuXHRmb3IgKGxldCBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdGZyb20gPSBPYmplY3QoYXJndW1lbnRzW3NdKTtcblxuXHRcdGZvciAobGV0IGtleSBpbiBmcm9tKSB7XG5cdFx0XHRpZiAoZnJvbS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdCh0byBhcyBhbnkpW2tleV0gPSBmcm9tW2tleV07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKFwiZ2V0T3duUHJvcGVydHlTeW1ib2xzXCIgaW4gT2JqZWN0KSB7XG5cdFx0XHRzeW1ib2xzID0gKE9iamVjdCBhcyBhbnkpLmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3ltYm9scy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoZnJvbS5wcm9wZXJ0eUlzRW51bWVyYWJsZShzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdCh0byBhcyBhbnkpW3N5bWJvbHNbaV1dID0gZnJvbVtzeW1ib2xzW2ldXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0bztcbn07XG5cbmxldCBzdHJpbmdLZXlSZXBsYWNlID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nLCBkYXRhOiBvYmplY3QpOiBzdHJpbmcge1xuXHRpZiAoaXNTdHJpbmcoc3RyKSAmJiBzdHIubGVuZ3RoICYmIGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0XHRsZXQga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpLnNvcnQoKS5yZXZlcnNlKCksXG5cdFx0XHRyZWc7XG5cblx0XHRpZiAoa2V5cy5sZW5ndGgpIHtcblx0XHRcdGxldCBtID0ga2V5cy5qb2luKFwifFwiKTtcblx0XHRcdHJlZyAgID0gbmV3IFJlZ0V4cChcIjooXCIgKyBtICsgXCIpXCIsIFwiZ1wiKTtcblxuXHRcdFx0cmV0dXJuIHN0ci5yZXBsYWNlKHJlZywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgcmVwbGFjZW1lbnQgPSAoZGF0YSBhcyBhbnkpW2FyZ3VtZW50c1sxXV07XG5cblx0XHRcdFx0aWYgKHJlcGxhY2VtZW50ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXJndW1lbnRzWzBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHJlcGxhY2VtZW50O1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0cjtcbn07XG5cbmxldCB0ZXh0VG9MaW5lU3RyaW5nID0gKHRleHQ6IHN0cmluZyk6IHN0cmluZyA9PiB7XG5cdGxldCByZWcgICAgICAgICAgICAgICAgPSAvW1wiJ1xcXFxcXG5cXHJcXHRcXHUyMDI4XFx1MjAyOV0vZyxcblx0XHR0b19lc2NhcGVzOiBvYmplY3QgPSB7XG5cdFx0XHRcIlxcXCJcIiAgICA6IFwiXFxcIlwiLFxuXHRcdFx0XCInXCIgICAgIDogXCInXCIsXG5cdFx0XHRcIlxcXFxcIiAgICA6IFwiXFxcXFwiLFxuXHRcdFx0XCJcXG5cIiAgICA6IFwiblwiLFxuXHRcdFx0XCJcXHJcIiAgICA6IFwiclwiLFxuXHRcdFx0XCJcXHRcIiAgICA6IFwidFwiLFxuXHRcdFx0XCJcXHUyMDI4XCI6IFwiMjAyOFwiLFxuXHRcdFx0XCJcXHUyMDI5XCI6IFwiMjAyOVwiXG5cdFx0fTtcblxuXHRyZXR1cm4gdGV4dC5yZXBsYWNlKHJlZyxcblx0XHQobWF0Y2gpID0+IFwiXFxcXFwiICsgKHRvX2VzY2FwZXMgYXMgYW55KVttYXRjaF0pO1xufTtcblxubGV0IGV4cG9zZSA9IGZ1bmN0aW9uIChpdGVtczogQXJyYXk8c3RyaW5nPiwgY3R4OiBhbnkpOiBvYmplY3Qge1xuXHRsZXQgb3V0OiBvYmplY3QgPSB7fTtcblx0aXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0bGV0IGl0ZW0gPSBjdHhba2V5XTtcblx0XHQvLyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzXG5cdFx0aWYgKGlzRnVuY3Rpb24oaXRlbSkpIHtcblx0XHRcdChvdXQgYXMgYW55KVtrZXldID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRsZXQgcmVzID0gaXRlbS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG5cblx0XHRcdFx0cmV0dXJuIChyZXMgPT09IGN0eCkgPyBvdXQgOiByZXM7XG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQob3V0IGFzIGFueSlba2V5XSA9IGl0ZW07XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gb3V0O1xufTtcblxubGV0IGdldEZyb20gPSBmdW5jdGlvbiAoZnJvbTogb2JqZWN0LCBrZXk6IHN0cmluZyk6IGFueSB7XG5cdGxldCB7W2tleV06IHZhbHVlfTogYW55ID0gZnJvbSB8fCB7fTtcblxuXHRyZXR1cm4gdmFsdWU7XG59O1xuXG4vLyA9PT09PT09PT09TUFUSD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5sZXQgX3NldERpZ2l0c1NlcCA9IGZ1bmN0aW9uICh4OiBudW1iZXIsIHNlcDogc3RyaW5nKTogc3RyaW5nIHtcblx0bGV0IHMgICAgID0gU3RyaW5nKHgpLFxuXHRcdGNvdW50ID0gMCxcblx0XHRhbnMgICA9IFtdLFxuXHRcdGogICAgID0gcy5pbmRleE9mKFwiLlwiKSxcblx0XHRzdGFydCA9IChqICE9PSAtMSkgPyBqIDogcy5sZW5ndGgsXG5cdFx0ZW5kICAgPSAoaiAhPT0gLTEpID8gcy5zbGljZShzdGFydCArIDEpIDogW10sXG5cdFx0aSAgICAgPSBzdGFydDtcblxuXHRmb3IgKDsgaSA+PSAwOyBpLS0pIHtcblx0XHRpZiAoY291bnQgPT09IDMpIHtcblx0XHRcdGNvdW50ICA9IDA7XG5cdFx0XHRhbnNbaV0gPSAoaSAhPT0gMCkgPyBzZXAgKyBzW2ldIDogc1tpXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0YW5zW2ldID0gc1tpXTtcblx0XHR9XG5cdFx0Y291bnQrKztcblx0fVxuXG5cdHJldHVybiBhbnMuY29uY2F0KGVuZCkuam9pbihcIlwiKTtcbn07XG5cbmxldCBtYXRoID0ge1xuXHRudW1iZXJGb3JtYXQ6IGZ1bmN0aW9uICh4OiBudW1iZXIgfCBzdHJpbmcsIGRlYzogbnVtYmVyID0gMiwgZGVjaW1hbFNlcDogc3RyaW5nID0gXCIuXCIsIGRpZ2l0c1NlcDogc3RyaW5nID0gXCIgXCIpOiBzdHJpbmcge1xuXG5cdFx0aWYgKCF4KSB7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cblx0XHRsZXQgYW5zID0gcGFyc2VGbG9hdChTdHJpbmcoeCkpLCBkZWNpbWFsUG9zO1xuXG5cdFx0aWYgKGRlYyA+PSAwKSB7XG5cdFx0XHRsZXQgZGVjaW1hbFBvdyA9IE1hdGgucG93KDEwLCBkZWMpO1xuXHRcdFx0YW5zICAgICAgICAgICAgPSBNYXRoLmZsb29yKGFucyAqIGRlY2ltYWxQb3cpIC8gZGVjaW1hbFBvdztcblx0XHR9XG5cblx0XHRsZXQgbiA9IF9zZXREaWdpdHNTZXAoYW5zLCBkaWdpdHNTZXApO1xuXHRcdGxldCBhID0gbi5zcGxpdChcIlwiKTtcblxuXHRcdGRlY2ltYWxQb3MgPSBhLmxhc3RJbmRleE9mKFwiLlwiKTtcblx0XHRpZiAoZGVjaW1hbFBvcyA+PSAwICYmIGRlY2ltYWxTZXAgIT09IFwiLlwiKSB7XG5cdFx0XHRhW2RlY2ltYWxQb3NdID0gZGVjaW1hbFNlcDtcblx0XHR9XG5cblx0XHRyZXR1cm4gYS5qb2luKFwiXCIpO1xuXHR9LFxuXHRndCAgICAgICAgICA6IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlciwgZXE6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBlcSA/IHggPj0geSA6IHggPiB5O1xuXHR9LFxuXHRsdCAgICAgICAgICA6IGZ1bmN0aW9uICh4OiBudW1iZXIsIHk6IG51bWJlciwgZXE6IGJvb2xlYW4gPSBmYWxzZSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBlcSA/IHggPD0geSA6IHggPCB5O1xuXHR9LFxuXHRiZXR3ZWVuICAgICA6IGZ1bmN0aW9uICh4OiBudW1iZXIsIGE6IG51bWJlciwgYjogbnVtYmVyLCBlcTogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGVxID8gKHggPj0gYSAmJiB4IDw9IGIpIDogKHggPiBhICYmIHggPCBiKTtcblx0fSxcblx0aXNSYW5nZSAgICAgOiBmdW5jdGlvbiAoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHlwZW9mIGEgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGIgPT09IFwibnVtYmVyXCIgJiYgYSA8IGI7XG5cdH1cbn07XG5cbmxldCBpc0luRE9NID0gZnVuY3Rpb24gKGVsZW1lbnQ6IGFueSwgaW5Cb2R5OiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuIHtcblx0bGV0IF8gPSBlbGVtZW50LCBsYXN0O1xuXG5cdHdoaWxlIChfKSB7XG5cdFx0bGFzdCA9IF87XG5cdFx0aWYgKGluQm9keSAmJiBsYXN0ID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0XyA9IF8ucGFyZW50Tm9kZTtcblx0fVxuXG5cdHJldHVybiBpbkJvZHkgPyBsYXN0ID09PSBkb2N1bWVudC5ib2R5IDogbGFzdCA9PT0gZG9jdW1lbnQ7XG59O1xuXG5sZXQgYnVpbGRRdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChvYmplY3Q6IG9iamVjdCwgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRsZXQgZHVwbGljYXRlcyA9IHt9LFxuXHRcdHN0ciAgICAgICAgPSBbXTtcblxuXHRmb3IgKGxldCBwcm9wIGluIG9iamVjdCkge1xuXHRcdGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcCkpIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGxldCBrZXkgICA9IHByZWZpeCA/IHByZWZpeCArIFwiW1wiICsgcHJvcCArIFwiXVwiIDogcHJvcCxcblx0XHRcdHZhbHVlID0gKG9iamVjdCBhcyBhbnkpW3Byb3BdLFxuXHRcdFx0cGFpcjtcblx0XHRpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHZhbHVlID09PSBudWxsKSB7XG5cdFx0XHRcdHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcblx0XHRcdH0gZWxzZSBpZiAoVXRpbHMuaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0XHRcdFx0cGFpciA9IGJ1aWxkUXVlcnlTdHJpbmcodmFsdWUsIGtleSk7XG5cdFx0XHR9IGVsc2UgaWYgKFV0aWxzLmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdHBhaXIgPSB2YWx1ZS5yZWR1Y2UoZnVuY3Rpb24gKG1lbW8sIGl0ZW0pIHtcblx0XHRcdFx0XHRpZiAoIShkdXBsaWNhdGVzIGFzIGFueSlba2V5XSkgKGR1cGxpY2F0ZXMgYXMgYW55KVtrZXldID0ge307XG5cdFx0XHRcdFx0aWYgKCEoZHVwbGljYXRlcyBhcyBhbnkpW2tleV1baXRlbV0pIHtcblx0XHRcdFx0XHRcdChkdXBsaWNhdGVzIGFzIGFueSlba2V5XVtpdGVtXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbWVtby5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChpdGVtKSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0XHRcdH0sIFtdKS5qb2luKFwiJlwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0XHRcdH1cblxuXHRcdFx0c3RyLnB1c2gocGFpcik7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0ci5qb2luKFwiJlwiKVxufTtcblxubGV0IHNodWZmbGUgPSAoYTogQXJyYXk8YW55Pik6IEFycmF5PGFueT4gPT4ge1xuXHRsZXQgaiwgeCwgaTtcblxuXHRmb3IgKGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcblx0XHRqICAgID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG5cdFx0eCAgICA9IGFbaV07XG5cdFx0YVtpXSA9IGFbal07XG5cdFx0YVtqXSA9IHg7XG5cdH1cblxuXHRyZXR1cm4gYTtcbn07XG5cbmxldCBwYXJzZVF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKHN0cjogc3RyaW5nKSB7XG5cdGlmIChzdHIuY2hhckF0KDApID09PSBcIj9cIikgc3RyID0gc3RyLnN1YnN0cmluZygxKTtcblx0aWYgKCFzdHIubGVuZ3RoKSByZXR1cm4ge307XG5cblx0bGV0IHBhaXJzID0gc3RyLnNwbGl0KFwiJlwiKSwgcGFyYW1zID0ge307XG5cdGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYWlycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdGxldCBwYWlyICA9IHBhaXJzW2ldLnNwbGl0KFwiPVwiKSxcblx0XHRcdGtleSAgID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pLFxuXHRcdFx0dmFsdWUgPSBwYWlyLmxlbmd0aCA9PSAyID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pIDogbnVsbDtcblx0XHRpZiAoKHBhcmFtcyBhcyBhbnkpW2tleV0gIT0gbnVsbCkge1xuXHRcdFx0aWYgKCFVdGlscy5pc0FycmF5KChwYXJhbXMgYXMgYW55KVtrZXldKSkge1xuXHRcdFx0XHQocGFyYW1zIGFzIGFueSlba2V5XSA9IFsocGFyYW1zIGFzIGFueSlba2V5XV07XG5cdFx0XHR9XG5cdFx0XHQocGFyYW1zIGFzIGFueSlba2V5XS5wdXNoKHZhbHVlKVxuXHRcdH0gZWxzZSAocGFyYW1zIGFzIGFueSlba2V5XSA9IHZhbHVlO1xuXHR9XG5cdHJldHVybiBwYXJhbXNcbn07XG5cbmxldCBldmVudENhbmNlbCA9IGZ1bmN0aW9uIChlOiBFdmVudCkge1xuXG5cdGlmICghZSkge1xuXHRcdGlmICh3aW5kb3cuZXZlbnQpIGUgPSB3aW5kb3cuZXZlbnQ7XG5cdFx0ZWxzZSByZXR1cm47XG5cdH1cblxuXHRpZiAoZS5jYW5jZWxCdWJibGUgIT0gbnVsbCkgZS5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXHRpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdGlmIChlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7XG5cdGlmICh3aW5kb3cuZXZlbnQpIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcblx0Ly8gaWYgKGUuY2FuY2VsICE9IG51bGwpIGUuY2FuY2VsID0gdHJ1ZTtcbn07XG5cbmxldCBpc1ZhbGlkQWdlID0gKGRheTogbnVtYmVyLCBtb250aDogbnVtYmVyLCB5ZWFyOiBudW1iZXIsIG1pbkFnZTogbnVtYmVyLCBtYXhBZ2U6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuXHQvLyBkZXBlbmRpbmcgb24gdGhlIHllYXIsIGNhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhlIG1vbnRoXG5cdGxldCBkYXlzSW5Nb250aCxcblx0XHRmZWJydWFyeURheXMgPSAoeWVhciAlIDQgPT09IDApID8gMjkgOiAyODtcblxuXHRkYXlzSW5Nb250aCA9IFszMSwgZmVicnVhcnlEYXlzLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07XG5cblx0Ly8gZmlyc3QsIGNoZWNrIHRoZSBpbmNvbWluZyBtb250aCBhbmQgeWVhciBhcmUgdmFsaWQuXG5cdGlmICghbW9udGggfHwgIWRheSB8fCAheWVhcikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRpZiAoMSA+IG1vbnRoIHx8IG1vbnRoID4gMTIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0aWYgKHllYXIgPCAwKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICgxID4gZGF5IHx8IGRheSA+IGRheXNJbk1vbnRoW21vbnRoIC0gMV0pIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBpZiByZXF1aXJlZCwgdmVyaWZ5IHRoZSBjdXJyZW50IGRhdGUgaXMgTEFURVIgdGhhbiB0aGUgaW5jb21pbmcgZGF0ZS5cblx0aWYgKG1pbkFnZSAhPT0gdW5kZWZpbmVkIHx8IG1heEFnZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0Ly8gd2UgZ2V0IGN1cnJlbnQgeWVhclxuXHRcdGxldCBjdXJyZW50WWVhciA9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSxcblx0XHRcdGFnZSAgICAgICAgID0gY3VycmVudFllYXIgLSB5ZWFyO1xuXG5cdFx0aWYgKGFnZSA8IDApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGFnZSA8IG1pbkFnZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoYWdlID4gbWF4QWdlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59O1xuXG5sZXQgZmlsZVNpemVGb3JtYXQgPSBmdW5jdGlvbiAoc2l6ZTogbnVtYmVyLCBkZWNpbWFsU2VwOiBzdHJpbmcgPSBcIi5cIiwgZGlnaXRzU2VwOiBzdHJpbmcgPSBcIiBcIikge1xuXHRsZXQgdW5pdHMgID0gW1wiS2JcIiwgXCJNYlwiLCBcIkdiXCIsIFwiVGJcIl0sXG5cdFx0aV9tYXggID0gdW5pdHMubGVuZ3RoLFxuXHRcdGkgICAgICA9IDAsXG5cdFx0a28gICAgID0gMTAyNCxcblx0XHRyZXN1bHQgPSAwO1xuXG5cdHNpemUgPSBwYXJzZUZsb2F0KFN0cmluZyhzaXplKSk7XG5cblx0d2hpbGUgKHNpemUgPj0gMSAmJiBpIDwgaV9tYXgpIHtcblx0XHRyZXN1bHQgPSBzaXplO1xuXHRcdHNpemUgLz0ga287XG5cdFx0aSsrO1xuXHR9XG5cblx0aWYgKCFpKSB7XG5cdFx0aSA9IDE7XG5cdH1cblxuXHRsZXQgcGFydHMgPSBTdHJpbmcocmVzdWx0KS5zcGxpdChcIi5cIiksXG5cdFx0aGVhZCAgPSAocGFyc2VJbnQocGFydHNbMF0pID09PSByZXN1bHQpID8gcmVzdWx0IDogVXRpbHMubWF0aC5udW1iZXJGb3JtYXQocmVzdWx0LCAyLCBkZWNpbWFsU2VwLCBkaWdpdHNTZXApO1xuXG5cdHJldHVybiBoZWFkICsgXCIgXCIgKyB1bml0c1tpIC0gMV07XG59O1xuXG5sZXQgVXRpbHMgPSB7XG5cdGlzUGxhaW5PYmplY3QsIGlzU3RyaW5nLCBpc0FycmF5LFxuXHRpc0Z1bmN0aW9uLCBpc0VtcHR5LCBpc05vdEVtcHR5LFxuXHR0b0FycmF5LCBpc0luRE9NLCBzaHVmZmxlLCBpZDogbmF0dXJhbElkLFxuLy8gPT09PT09PT09PT09XG5cdGNhbGxiYWNrLCBhc3NpZ24sIGV4cG9zZSwgZ2V0RnJvbSxcblx0c3RyaW5nS2V5UmVwbGFjZSwgdGV4dFRvTGluZVN0cmluZyxcblx0Zm9yRWFjaCxcbi8vID09PT09PT09PT09PVxuXHRtYXRoLCBpc1ZhbGlkQWdlLFxuLy8gPT09PT09PT09PT09XG5cdGJ1aWxkUXVlcnlTdHJpbmcsIHBhcnNlUXVlcnlTdHJpbmcsXG4vLyA9PT09PT09PT09PT1cblx0ZXZlbnRDYW5jZWwsXG4vLyA9PT09PT09PT09PT1cblx0ZmlsZVNpemVGb3JtYXRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFV0aWxzO1xuIl19