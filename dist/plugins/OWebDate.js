const FORMAT_REG = /ms|ss|ii|hh|mm|ll|A|a|s|i|H|h|y|Y|m|F|M|d|l|L|D/g;
export default class OWebDate {
    constructor(appContext, date = new Date()) {
        this.appContext = appContext;
        this.date = date;
    }
    /**
     * Format date with a given lang key.
     *
     * @param format
     */
    format(format) {
        const o = this.describe();
        return format.replace(FORMAT_REG, function (k) {
            return k in o ? o[k] : k;
        });
    }
    /**
     * Returns date description object.
     */
    describe() {
        const i18n = this.appContext.i18n, dayNamesShort = i18n.toHuman('OW_TIME_DAY_NAMES_SHORT').split(','), dayNamesFull = i18n.toHuman('OW_TIME_DAY_NAMES_FULL').split(','), monthNamesShort = i18n
            .toHuman('OW_TIME_MONTH_NAMES_SHORT')
            .split(','), monthNamesFull = i18n
            .toHuman('OW_TIME_MONTH_NAMES_FULL')
            .split(','), date = new Date(this.date), y = date.getYear(), Y = date.getFullYear(), m = date.getMonth(), mm = String(m < 9 ? '0' + (m + 1) : m + 1), d = date.getDate(), l = date.getDay(), ll = l + 1, // l? l : 7,
        L = dayNamesFull[l], D = dayNamesShort[l], M = monthNamesShort[m], F = monthNamesFull[m], H = date.getHours(), h = H === 12 ? 12 : H % 12, hh = String(m <= 9 ? '0' + m : m), i = date.getMinutes(), ii = String(i < 10 ? '0' + i : i), s = date.getSeconds(), ss = String(s < 10 ? '0' + s : s), ms = date.getMilliseconds(), a = H < 12 ? 'am' : 'pm', A = a.toUpperCase();
        return {
            D,
            L,
            l,
            ll,
            d,
            M,
            F,
            m,
            mm,
            Y,
            y,
            h,
            hh,
            H,
            i,
            ii,
            s,
            ss,
            ms,
            a,
            A,
        };
    }
    /**
     * Date setter.
     *
     * @param date
     */
    setDate(date) {
        this.date = new Date(date);
        return this;
    }
    /**
     * Date getter.
     */
    getDate() {
        return this.date;
    }
    /**
     * Returns unix like timestamp.
     */
    static timestamp() {
        return Number(String(Date.now()).slice(0, -3));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYkRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcGx1Z2lucy9PV2ViRGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrREEsTUFBTSxVQUFVLEdBQUcsa0RBQWtELENBQUM7QUFFdEUsTUFBTSxDQUFDLE9BQU8sT0FBTyxRQUFRO0lBQzVCLFlBQ1MsVUFBbUIsRUFDbkIsT0FBbUIsSUFBSSxJQUFJLEVBQUU7UUFEN0IsZUFBVSxHQUFWLFVBQVUsQ0FBUztRQUNuQixTQUFJLEdBQUosSUFBSSxDQUF5QjtJQUNuQyxDQUFDO0lBRUo7Ozs7T0FJRztJQUNILE1BQU0sQ0FBQyxNQUFjO1FBQ3BCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQVMsQ0FBQztRQUNqQyxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQztZQUM1QyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFCLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOztPQUVHO0lBQ0gsUUFBUTtRQUNQLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUNoQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFDbEUsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQ2hFLGVBQWUsR0FBRyxJQUFJO2FBQ3BCLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQzthQUNwQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQ1osY0FBYyxHQUFHLElBQUk7YUFDbkIsT0FBTyxDQUFDLDBCQUEwQixDQUFDO2FBQ25DLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFD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biAqIEwgIFRoZSBkYXkgb2YgdGhlIHdlZWsgZnVsbCBuYW1lXG4gKiBsIFRoZSBkYXkgb2YgdGhlIHdlZWsgMCB0byA2XG4gKiBsbCBUaGUgZGF5IG9mIHRoZSB3ZWVrIDEgdG8gN1xuICogZCBUaGUgZGF5IG9mIHRoZSBtb250aFxuICogTSBUaGUgbmFtZSBvZiB0aGUgbW9udGggaW4gdGhyZWUgb3IgZm91ciBsZXR0ZXJzXG4gKiBGIFRoZSBmdWxsIG5hbWUgb2YgdGhlIG1vbnRoXG4gKiBtIFRoZSBudW1iZXIgb2YgdGhlIG1vbnRoIDAgdG8gMTFcbiAqIG1tIFRoZSBudW1iZXIgb2YgdGhlIG1vbnRoIDAxIHRvIDEyXG4gKiBZIFRoZSB5ZWFyIGluIGZvdXIgZGlnaXRzXG4gKiB5IFRoZSB5ZWFyIGluIHR3byBkaWdpdHNcbiAqIGggVGhlIGhvdXIgdXNpbmcgMCB0byAxMlxuICogSCBUaGUgaG91ciB1c2luZyAwIHRvIDIzXG4gKiBpIFRoZSBtaW51dGVzIDAgdG8gNTlcbiAqIHMgVGhlIHNlY29uZHMgMCB0byA1OVxuICogYSBhbSAvIHBtIERpc3BsYXlcbiAqIEEgQU0gLyBQTSBkaXNwbGF5XG4gKlxuICogaWkgVGhlIG1pbnV0ZXMgMDAsIDAxLC4uLiwgNTlcbiAqIHNzIFRoZSBzZWNvbmRzIDAwLCAwMSwuLi4sIDU5XG4gKiBoaCBUaGUgaG91ciAwMSwuLi4sIDEyXG4gKi9cbmltcG9ydCBPV2ViQXBwIGZyb20gJy4uL09XZWJBcHAnO1xuXG5leHBvcnQgdHlwZSB0RGF0ZVZhbHVlID0gRGF0ZSB8IG51bWJlciB8IHN0cmluZztcbmV4cG9ydCB0eXBlIHREYXRlRGVzYyA9IHtcblx0RDogc3RyaW5nO1xuXHRMOiBzdHJpbmc7XG5cdGw6IG51bWJlcjtcblx0bGw6IG51bWJlcjtcblx0ZDogbnVtYmVyO1xuXHRNOiBzdHJpbmc7XG5cdEY6IHN0cmluZztcblx0bTogbnVtYmVyO1xuXHRtbTogc3RyaW5nO1xuXHRZOiBudW1iZXI7XG5cdHk6IG51bWJlcjtcblx0aDogbnVtYmVyO1xuXHRoaDogc3RyaW5nO1xuXHRIOiBudW1iZXI7XG5cdGk6IG51bWJlcjtcblx0aWk6IHN0cmluZztcblx0czogbnVtYmVyO1xuXHRzczogc3RyaW5nO1xuXHRtczogbnVtYmVyO1xuXHRhOiBzdHJpbmc7XG5cdEE6IHN0cmluZztcbn07XG5cbmNvbnN0IEZPUk1BVF9SRUcgPSAvbXN8c3N8aWl8aGh8bW18bGx8QXxhfHN8aXxIfGh8eXxZfG18RnxNfGR8bHxMfEQvZztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT1dlYkRhdGUge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIGFwcENvbnRleHQ6IE9XZWJBcHAsXG5cdFx0cHJpdmF0ZSBkYXRlOiB0RGF0ZVZhbHVlID0gbmV3IERhdGUoKSxcblx0KSB7fVxuXG5cdC8qKlxuXHQgKiBGb3JtYXQgZGF0ZSB3aXRoIGEgZ2l2ZW4gbGFuZyBrZXkuXG5cdCAqXG5cdCAqIEBwYXJhbSBmb3JtYXRcblx0ICovXG5cdGZvcm1hdChmb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgbyA9IHRoaXMuZGVzY3JpYmUoKSBhcyBhbnk7XG5cdFx0cmV0dXJuIGZvcm1hdC5yZXBsYWNlKEZPUk1BVF9SRUcsIGZ1bmN0aW9uIChrKSB7XG5cdFx0XHRyZXR1cm4gayBpbiBvID8gb1trXSA6IGs7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBkYXRlIGRlc2NyaXB0aW9uIG9iamVjdC5cblx0ICovXG5cdGRlc2NyaWJlKCk6IHREYXRlRGVzYyB7XG5cdFx0Y29uc3QgaTE4biA9IHRoaXMuYXBwQ29udGV4dC5pMThuLFxuXHRcdFx0ZGF5TmFtZXNTaG9ydCA9IGkxOG4udG9IdW1hbignT1dfVElNRV9EQVlfTkFNRVNfU0hPUlQnKS5zcGxpdCgnLCcpLFxuXHRcdFx0ZGF5TmFtZXNGdWxsID0gaTE4bi50b0h1bWFuKCdPV19USU1FX0RBWV9OQU1FU19GVUxMJykuc3BsaXQoJywnKSxcblx0XHRcdG1vbnRoTmFtZXNTaG9ydCA9IGkxOG5cblx0XHRcdFx0LnRvSHVtYW4oJ09XX1RJTUVfTU9OVEhfTkFNRVNfU0hPUlQnKVxuXHRcdFx0XHQuc3BsaXQoJywnKSxcblx0XHRcdG1vbnRoTmFtZXNGdWxsID0gaTE4blxuXHRcdFx0XHQudG9IdW1hbignT1dfVElNRV9NT05USF9OQU1FU19GVUxMJylcblx0XHRcdFx0LnNwbGl0KCcsJyksXG5cdFx0XHRkYXRlID0gbmV3IERhdGUodGhpcy5kYXRlKSxcblx0XHRcdHk6IG51bWJlciA9IChkYXRlIGFzIGFueSkuZ2V0WWVhcigpLFxuXHRcdFx0WTogbnVtYmVyID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxuXHRcdFx0bTogbnVtYmVyID0gZGF0ZS5nZXRNb250aCgpLFxuXHRcdFx0bW06IHN0cmluZyA9IFN0cmluZyhtIDwgOSA/ICcwJyArIChtICsgMSkgOiBtICsgMSksXG5cdFx0XHRkOiBudW1iZXIgPSBkYXRlLmdldERhdGUoKSxcblx0XHRcdGw6IG51bWJlciA9IGRhdGUuZ2V0RGF5KCksXG5cdFx0XHRsbDogbnVtYmVyID0gbCArIDEsIC8vIGw/IGwgOiA3LFxuXHRcdFx0TDogc3RyaW5nID0gZGF5TmFtZXNGdWxsW2xdLFxuXHRcdFx0RDogc3RyaW5nID0gZGF5TmFtZXNTaG9ydFtsXSxcblx0XHRcdE06IHN0cmluZyA9IG1vbnRoTmFtZXNTaG9ydFttXSxcblx0XHRcdEY6IHN0cmluZyA9IG1vbnRoTmFtZXNGdWxsW21dLFxuXHRcdFx0SDogbnVtYmVyID0gZGF0ZS5nZXRIb3VycygpLFxuXHRcdFx0aDogbnVtYmVyID0gSCA9PT0gMTIgPyAxMiA6IEggJSAxMixcblx0XHRcdGhoOiBzdHJpbmcgPSBTdHJpbmcobSA8PSA5ID8gJzAnICsgbSA6IG0pLFxuXHRcdFx0aTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCksXG5cdFx0XHRpaTogc3RyaW5nID0gU3RyaW5nKGkgPCAxMCA/ICcwJyArIGkgOiBpKSxcblx0XHRcdHM6IG51bWJlciA9IGRhdGUuZ2V0U2Vjb25kcygpLFxuXHRcdFx0c3M6IHN0cmluZyA9IFN0cmluZyhzIDwgMTAgPyAnMCcgKyBzIDogcyksXG5cdFx0XHRtczogbnVtYmVyID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSxcblx0XHRcdGE6IHN0cmluZyA9IEggPCAxMiA/ICdhbScgOiAncG0nLFxuXHRcdFx0QTogc3RyaW5nID0gYS50b1VwcGVyQ2FzZSgpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdEQsXG5cdFx0XHRMLFxuXHRcdFx0bCxcblx0XHRcdGxsLFxuXHRcdFx0ZCxcblx0XHRcdE0sXG5cdFx0XHRGLFxuXHRcdFx0bSxcblx0XHRcdG1tLFxuXHRcdFx0WSxcblx0XHRcdHksXG5cdFx0XHRoLFxuXHRcdFx0aGgsXG5cdFx0XHRILFxuXHRcdFx0aSxcblx0XHRcdGlpLFxuXHRcdFx0cyxcblx0XHRcdHNzLFxuXHRcdFx0bXMsXG5cdFx0XHRhLFxuXHRcdFx0QSxcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIERhdGUgc2V0dGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0gZGF0ZVxuXHQgKi9cblx0c2V0RGF0ZShkYXRlOiB0RGF0ZVZhbHVlKTogdGhpcyB7XG5cdFx0dGhpcy5kYXRlID0gbmV3IERhdGUoZGF0ZSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHQvKipcblx0ICogRGF0ZSBnZXR0ZXIuXG5cdCAqL1xuXHRnZXREYXRlKCk6IHREYXRlVmFsdWUge1xuXHRcdHJldHVybiB0aGlzLmRhdGU7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB1bml4IGxpa2UgdGltZXN0YW1wLlxuXHQgKi9cblx0c3RhdGljIHRpbWVzdGFtcCgpOiBudW1iZXIge1xuXHRcdHJldHVybiBOdW1iZXIoU3RyaW5nKERhdGUubm93KCkpLnNsaWNlKDAsIC0zKSk7XG5cdH1cbn1cbiJdfQ==