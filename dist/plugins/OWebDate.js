"use strict";
/**
 * D The day of the week in three letters
 * l (L lowercase) The entire day of the week 0 to 6
 * ll (LL lowercase) The entire day of the week 1 to 7
 * d The day of the month
 * M The name of the month in three or four letters
 * F The full name of the month
 * m The number of the month 0 to 11
 * mm The number of the month 01 to 12
 * Y The year in four digits
 * y The year in two digits
 * h Time from 0 to 12
 * H Time from 0 to 23
 * i The minutes 0 to 59
 * s The seconds 0 to 59
 * a am / pm Display
 * A AM / PM display
 *
 * // OWebDate
 * ii The minutes 00, 01,..., 59
 * ss The seconds 00, 01,..., 59
 */
import Utils from "../utils/Utils";
import OWebLang from "../OWebLang";
export default class OWebDate {
    constructor(date) {
        this.date = date;
    }
    format(langKey, langCode) {
        return OWebLang.toHuman(langKey, this.describe(langCode), langCode);
    }
    describe(langCode) {
        let day_names_short = OWebLang.toHuman("OO_TIME_DAY_NAMES_SHORT", langCode).split(","), day_names_full = OWebLang.toHuman("OO_TIME_DAY_NAMES_FULL", langCode).split(","), month_names_short = OWebLang.toHuman("OO_TIME_MONTH_NAMES_SHORT", langCode).split(","), month_names_full = OWebLang.toHuman("OO_TIME_MONTH_NAMES_FULL", langCode).split(","), date = new Date(this.date), y = date.getYear(), Y = date.getFullYear(), m = date.getMonth(), mm = String(m < 9 ? "0" + (m + 1) : m + 1), d = date.getDate(), l = date.getDay(), ll = l + 1, // l? l : 7,
        L = day_names_full[l], LL = day_names_full[l], D = day_names_short[l], M = month_names_short[m], F = month_names_full[m], H = date.getHours(), i = date.getMinutes(), ii = String(i < 10 ? "0" + i : i), s = date.getSeconds(), ss = String(s < 10 ? "0" + s : s), ms = date.getMilliseconds(), h = (H === 12) ? 12 : H % 12, a = (H < 12) ? "am" : "pm", A = a.toUpperCase();
        return {
            D: D,
            l: l,
            L: L,
            ll: ll,
            LL: LL,
            d: d,
            M: M,
            F: F,
            m: m,
            mm: mm,
            Y: Y,
            y: y,
            h: h,
            H: H,
            i: i,
            ii: ii,
            s: s,
            ss: ss,
            ms: ms,
            a: a,
            A: A
        };
    }
    static fromInputValue(date_str) {
        let val = date_str.replace(/ /g, ""), reg_a = /^(\d{4})[\-\/](\d{1,2})[\-\/](\d{1,2})$/, // standard
        reg_b = /^(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{4})$/; // when browser threat date field as text field (in firefox)
        if (reg_a.test(val)) {
            return new OWebDate(date_str);
        }
        if (reg_b.test(val)) {
            return new OWebDate(`${RegExp.$3}-${RegExp.$2}-${RegExp.$1}`);
        }
        return false;
    }
    static timestamp() {
        return Number(String(Date.now()).slice(0, -3));
    }
}
;
OWebLang.addPlugin("oweb_date", function (data = {}, langCode) {
    if (data["owebDate"]) {
        let t = new OWebDate(data["owebDate"]);
        return Utils.assign(data, t.describe(langCode));
    }
    return data;
}).setLangData("fr", {
    "OO_TIME_DAY_NAMES_SHORT": "dim.,lun.,mar.,mer.,jeu.,ven.,sam.",
    "OO_TIME_DAY_NAMES_FULL": "dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi",
    "OO_TIME_MONTH_NAMES_SHORT": "janv.,f\xe9vr.,mars,avr.,mai,juin,juil.,ao\xfbt,sept.,oct.,nov.,d\xe9c.",
    "OO_TIME_MONTH_NAMES_FULL": "janvier,f\xe9vrier,mars,avril,mai,juin,juillet,ao\xfbt,septembre,octobre,novembre,d\xe9cembre"
}).setLangData("en", {
    "OO_TIME_DAY_NAMES_SHORT": "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
    "OO_TIME_DAY_NAMES_FULL": "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",
    "OO_TIME_MONTH_NAMES_SHORT": "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
    "OO_TIME_MONTH_NAMES_FULL": "January,February,March,April,May,June,July,August,September,October,November,December"
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYkRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcGx1Z2lucy9PV2ViRGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBcUJHO0FBQ0gsT0FBTyxLQUFLLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkMsT0FBTyxRQUFRLE1BQU0sYUFBYSxDQUFDO0FBeUJuQyxNQUFNLENBQUMsT0FBTztJQUViLFlBQTZCLElBQVk7UUFBWixTQUFJLEdBQUosSUFBSSxDQUFRO0lBQ3pDLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBZSxFQUFFLFFBQWdCO1FBQ3ZDLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsUUFBUSxDQUFDLFFBQWlCO1FBQ3pCLElBQUksZUFBZSxHQUFLLFFBQVEsQ0FBQyxPQUFPLENBQUMseUJBQXlCLEVBQUUsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUN2RixjQUFjLEdBQU0sUUFBUSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQ25GLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsMkJBQTJCLEVBQUUsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUN0RixnQkFBZ0IsR0FBSSxRQUFRLENBQUMsT0FBTyxDQUFDLDBCQUEwQixFQUFFLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFDckYsSUFBSSxHQUFnQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQ3ZDLENBQUMsR0FBb0IsSUFBWSxDQUFDLE9BQU8sRUFBRSxFQUMzQyxDQUFDLEdBQW1C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