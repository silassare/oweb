import OWebLang from "../OWebLang";
/**
 * D The day of the week in three letters
 * l (L lowercase) The entire day of the week 0 to 6
 * ll (LL lowercase) The entire day of the week 1 to 7
 * d The day of the month
 * M The name of the month in three or four letters
 * F The full name of the month
 * m The number of the month 0 to 11
 * mm The number of the month 01 to 12
 * Y The year in four digits
 * y The year in two digits
 * h Time from 0 to 12
 * H Time from 0 to 23
 * i The minutes 0 to 59
 * s The seconds 0 to 59
 * a am / pm Display
 * A AM / PM display
 *
 * // OWebDate
 * ii The minutes 00, 01,..., 59
 * ss The seconds 00, 01,..., 59
 */
import Utils from "../utils/Utils";
export default class OWebDate {
    constructor(date) {
        this.date = date;
    }
    format(langKey, langCode) {
        return OWebLang.toHuman(langKey, this.describe(langCode), langCode);
    }
    describe(langCode) {
        let day_names_short = OWebLang.toHuman("OO_TIME_DAY_NAMES_SHORT", langCode).split(","), day_names_full = OWebLang.toHuman("OO_TIME_DAY_NAMES_FULL", langCode).split(","), month_names_short = OWebLang.toHuman("OO_TIME_MONTH_NAMES_SHORT", langCode).split(","), month_names_full = OWebLang.toHuman("OO_TIME_MONTH_NAMES_FULL", langCode).split(","), date = new Date(this.date), y = date.getYear(), Y = date.getFullYear(), m = date.getMonth(), mm = String(m < 9 ? "0" + (m + 1) : m + 1), d = date.getDate(), l = date.getDay(), ll = l + 1, // l? l : 7,
        L = day_names_full[l], LL = day_names_full[l], D = day_names_short[l], M = month_names_short[m], F = month_names_full[m], H = date.getHours(), i = date.getMinutes(), ii = String(i < 10 ? "0" + i : i), s = date.getSeconds(), ss = String(s < 10 ? "0" + s : s), ms = date.getMilliseconds(), h = (H === 12) ? 12 : H % 12, a = (H < 12) ? "am" : "pm", A = a.toUpperCase();
        return {
            D: D,
            l: l,
            L: L,
            ll: ll,
            LL: LL,
            d: d,
            M: M,
            F: F,
            m: m,
            mm: mm,
            Y: Y,
            y: y,
            h: h,
            H: H,
            i: i,
            ii: ii,
            s: s,
            ss: ss,
            ms: ms,
            a: a,
            A: A
        };
    }
    static fromInputValue(date_str) {
        let val = date_str.replace(/ /g, ""), reg_a = /^(\d{4})[\-\/](\d{1,2})[\-\/](\d{1,2})$/, // standard
        reg_b = /^(\d{1,2})[\-\/](\d{1,2})[\-\/](\d{4})$/; // when browser threat date field as text field (in firefox)
        if (reg_a.test(val)) {
            return new OWebDate(date_str);
        }
        if (reg_b.test(val)) {
            return new OWebDate(`${RegExp.$3}-${RegExp.$2}-${RegExp.$1}`);
        }
        return false;
    }
    static timestamp() {
        return Number(String(Date.now()).slice(0, -3));
    }
}
;
OWebLang.addPlugin("oweb_date", function (data = {}, langCode) {
    if (data["owebDate"]) {
        let t = new OWebDate(data["owebDate"]);
        return Utils.assign(data, t.describe(langCode));
    }
    return data;
}).setLangData("fr", {
    "OO_TIME_DAY_NAMES_SHORT": "dim.,lun.,mar.,mer.,jeu.,ven.,sam.",
    "OO_TIME_DAY_NAMES_FULL": "dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi",
    "OO_TIME_MONTH_NAMES_SHORT": "janv.,f\xe9vr.,mars,avr.,mai,juin,juil.,ao\xfbt,sept.,oct.,nov.,d\xe9c.",
    "OO_TIME_MONTH_NAMES_FULL": "janvier,f\xe9vrier,mars,avril,mai,juin,juillet,ao\xfbt,septembre,octobre,novembre,d\xe9cembre"
}).setLangData("en", {
    "OO_TIME_DAY_NAMES_SHORT": "Sun,Mon,Tue,Wed,Thu,Fri,Sat",
    "OO_TIME_DAY_NAMES_FULL": "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",
    "OO_TIME_MONTH_NAMES_SHORT": "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
    "OO_TIME_MONTH_NAMES_FULL": "January,February,March,April,May,June,July,August,September,October,November,December"
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYkRhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcGx1Z2lucy9PV2ViRGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLFFBQVEsTUFBTSxhQUFhLENBQUM7QUFDbkM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXFCRztBQUNILE9BQU8sS0FBSyxNQUFNLGdCQUFnQixDQUFDO0FBeUJuQyxNQUFNLENBQUMsT0FBTztJQUViLFlBQTZCLElBQVk7UUFBWixTQUFJLEdBQUosSUFBSSxDQUFRO0lBQ3pDLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBZSxFQUFFLFFBQWdCO1FBQ3ZDLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBRUQsUUFBUSxDQUFDLFFBQWlCO1FBQ3pCLElBQUksZUFBZSxHQUFLLFFBQVEsQ0FBQyxPQUFPLENBQUMseUJBQXlCLEVBQUUsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUN2RixjQUFjLEdBQU0sUUFBUSxDQUFDLE9BQU8sQ0FBQyx3QkFBd0IsRUFBRSxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQ25GLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsMkJBQTJCLEVBQUUsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUN0RixnQkFBZ0IsR0FBSSxRQUFRLENBQUMsT0FBTyxDQUFDLDBCQUEwQixFQUFFLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFDckYsSUFBSSxHQUFnQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQ3ZDLENBQUMsR0FBb0IsSUFBWSxDQUFDLE9BQU8sRUFBRSxFQUMzQyxDQUFDLEdBQW1CLElBQUksQ0FBQyxXQUFX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biAqIEQgVGhlIGRheSBvZiB0aGUgd2VlayBpbiB0aHJlZSBsZXR0ZXJzXG4gKiBsIChMIGxvd2VyY2FzZSkgVGhlIGVudGlyZSBkYXkgb2YgdGhlIHdlZWsgMCB0byA2XG4gKiBsbCAoTEwgbG93ZXJjYXNlKSBUaGUgZW50aXJlIGRheSBvZiB0aGUgd2VlayAxIHRvIDdcbiAqIGQgVGhlIGRheSBvZiB0aGUgbW9udGhcbiAqIE0gVGhlIG5hbWUgb2YgdGhlIG1vbnRoIGluIHRocmVlIG9yIGZvdXIgbGV0dGVyc1xuICogRiBUaGUgZnVsbCBuYW1lIG9mIHRoZSBtb250aFxuICogbSBUaGUgbnVtYmVyIG9mIHRoZSBtb250aCAwIHRvIDExXG4gKiBtbSBUaGUgbnVtYmVyIG9mIHRoZSBtb250aCAwMSB0byAxMlxuICogWSBUaGUgeWVhciBpbiBmb3VyIGRpZ2l0c1xuICogeSBUaGUgeWVhciBpbiB0d28gZGlnaXRzXG4gKiBoIFRpbWUgZnJvbSAwIHRvIDEyXG4gKiBIIFRpbWUgZnJvbSAwIHRvIDIzXG4gKiBpIFRoZSBtaW51dGVzIDAgdG8gNTlcbiAqIHMgVGhlIHNlY29uZHMgMCB0byA1OVxuICogYSBhbSAvIHBtIERpc3BsYXlcbiAqIEEgQU0gLyBQTSBkaXNwbGF5XG4gKlxuICogLy8gT1dlYkRhdGVcbiAqIGlpIFRoZSBtaW51dGVzIDAwLCAwMSwuLi4sIDU5XG4gKiBzcyBUaGUgc2Vjb25kcyAwMCwgMDEsLi4uLCA1OVxuICovXG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5cbmV4cG9ydCB0eXBlIHREYXRlRGVzYyA9IHtcblx0RDogc3RyaW5nLFxuXHRsOiBudW1iZXIsXG5cdEw6IHN0cmluZyxcblx0bGw6IG51bWJlcixcblx0TEw6IHN0cmluZyxcblx0ZDogbnVtYmVyLFxuXHRNOiBzdHJpbmcsXG5cdEY6IHN0cmluZyxcblx0bTogbnVtYmVyLFxuXHRtbTogc3RyaW5nLFxuXHRZOiBudW1iZXIsXG5cdHk6IG51bWJlcixcblx0aDogbnVtYmVyLFxuXHRIOiBudW1iZXIsXG5cdGk6IG51bWJlcixcblx0aWk6IHN0cmluZyxcblx0czogbnVtYmVyLFxuXHRzczogc3RyaW5nLFxuXHRtczogbnVtYmVyLFxuXHRhOiBzdHJpbmcsXG5cdEE6IHN0cmluZ1xufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9XZWJEYXRlIHtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGRhdGU6IHN0cmluZykge1xuXHR9XG5cblx0Zm9ybWF0KGxhbmdLZXk6IHN0cmluZywgbGFuZ0NvZGU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIE9XZWJMYW5nLnRvSHVtYW4obGFuZ0tleSwgdGhpcy5kZXNjcmliZShsYW5nQ29kZSksIGxhbmdDb2RlKTtcblx0fVxuXG5cdGRlc2NyaWJlKGxhbmdDb2RlPzogc3RyaW5nKTogdERhdGVEZXNjIHtcblx0XHRsZXQgZGF5X25hbWVzX3Nob3J0ICAgPSBPV2ViTGFuZy50b0h1bWFuKFwiT09fVElNRV9EQVlfTkFNRVNfU0hPUlRcIiwgbGFuZ0NvZGUpLnNwbGl0KFwiLFwiKSxcblx0XHRcdGRheV9uYW1lc19mdWxsICAgID0gT1dlYkxhbmcudG9IdW1hbihcIk9PX1RJTUVfREFZX05BTUVTX0ZVTExcIiwgbGFuZ0NvZGUpLnNwbGl0KFwiLFwiKSxcblx0XHRcdG1vbnRoX25hbWVzX3Nob3J0ID0gT1dlYkxhbmcudG9IdW1hbihcIk9PX1RJTUVfTU9OVEhfTkFNRVNfU0hPUlRcIiwgbGFuZ0NvZGUpLnNwbGl0KFwiLFwiKSxcblx0XHRcdG1vbnRoX25hbWVzX2Z1bGwgID0gT1dlYkxhbmcudG9IdW1hbihcIk9PX1RJTUVfTU9OVEhfTkFNRVNfRlVMTFwiLCBsYW5nQ29kZSkuc3BsaXQoXCIsXCIpLFxuXHRcdFx0ZGF0ZSAgICAgICAgICAgICAgPSBuZXcgRGF0ZSh0aGlzLmRhdGUpLFxuXHRcdFx0eTogbnVtYmVyICAgICAgICAgPSAoZGF0ZSBhcyBhbnkpLmdldFllYXIoKSxcblx0XHRcdFk6IG51bWJlciAgICAgICAgID0gZGF0ZS5nZXRGdWxsWWVhcigpLFxuXHRcdFx0bTogbnVtYmVyICAgICAgICAgPSBkYXRlLmdldE1vbnRoKCksXG5cdFx0XHRtbTogc3RyaW5nICAgICAgICA9IFN0cmluZyhtIDwgOSA/IFwiMFwiICsgKG0gKyAxKSA6IG0gKyAxKSxcblx0XHRcdGQ6IG51bWJlciAgICAgICAgID0gZGF0ZS5nZXREYXRlKCksXG5cdFx0XHRsOiBudW1iZXIgICAgICAgICA9IGRhdGUuZ2V0RGF5KCksXG5cdFx0XHRsbDogbnVtYmVyICAgICAgICA9IGwgKyAxLC8vIGw/IGwgOiA3LFxuXHRcdFx0TDogc3RyaW5nICAgICAgICAgPSBkYXlfbmFtZXNfZnVsbFtsXSxcblx0XHRcdExMOiBzdHJpbmcgICAgICAgID0gZGF5X25hbWVzX2Z1bGxbbF0sXG5cdFx0XHREOiBzdHJpbmcgICAgICAgICA9IGRheV9uYW1lc19zaG9ydFtsXSxcblx0XHRcdE06IHN0cmluZyAgICAgICAgID0gbW9udGhfbmFtZXNfc2hvcnRbbV0sXG5cdFx0XHRGOiBzdHJpbmcgICAgICAgICA9IG1vbnRoX25hbWVzX2Z1bGxbbV0sXG5cdFx0XHRIOiBudW1iZXIgICAgICAgICA9IGRhdGUuZ2V0SG91cnMoKSxcblx0XHRcdGk6IG51bWJlciAgICAgICAgID0gZGF0ZS5nZXRNaW51dGVzKCksXG5cdFx0XHRpaTogc3RyaW5nICAgICAgICA9IFN0cmluZyhpIDwgMTAgPyBcIjBcIiArIGkgOiBpKSxcblx0XHRcdHM6IG51bWJlciAgICAgICAgID0gZGF0ZS5nZXRTZWNvbmRzKCksXG5cdFx0XHRzczogc3RyaW5nICAgICAgICA9IFN0cmluZyhzIDwgMTAgPyBcIjBcIiArIHMgOiBzKSxcblx0XHRcdG1zOiBudW1iZXIgICAgICAgID0gZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSxcblx0XHRcdGg6IG51bWJlciAgICAgICAgID0gKEggPT09IDEyKSA/IDEyIDogSCAlIDEyLFxuXHRcdFx0YTogc3RyaW5nICAgICAgICAgPSAoSCA8IDEyKSA/IFwiYW1cIiA6IFwicG1cIixcblx0XHRcdEE6IHN0cmluZyAgICAgICAgID0gYS50b1VwcGVyQ2FzZSgpO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdEQgOiBELFxuXHRcdFx0bCA6IGwsXG5cdFx0XHRMIDogTCxcblx0XHRcdGxsOiBsbCxcblx0XHRcdExMOiBMTCxcblx0XHRcdGQgOiBkLFxuXHRcdFx0TSA6IE0sXG5cdFx0XHRGIDogRixcblx0XHRcdG0gOiBtLFxuXHRcdFx0bW06IG1tLFxuXHRcdFx0WSA6IFksXG5cdFx0XHR5IDogeSxcblx0XHRcdGggOiBoLFxuXHRcdFx0SCA6IEgsXG5cdFx0XHRpIDogaSxcblx0XHRcdGlpOiBpaSxcblx0XHRcdHMgOiBzLFxuXHRcdFx0c3M6IHNzLFxuXHRcdFx0bXM6IG1zLFxuXHRcdFx0YSA6IGEsXG5cdFx0XHRBIDogQVxuXHRcdH07XG5cdH1cblxuXHRzdGF0aWMgZnJvbUlucHV0VmFsdWUoZGF0ZV9zdHI6IHN0cmluZyk6IE9XZWJEYXRlIHwgZmFsc2Uge1xuXHRcdGxldCB2YWwgICA9IGRhdGVfc3RyLnJlcGxhY2UoLyAvZywgXCJcIiksXG5cdFx0XHRyZWdfYSA9IC9eKFxcZHs0fSlbXFwtXFwvXShcXGR7MSwyfSlbXFwtXFwvXShcXGR7MSwyfSkkLywvLyBzdGFuZGFyZFxuXHRcdFx0cmVnX2IgPSAvXihcXGR7MSwyfSlbXFwtXFwvXShcXGR7MSwyfSlbXFwtXFwvXShcXGR7NH0pJC87Ly8gd2hlbiBicm93c2VyIHRocmVhdCBkYXRlIGZpZWxkIGFzIHRleHQgZmllbGQgKGluIGZpcmVmb3gpXG5cblx0XHRpZiAocmVnX2EudGVzdCh2YWwpKSB7XG5cdFx0XHRyZXR1cm4gbmV3IE9XZWJEYXRlKGRhdGVfc3RyKTtcblx0XHR9XG5cdFx0aWYgKHJlZ19iLnRlc3QodmFsKSkge1xuXHRcdFx0cmV0dXJuIG5ldyBPV2ViRGF0ZShgJHtSZWdFeHAuJDN9LSR7UmVnRXhwLiQyfS0ke1JlZ0V4cC4kMX1gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRzdGF0aWMgdGltZXN0YW1wKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIE51bWJlcihTdHJpbmcoRGF0ZS5ub3coKSkuc2xpY2UoMCwgLTMpKTtcblx0fVxufTtcblxuT1dlYkxhbmcuYWRkUGx1Z2luKFwib3dlYl9kYXRlXCIsIGZ1bmN0aW9uIChkYXRhOiBhbnkgPSB7fSwgbGFuZ0NvZGU6IHN0cmluZykge1xuXHRpZiAoZGF0YVtcIm93ZWJEYXRlXCJdKSB7XG5cdFx0bGV0IHQgPSBuZXcgT1dlYkRhdGUoZGF0YVtcIm93ZWJEYXRlXCJdKTtcblx0XHRyZXR1cm4gVXRpbHMuYXNzaWduKGRhdGEsIHQuZGVzY3JpYmUobGFuZ0NvZGUpKTtcblx0fVxuXG5cdHJldHVybiBkYXRhO1xufSkuc2V0TGFuZ0RhdGEoXCJmclwiLCB7XG5cdFwiT09fVElNRV9EQVlfTkFNRVNfU0hPUlRcIiAgOiBcImRpbS4sbHVuLixtYXIuLG1lci4samV1Lix2ZW4uLHNhbS5cIixcblx0XCJPT19USU1FX0RBWV9OQU1FU19GVUxMXCIgICA6IFwiZGltYW5jaGUsbHVuZGksbWFyZGksbWVyY3JlZGksamV1ZGksdmVuZHJlZGksc2FtZWRpXCIsXG5cdFwiT09fVElNRV9NT05USF9OQU1FU19TSE9SVFwiOiBcImphbnYuLGZcXHhlOXZyLixtYXJzLGF2ci4sbWFpLGp1aW4sanVpbC4sYW9cXHhmYnQsc2VwdC4sb2N0Lixub3YuLGRcXHhlOWMuXCIsXG5cdFwiT09fVElNRV9NT05USF9OQU1FU19GVUxMXCIgOiBcImphbnZpZXIsZlxceGU5dnJpZXIsbWFycyxhdnJpbCxtYWksanVpbixqdWlsbGV0LGFvXFx4ZmJ0LHNlcHRlbWJyZSxvY3RvYnJlLG5vdmVtYnJlLGRcXHhlOWNlbWJyZVwiXG59KS5zZXRMYW5nRGF0YShcImVuXCIsIHtcblx0XCJPT19USU1FX0RBWV9OQU1FU19TSE9SVFwiICA6IFwiU3VuLE1vbixUdWUsV2VkLFRodSxGcmksU2F0XCIsXG5cdFwiT09fVElNRV9EQVlfTkFNRVNfRlVMTFwiICAgOiBcIlN1bmRheSxNb25kYXksVHVlc2RheSxXZWRuZXNkYXksVGh1cnNkYXksRnJpZGF5LFNhdHVyZGF5XCIsXG5cdFwiT09fVElNRV9NT05USF9OQU1FU19TSE9SVFwiOiBcIkphbixGZWIsTWFyLEFwcixNYXksSnVuLEp1bCxBdWcsU2VwLE9jdCxOb3YsRGVjXCIsXG5cdFwiT09fVElNRV9NT05USF9OQU1FU19GVUxMXCIgOiBcIkphbnVhcnksRmVicnVhcnksTWFyY2gsQXByaWwsTWF5LEp1bmUsSnVseSxBdWd1c3QsU2VwdGVtYmVyLE9jdG9iZXIsTm92ZW1iZXIsRGVjZW1iZXJcIlxufSk7Il19