import OWebEvent from '../OWebEvent';
import { id } from '../utils/Utils';
export default class OWebSignUp extends OWebEvent {
    constructor(appContext) {
        super();
        this.appContext = appContext;
    }
    stepStart(form) {
        const ofv = this.appContext.getFormValidator(form, ['phone']);
        if (ofv.validate()) {
            const formData = ofv.getFormData(['phone', 'cc2']);
            formData.set('step', String(OWebSignUp.SIGN_UP_STEP_START));
            this._sendForm(form, formData, OWebSignUp.SIGN_UP_STEP_VALIDATE);
        }
    }
    stepValidate(form) {
        const ofv = this.appContext.getFormValidator(form, ['code']);
        if (ofv.validate()) {
            const code = ofv.getField('code');
            this._sendForm(form, {
                step: OWebSignUp.SIGN_UP_STEP_VALIDATE,
                code,
            }, OWebSignUp.SIGN_UP_STEP_END);
        }
    }
    stepEnd(form) {
        const required = ['uname', 'pass', 'vpass', 'birth_date', 'gender'], excluded = [];
        let mailInput, agreeChk, ofv, formData;
        mailInput = form.querySelector('input[name=email]');
        if (mailInput) {
            if (!mailInput.value.trim().length) {
                excluded.push('email');
            }
            else {
                required.push('email');
            }
        }
        ofv = this.appContext.getFormValidator(form, required, excluded);
        if (ofv.validate()) {
            agreeChk = form.querySelector('input[name=oweb_signup_cgu_agree_checkbox]');
            if (agreeChk && !agreeChk.checked) {
                const error = {
                    error: 1,
                    msg: 'OZ_ERROR_SHOULD_ACCEPT_CGU',
                    utime: 0,
                };
                this.trigger(OWebSignUp.EVT_SIGN_UP_ERROR, [error]);
                return false;
            }
            formData = ofv.getFormData(required);
            formData.set('step', String(OWebSignUp.SIGN_UP_STEP_END));
            this._sendForm(form, formData);
        }
    }
    onError(handler) {
        return this.on(OWebSignUp.EVT_SIGN_UP_ERROR, handler);
    }
    onNextStep(handler) {
        return this.on(OWebSignUp.EVT_SIGN_UP_NEXT_STEP, handler);
    }
    onSuccess(handler) {
        return this.on(OWebSignUp.EVT_SIGN_UP_SUCCESS, handler);
    }
    _sendForm(form, data, nextStep) {
        const m = this, url = this.appContext.url.get('OZ_SERVER_SIGNUP_SERVICE');
        this.appContext.request('POST', url, data, function (response) {
            if (nextStep) {
                m.trigger(OWebSignUp.EVT_SIGN_UP_NEXT_STEP, [
                    response,
                    nextStep,
                ]);
            }
            else {
                m.trigger(OWebSignUp.EVT_SIGN_UP_SUCCESS, [response]);
            }
        }, function (response) {
            m.trigger(OWebSignUp.EVT_SIGN_UP_ERROR, [response]);
        }, true);
    }
}
OWebSignUp.SELF = id();
OWebSignUp.EVT_SIGN_UP_NEXT_STEP = id();
OWebSignUp.EVT_SIGN_UP_SUCCESS = id();
OWebSignUp.EVT_SIGN_UP_ERROR = id();
OWebSignUp.SIGN_UP_STEP_START = 1;
OWebSignUp.SIGN_UP_STEP_VALIDATE = 2;
OWebSignUp.SIGN_UP_STEP_END = 3;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYlNpZ25VcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wbHVnaW5zL09XZWJTaWduVXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQ3JDLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVwQyxNQUFNLENBQUMsT0FBTyxPQUFPLFVBQVcsU0FBUSxTQUFTO0lBVWhELFlBQTZCLFVBQW1CO1FBQy9DLEtBQUssRUFBRSxDQUFDO1FBRG9CLGVBQVUsR0FBVixVQUFVLENBQVM7SUFFaEQsQ0FBQztJQUVELFNBQVMsQ0FBQyxJQUFxQjtRQUM5QixNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFFOUQsSUFBSSxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUU7WUFDbkIsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25ELFFBQVEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1lBQzVELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMscUJBQXFCLENBQUMsQ0FBQztTQUNqRTtJQUNGLENBQUM7SUFFRCxZQUFZLENBQUMsSUFBcUI7UUFDakMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBRTdELElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRSxFQUFFO1lBQ25CLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7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Z0JBQ04sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2FBQ3REO1FBQ0YsQ0FBQyxFQUNELFVBQVUsUUFBYTtZQUN0QixDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDckQsQ0FBQyxFQUNELElBQUksQ0FDSixDQUFDO0lBQ0gsQ0FBQzs7QUF2SGUsZUFBSSxHQUFHLEVBQUUsRUFBRSxDQUFDO0FBQ1osZ0NBQXFCLEdBQUcsRUFBRSxFQUFFLENBQUM7QUFDN0IsOEJBQW1CLEdBQUcsRUFBRSxFQUFFLENBQUM7QUFDM0IsNEJBQWlCLEdBQUcsRUFBRSxFQUFFLENBQUM7QUFFekIsNkJBQWtCLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZCLGdDQUFxQixHQUFHLENBQUMsQ0FBQztBQUMxQiwyQkFBZ0IsR0FBRyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT1dlYkFwcCBmcm9tICcuLi9PV2ViQXBwJztcclxuaW1wb3J0IHsgSUNvbVJlc3BvbnNlIH0gZnJvbSAnLi4vT1dlYkNvbSc7XHJcbmltcG9ydCBPV2ViRXZlbnQgZnJvbSAnLi4vT1dlYkV2ZW50JztcclxuaW1wb3J0IHsgaWQgfSBmcm9tICcuLi91dGlscy9VdGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPV2ViU2lnblVwIGV4dGVuZHMgT1dlYkV2ZW50IHtcclxuXHRzdGF0aWMgcmVhZG9ubHkgU0VMRiA9IGlkKCk7XHJcblx0c3RhdGljIHJlYWRvbmx5IEVWVF9TSUdOX1VQX05FWFRfU1RFUCA9IGlkKCk7XHJcblx0c3RhdGljIHJlYWRvbmx5IEVWVF9TSUdOX1VQX1NVQ0NFU1MgPSBpZCgpO1xyXG5cdHN0YXRpYyByZWFkb25seSBFVlRfU0lHTl9VUF9FUlJPUiA9IGlkKCk7XHJcblxyXG5cdHN0YXRpYyByZWFkb25seSBTSUdOX1VQX1NURVBfU1RBUlQgPSAxO1xyXG5cdHN0YXRpYyByZWFkb25seSBTSUdOX1VQX1NURVBfVkFMSURBVEUgPSAyO1xyXG5cdHN0YXRpYyByZWFkb25seSBTSUdOX1VQX1NURVBfRU5EID0gMztcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhcHBDb250ZXh0OiBPV2ViQXBwKSB7XHJcblx0XHRzdXBlcigpO1xyXG5cdH1cclxuXHJcblx0c3RlcFN0YXJ0KGZvcm06IEhUTUxGb3JtRWxlbWVudCkge1xyXG5cdFx0Y29uc3Qgb2Z2ID0gdGhpcy5hcHBDb250ZXh0LmdldEZvcm1WYWxpZGF0b3IoZm9ybSwgWydwaG9uZSddKTtcclxuXHJcblx0XHRpZiAob2Z2LnZhbGlkYXRlKCkpIHtcclxuXHRcdFx0Y29uc3QgZm9ybURhdGEgPSBvZnYuZ2V0Rm9ybURhdGEoWydwaG9uZScsICdjYzInXSk7XHJcblx0XHRcdGZvcm1EYXRhLnNldCgnc3RlcCcsIFN0cmluZyhPV2ViU2lnblVwLlNJR05fVVBfU1RFUF9TVEFSVCkpO1xyXG5cdFx0XHR0aGlzLl9zZW5kRm9ybShmb3JtLCBmb3JtRGF0YSwgT1dlYlNpZ25VcC5TSUdOX1VQX1NURVBfVkFMSURBVEUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3RlcFZhbGlkYXRlKGZvcm06IEhUTUxGb3JtRWxlbWVudCkge1xyXG5cdFx0Y29uc3Qgb2Z2ID0gdGhpcy5hcHBDb250ZXh0LmdldEZvcm1WYWxpZGF0b3IoZm9ybSwgWydjb2RlJ10pO1xyXG5cclxuXHRcdGlmIChvZnYudmFsaWRhdGUoKSkge1xyXG5cdFx0XHRjb25zdCBjb2RlID0gb2Z2LmdldEZpZWxkKCdjb2RlJyk7XHJcblxyXG5cdFx0XHR0aGlzLl9zZW5kRm9ybShcclxuXHRcdFx0XHRmb3JtLFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHN0ZXA6IE9XZWJTaWduVXAuU0lHTl9VUF9TVEVQX1ZBTElEQVRFLFxyXG5cdFx0XHRcdFx0Y29kZSxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdE9XZWJTaWduVXAuU0lHTl9VUF9TVEVQX0VORCxcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHN0ZXBFbmQoZm9ybTogSFRNTEZvcm1FbGVtZW50KSB7XHJcblx0XHRjb25zdCByZXF1aXJlZCA9IFsndW5hbWUnLCAncGFzcycsICd2cGFzcycsICdiaXJ0aF9kYXRlJywgJ2dlbmRlciddLFxyXG5cdFx0XHRleGNsdWRlZCA9IFtdO1xyXG5cdFx0bGV0IG1haWxJbnB1dDogSFRNTElucHV0RWxlbWVudCB8IG51bGwsXHJcblx0XHRcdGFncmVlQ2hrOiBIVE1MSW5wdXRFbGVtZW50IHwgbnVsbCxcclxuXHRcdFx0b2Z2LFxyXG5cdFx0XHRmb3JtRGF0YTtcclxuXHJcblx0XHRtYWlsSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ZW1haWxdJyk7XHJcblxyXG5cdFx0aWYgKG1haWxJbnB1dCkge1xyXG5cdFx0XHRpZiAoIW1haWxJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoKSB7XHJcblx0XHRcdFx0ZXhjbHVkZWQucHVzaCgnZW1haWwnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXF1aXJlZC5wdXNoKCdlbWFpbCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0b2Z2ID0gdGhpcy5hcHBDb250ZXh0LmdldEZvcm1WYWxpZGF0b3IoZm9ybSwgcmVxdWlyZWQsIGV4Y2x1ZGVkKTtcclxuXHJcblx0XHRpZiAob2Z2LnZhbGlkYXRlKCkpIHtcclxuXHRcdFx0YWdyZWVDaGsgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0J2lucHV0W25hbWU9b3dlYl9zaWdudXBfY2d1X2FncmVlX2NoZWNrYm94XScsXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHRpZiAoYWdyZWVDaGsgJiYgIWFncmVlQ2hrLmNoZWNrZWQpIHtcclxuXHRcdFx0XHRjb25zdCBlcnJvcjogSUNvbVJlc3BvbnNlID0ge1xyXG5cdFx0XHRcdFx0ZXJyb3I6IDEsXHJcblx0XHRcdFx0XHRtc2c6ICdPWl9FUlJPUl9TSE9VTERfQUNDRVBUX0NHVScsXHJcblx0XHRcdFx0XHR1dGltZTogMCxcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdHRoaXMudHJpZ2dlcihPV2ViU2lnblVwLkVWVF9TSUdOX1VQX0VSUk9SLCBbZXJyb3JdKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGZvcm1EYXRhID0gb2Z2LmdldEZvcm1EYXRhKHJlcXVpcmVkKTtcclxuXHRcdFx0Zm9ybURhdGEuc2V0KCdzdGVwJywgU3RyaW5nKE9XZWJTaWduVXAuU0lHTl9VUF9TVEVQX0VORCkpO1xyXG5cclxuXHRcdFx0dGhpcy5fc2VuZEZvcm0oZm9ybSwgZm9ybURhdGEpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0b25FcnJvcihoYW5kbGVyOiAodGhpczogdGhpcywgcmVzcG9uc2U6IElDb21SZXNwb25zZSkgPT4gdm9pZCk6IHRoaXMge1xyXG5cdFx0cmV0dXJuIHRoaXMub24oT1dlYlNpZ25VcC5FVlRfU0lHTl9VUF9FUlJPUiwgaGFuZGxlcik7XHJcblx0fVxyXG5cclxuXHRvbk5leHRTdGVwKFxyXG5cdFx0aGFuZGxlcjogKHRoaXM6IHRoaXMsIHJlc3BvbnNlOiBJQ29tUmVzcG9uc2UsIHN0ZXA6IG51bWJlcikgPT4gdm9pZCxcclxuXHQpOiB0aGlzIHtcclxuXHRcdHJldHVybiB0aGlzLm9uKE9XZWJTaWduVXAuRVZUX1NJR05fVVBfTkVYVF9TVEVQLCBoYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdG9uU3VjY2VzcyhoYW5kbGVyOiAodGhpczogdGhpcywgcmVzcG9uc2U6IElDb21SZXNwb25zZSkgPT4gdm9pZCk6IHRoaXMge1xyXG5cdFx0cmV0dXJuIHRoaXMub24oT1dlYlNpZ25VcC5FVlRfU0lHTl9VUF9TVUNDRVNTLCBoYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdF9zZW5kRm9ybShmb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGRhdGE6IGFueSwgbmV4dFN0ZXA/OiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IG0gPSB0aGlzLFxyXG5cdFx0XHR1cmwgPSB0aGlzLmFwcENvbnRleHQudXJsLmdldCgnT1pfU0VSVkVSX1NJR05VUF9TRVJWSUNFJyk7XHJcblxyXG5cdFx0dGhpcy5hcHBDb250ZXh0LnJlcXVlc3QoXHJcblx0XHRcdCdQT1NUJyxcclxuXHRcdFx0dXJsLFxyXG5cdFx0XHRkYXRhLFxyXG5cdFx0XHRmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xyXG5cdFx0XHRcdGlmIChuZXh0U3RlcCkge1xyXG5cdFx0XHRcdFx0bS50cmlnZ2VyKE9XZWJTaWduVXAuRVZUX1NJR05fVVBfTkVYVF9TVEVQLCBbXHJcblx0XHRcdFx0XHRcdHJlc3BvbnNlLFxyXG5cdFx0XHRcdFx0XHRuZXh0U3RlcCxcclxuXHRcdFx0XHRcdF0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRtLnRyaWdnZXIoT1dlYlNpZ25VcC5FVlRfU0lHTl9VUF9TVUNDRVNTLCBbcmVzcG9uc2VdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGZ1bmN0aW9uIChyZXNwb25zZTogYW55KSB7XHJcblx0XHRcdFx0bS50cmlnZ2VyKE9XZWJTaWduVXAuRVZUX1NJR05fVVBfRVJST1IsIFtyZXNwb25zZV0pO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0cnVlLFxyXG5cdFx0KTtcclxuXHR9XHJcbn1cclxuIl19