import OWebEvent from "../OWebEvent";
import Utils from "../utils/Utils";
export default class OWebLogout extends OWebEvent {
    constructor(app_context) {
        super();
        this.app_context = app_context;
    }
    onError(handler) {
        return this.on(OWebLogout.EVT_LOGOUT_ERROR, handler);
    }
    onSuccess(handler) {
        return this.on(OWebLogout.EVT_LOGOUT_SUCCESS, handler);
    }
    logout() {
        let m = this, url = this.app_context.url.get("OZ_SERVER_LOGOUT_SERVICE");
        this.app_context.request("POST", url, null, function (response) {
            m.trigger(OWebLogout.EVT_LOGOUT_SUCCESS, [response]);
        }, function (response) {
            m.trigger(OWebLogout.EVT_LOGOUT_ERROR, [response]);
        }, true);
    }
}
OWebLogout.SELF = Utils.id();
OWebLogout.EVT_LOGOUT_ERROR = Utils.id();
OWebLogout.EVT_LOGOUT_SUCCESS = Utils.id();
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYkxvZ291dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wbHVnaW5zL09XZWJMb2dvdXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBQ3JDLE9BQU8sS0FBSyxNQUFNLGdCQUFnQixDQUFDO0FBRW5DLE1BQU0sQ0FBQyxPQUFPLGlCQUFrQixTQUFRLFNBQVM7SUFNaEQsWUFBNkIsV0FBb0I7UUFDaEQsS0FBSyxFQUFFLENBQUM7UUFEb0IsZ0JBQVcsR0FBWCxXQUFXLENBQVM7SUFFakQsQ0FBQztJQUVELE9BQU8sQ0FBQyxPQUF5QztRQUNoRCxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxTQUFTLENBQUMsT0FBeUM7UUFDbEQsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsTUFBTTtRQUNMLElBQUksQ0FBQyxHQUFLLElBQUksRUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFFNUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsVUFBVSxRQUFhO1lBQ2xFLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGtCQUFrQixFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN0RCxDQUFDLEVBQUUsVUFBVSxRQUFhO1lBQ3pCLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNwRCxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDVixDQUFDOztBQXpCZSxlQUFJLEdBQWlCLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUNoQywyQkFBZ0IsR0FBSyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUM7QUFDaEMsNkJBQWtCLEdBQUcsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBd0JoRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9XZWJBcHAgZnJvbSBcIi4uL09XZWJBcHBcIjtcbmltcG9ydCB7aUNvbVJlc3BvbnNlfSBmcm9tIFwiLi4vT1dlYkNvbVwiO1xuaW1wb3J0IE9XZWJFdmVudCBmcm9tIFwiLi4vT1dlYkV2ZW50XCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9XZWJMb2dvdXQgZXh0ZW5kcyBPV2ViRXZlbnQge1xuXG5cdHN0YXRpYyByZWFkb25seSBTRUxGICAgICAgICAgICAgICAgPSBVdGlscy5pZCgpO1xuXHRzdGF0aWMgcmVhZG9ubHkgRVZUX0xPR09VVF9FUlJPUiAgID0gVXRpbHMuaWQoKTtcblx0c3RhdGljIHJlYWRvbmx5IEVWVF9MT0dPVVRfU1VDQ0VTUyA9IFV0aWxzLmlkKCk7XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBhcHBfY29udGV4dDogT1dlYkFwcCkge1xuXHRcdHN1cGVyKCk7XG5cdH1cblxuXHRvbkVycm9yKGhhbmRsZXI6IChyZXNwb25zZTogaUNvbVJlc3BvbnNlKSA9PiB2b2lkKTogdGhpcyB7XG5cdFx0cmV0dXJuIHRoaXMub24oT1dlYkxvZ291dC5FVlRfTE9HT1VUX0VSUk9SLCBoYW5kbGVyKTtcblx0fVxuXG5cdG9uU3VjY2VzcyhoYW5kbGVyOiAocmVzcG9uc2U6IGlDb21SZXNwb25zZSkgPT4gdm9pZCk6IHRoaXMge1xuXHRcdHJldHVybiB0aGlzLm9uKE9XZWJMb2dvdXQuRVZUX0xPR09VVF9TVUNDRVNTLCBoYW5kbGVyKTtcblx0fVxuXG5cdGxvZ291dCgpIHtcblx0XHRsZXQgbSAgID0gdGhpcyxcblx0XHRcdHVybCA9IHRoaXMuYXBwX2NvbnRleHQudXJsLmdldChcIk9aX1NFUlZFUl9MT0dPVVRfU0VSVklDRVwiKTtcblxuXHRcdHRoaXMuYXBwX2NvbnRleHQucmVxdWVzdChcIlBPU1RcIiwgdXJsLCBudWxsLCBmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xuXHRcdFx0bS50cmlnZ2VyKE9XZWJMb2dvdXQuRVZUX0xPR09VVF9TVUNDRVNTLCBbcmVzcG9uc2VdKTtcblx0XHR9LCBmdW5jdGlvbiAocmVzcG9uc2U6IGFueSkge1xuXHRcdFx0bS50cmlnZ2VyKE9XZWJMb2dvdXQuRVZUX0xPR09VVF9FUlJPUiwgW3Jlc3BvbnNlXSk7XG5cdFx0fSwgdHJ1ZSk7XG5cdH1cbn07XG4iXX0=