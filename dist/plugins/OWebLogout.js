import OWebEvent from "../OWebEvent";
export default class OWebLogout extends OWebEvent {
    constructor(app_context) {
        super();
        this.app_context = app_context;
    }
    onError(handler) {
        return this.on(OWebLogout.EVT_LOGOUT_ERROR, handler);
    }
    onSuccess(handler) {
        return this.on(OWebLogout.EVT_LOGOUT_SUCCESS, handler);
    }
    logout() {
        let m = this, url = this.app_context.url.get("OZ_SERVER_LOGOUT_SERVICE");
        this.app_context.request("POST", url, null, function (response) {
            m.trigger(OWebLogout.EVT_LOGOUT_SUCCESS, [response]);
        }, function (response) {
            m.trigger(OWebLogout.EVT_LOGOUT_ERROR, [response]);
        }, true);
    }
}
OWebLogout.EVT_LOGOUT_ERROR = "OWebLogout:error";
OWebLogout.EVT_LOGOUT_SUCCESS = "OWebLogout:success";
OWebLogout.SELF = "OWebLogout";
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYkxvZ291dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9wbHVnaW5zL09XZWJMb2dvdXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxTQUFTLE1BQU0sY0FBYyxDQUFDO0FBRXJDLE1BQU0sQ0FBQyxPQUFPLGlCQUFrQixTQUFRLFNBQVM7SUFLaEQsWUFBNkIsV0FBb0I7UUFDaEQsS0FBSyxFQUFFLENBQUM7UUFEb0IsZ0JBQVcsR0FBWCxXQUFXLENBQVM7SUFFakQsQ0FBQztJQUVELE9BQU8sQ0FBQyxPQUF5QztRQUNoRCxPQUFPLElBQUksQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxTQUFTLENBQUMsT0FBeUM7UUFDbEQsT0FBTyxJQUFJLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDO0lBRUQsTUFBTTtRQUNMLElBQUksQ0FBQyxHQUFLLElBQUksRUFDYixHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUM7UUFFNUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsVUFBVSxRQUFhO1lBQ2xFLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGtCQUFrQixFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN0RCxDQUFDLEVBQUUsVUFBVSxRQUFhO1lBQ3pCLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNwRCxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDVixDQUFDOztBQXpCZSwyQkFBZ0IsR0FBSyxrQkFBa0IsQ0FBQztBQUN4Qyw2QkFBa0IsR0FBRyxvQkFBb0IsQ0FBQztBQUMxQyxlQUFJLEdBQWlCLFlBQVksQ0FBQztBQXdCbEQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPV2ViQXBwIGZyb20gXCIuLi9PV2ViQXBwXCI7XG5pbXBvcnQge2lDb21SZXNwb25zZX0gZnJvbSBcIi4uL09XZWJDb21cIjtcbmltcG9ydCBPV2ViRXZlbnQgZnJvbSBcIi4uL09XZWJFdmVudFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPV2ViTG9nb3V0IGV4dGVuZHMgT1dlYkV2ZW50IHtcblx0c3RhdGljIHJlYWRvbmx5IEVWVF9MT0dPVVRfRVJST1IgICA9IFwiT1dlYkxvZ291dDplcnJvclwiO1xuXHRzdGF0aWMgcmVhZG9ubHkgRVZUX0xPR09VVF9TVUNDRVNTID0gXCJPV2ViTG9nb3V0OnN1Y2Nlc3NcIjtcblx0c3RhdGljIHJlYWRvbmx5IFNFTEYgICAgICAgICAgICAgICA9IFwiT1dlYkxvZ291dFwiO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYXBwX2NvbnRleHQ6IE9XZWJBcHApIHtcblx0XHRzdXBlcigpO1xuXHR9XG5cblx0b25FcnJvcihoYW5kbGVyOiAocmVzcG9uc2U6IGlDb21SZXNwb25zZSkgPT4gdm9pZCk6IHRoaXMge1xuXHRcdHJldHVybiB0aGlzLm9uKE9XZWJMb2dvdXQuRVZUX0xPR09VVF9FUlJPUiwgaGFuZGxlcik7XG5cdH1cblxuXHRvblN1Y2Nlc3MoaGFuZGxlcjogKHJlc3BvbnNlOiBpQ29tUmVzcG9uc2UpID0+IHZvaWQpOiB0aGlzIHtcblx0XHRyZXR1cm4gdGhpcy5vbihPV2ViTG9nb3V0LkVWVF9MT0dPVVRfU1VDQ0VTUywgaGFuZGxlcik7XG5cdH1cblxuXHRsb2dvdXQoKSB7XG5cdFx0bGV0IG0gICA9IHRoaXMsXG5cdFx0XHR1cmwgPSB0aGlzLmFwcF9jb250ZXh0LnVybC5nZXQoXCJPWl9TRVJWRVJfTE9HT1VUX1NFUlZJQ0VcIik7XG5cblx0XHR0aGlzLmFwcF9jb250ZXh0LnJlcXVlc3QoXCJQT1NUXCIsIHVybCwgbnVsbCwgZnVuY3Rpb24gKHJlc3BvbnNlOiBhbnkpIHtcblx0XHRcdG0udHJpZ2dlcihPV2ViTG9nb3V0LkVWVF9MT0dPVVRfU1VDQ0VTUywgW3Jlc3BvbnNlXSk7XG5cdFx0fSwgZnVuY3Rpb24gKHJlc3BvbnNlOiBhbnkpIHtcblx0XHRcdG0udHJpZ2dlcihPV2ViTG9nb3V0LkVWVF9MT0dPVVRfRVJST1IsIFtyZXNwb25zZV0pO1xuXHRcdH0sIHRydWUpO1xuXHR9XG59O1xuIl19