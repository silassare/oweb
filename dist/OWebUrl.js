"use strict";
import PathResolver from "./utils/PathResolver";
let isServerUrl = function (url_key) {
    return /^OZ_SERVER_/.test(url_key);
};
let isLocalUrl = function (url_key) {
    return /^OW_LOCAL_/.test(url_key);
};
export default class OWebUrl {
    constructor(context, url_list) {
        this._url_list = url_list;
        this._url_local_base = context.configs.get("OW_APP_LOCAL_BASE_URL");
        this._url_server_base = context.configs.get("OZ_API_BASE_URL");
        console.log("[OWebUrl] ready!");
    }
    get(url_key) {
        let url = this._url_list[url_key];
        if (!url) {
            throw new Error(`[OWebUrl] url key "${url_key}" is not defined.`);
        }
        if (isServerUrl(url_key))
            return this.resolveServer(url);
        if (isLocalUrl(url_key))
            return this.resolveLocal(url);
        return url;
    }
    resolveLocal(url) {
        return PathResolver.resolve(this._url_local_base, url);
    }
    resolveServer(url) {
        return PathResolver.resolve(this._url_server_base, url);
    }
}
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYlVybC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9PV2ViVXJsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUdiLE9BQU8sWUFBWSxNQUFNLHNCQUFzQixDQUFDO0FBRWhELElBQUksV0FBVyxHQUFHLFVBQVUsT0FBZTtJQUMxQyxPQUFPLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDO0FBRUYsSUFBSSxVQUFVLEdBQUcsVUFBVSxPQUFlO0lBQ3pDLE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNuQyxDQUFDLENBQUM7QUFJRixNQUFNLENBQUMsT0FBTztJQUtiLFlBQVksT0FBZ0IsRUFBRSxRQUFrQjtRQUMvQyxJQUFJLENBQUMsU0FBUyxHQUFVLFFBQVEsQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDckUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFFL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxHQUFHLENBQUMsT0FBZTtRQUNsQixJQUFJLEdBQUcsR0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDVCxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixPQUFPLG1CQUFtQixDQUFDLENBQUM7U0FDbEU7UUFFRCxJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekQsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXZELE9BQU8sR0FBRyxDQUFDO0lBQ1osQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFXO1FBQ3ZCLE9BQU8sWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxhQUFhLENBQUMsR0FBVztRQUN4QixPQUFPLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3pELENBQUM7Q0FDRDtBQUFBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCBPV2ViQXBwIGZyb20gXCIuL09XZWJBcHBcIjtcclxuaW1wb3J0IFBhdGhSZXNvbHZlciBmcm9tIFwiLi91dGlscy9QYXRoUmVzb2x2ZXJcIjtcclxuXHJcbmxldCBpc1NlcnZlclVybCA9IGZ1bmN0aW9uICh1cmxfa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gL15PWl9TRVJWRVJfLy50ZXN0KHVybF9rZXkpO1xyXG59O1xyXG5cclxubGV0IGlzTG9jYWxVcmwgPSBmdW5jdGlvbiAodXJsX2tleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIC9eT1dfTE9DQUxfLy50ZXN0KHVybF9rZXkpO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgdFVybExpc3QgPSB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT1dlYlVybCB7XHJcblx0cHJpdmF0ZSByZWFkb25seSBfdXJsX2xpc3Q6IHRVcmxMaXN0O1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3VybF9sb2NhbF9iYXNlOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSByZWFkb25seSBfdXJsX3NlcnZlcl9iYXNlOiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGNvbnRleHQ6IE9XZWJBcHAsIHVybF9saXN0OiB0VXJsTGlzdCkge1xyXG5cdFx0dGhpcy5fdXJsX2xpc3QgICAgICAgID0gdXJsX2xpc3Q7XHJcblx0XHR0aGlzLl91cmxfbG9jYWxfYmFzZSAgPSBjb250ZXh0LmNvbmZpZ3MuZ2V0KFwiT1dfQVBQX0xPQ0FMX0JBU0VfVVJMXCIpO1xyXG5cdFx0dGhpcy5fdXJsX3NlcnZlcl9iYXNlID0gY29udGV4dC5jb25maWdzLmdldChcIk9aX0FQSV9CQVNFX1VSTFwiKTtcclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIltPV2ViVXJsXSByZWFkeSFcIik7XHJcblx0fVxyXG5cclxuXHRnZXQodXJsX2tleTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdGxldCB1cmw6IHN0cmluZyA9IHRoaXMuX3VybF9saXN0W3VybF9rZXldO1xyXG5cclxuXHRcdGlmICghdXJsKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgW09XZWJVcmxdIHVybCBrZXkgXCIke3VybF9rZXl9XCIgaXMgbm90IGRlZmluZWQuYCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGlzU2VydmVyVXJsKHVybF9rZXkpKSByZXR1cm4gdGhpcy5yZXNvbHZlU2VydmVyKHVybCk7XHJcblx0XHRpZiAoaXNMb2NhbFVybCh1cmxfa2V5KSkgcmV0dXJuIHRoaXMucmVzb2x2ZUxvY2FsKHVybCk7XHJcblxyXG5cdFx0cmV0dXJuIHVybDtcclxuXHR9XHJcblxyXG5cdHJlc29sdmVMb2NhbCh1cmw6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gUGF0aFJlc29sdmVyLnJlc29sdmUodGhpcy5fdXJsX2xvY2FsX2Jhc2UsIHVybCk7XHJcblx0fVxyXG5cclxuXHRyZXNvbHZlU2VydmVyKHVybDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBQYXRoUmVzb2x2ZXIucmVzb2x2ZSh0aGlzLl91cmxfc2VydmVyX2Jhc2UsIHVybCk7XHJcblx0fVxyXG59OyJdfQ==