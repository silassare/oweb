import PathResolver from "./utils/PathResolver";
let isServerUrl = function (url_key) {
    return /^OZ_SERVER_/.test(url_key);
};
let isLocalUrl = function (url_key) {
    return /^OW_LOCAL_/.test(url_key);
};
export default class OWebUrl {
    constructor(context, url_list) {
        this._url_list = url_list;
        this._url_local_base = context.configs.get("OW_APP_LOCAL_BASE_URL");
        this._url_server_base = context.configs.get("OZ_API_BASE_URL");
        console.log("[OWebUrl] ready!");
    }
    get(url_key) {
        let url = this._url_list[url_key];
        if (!url) {
            throw new Error(`[OWebUrl] url key "${url_key}" is not defined.`);
        }
        if (isServerUrl(url_key))
            return this.resolveServer(url);
        if (isLocalUrl(url_key))
            return this.resolveLocal(url);
        return url;
    }
    resolveLocal(url) {
        return PathResolver.resolve(this._url_local_base, url);
    }
    resolveServer(url) {
        return PathResolver.resolve(this._url_server_base, url);
    }
}
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYlVybC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9PV2ViVXJsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sWUFBWSxNQUFNLHNCQUFzQixDQUFDO0FBRWhELElBQUksV0FBVyxHQUFHLFVBQVUsT0FBZTtJQUMxQyxPQUFPLGFBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEMsQ0FBQyxDQUFDO0FBRUYsSUFBSSxVQUFVLEdBQUcsVUFBVSxPQUFlO0lBQ3pDLE9BQU8sWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNuQyxDQUFDLENBQUM7QUFJRixNQUFNLENBQUMsT0FBTztJQUtiLFlBQVksT0FBZ0IsRUFBRSxRQUFrQjtRQUMvQyxJQUFJLENBQUMsU0FBUyxHQUFVLFFBQVEsQ0FBQztRQUNqQyxJQUFJLENBQUMsZUFBZSxHQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDckUsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFFL0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxHQUFHLENBQUMsT0FBZTtRQUNsQixJQUFJLEdBQUcsR0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTFDLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDVCxNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixPQUFPLG1CQUFtQixDQUFDLENBQUM7U0FDbEU7UUFFRCxJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUM7WUFBRSxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekQsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXZELE9BQU8sR0FBRyxDQUFDO0lBQ1osQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFXO1FBQ3ZCLE9BQU8sWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxhQUFhLENBQUMsR0FBVztRQUN4QixPQUFPLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3pELENBQUM7Q0FDRDtBQUFBLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT1dlYkFwcCBmcm9tIFwiLi9PV2ViQXBwXCI7XHJcbmltcG9ydCBQYXRoUmVzb2x2ZXIgZnJvbSBcIi4vdXRpbHMvUGF0aFJlc29sdmVyXCI7XHJcblxyXG5sZXQgaXNTZXJ2ZXJVcmwgPSBmdW5jdGlvbiAodXJsX2tleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIC9eT1pfU0VSVkVSXy8udGVzdCh1cmxfa2V5KTtcclxufTtcclxuXHJcbmxldCBpc0xvY2FsVXJsID0gZnVuY3Rpb24gKHVybF9rZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiAvXk9XX0xPQ0FMXy8udGVzdCh1cmxfa2V5KTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIHRVcmxMaXN0ID0geyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9XZWJVcmwge1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3VybF9saXN0OiB0VXJsTGlzdDtcclxuXHRwcml2YXRlIHJlYWRvbmx5IF91cmxfbG9jYWxfYmFzZTogc3RyaW5nO1xyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3VybF9zZXJ2ZXJfYmFzZTogc3RyaW5nO1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihjb250ZXh0OiBPV2ViQXBwLCB1cmxfbGlzdDogdFVybExpc3QpIHtcclxuXHRcdHRoaXMuX3VybF9saXN0ICAgICAgICA9IHVybF9saXN0O1xyXG5cdFx0dGhpcy5fdXJsX2xvY2FsX2Jhc2UgID0gY29udGV4dC5jb25maWdzLmdldChcIk9XX0FQUF9MT0NBTF9CQVNFX1VSTFwiKTtcclxuXHRcdHRoaXMuX3VybF9zZXJ2ZXJfYmFzZSA9IGNvbnRleHQuY29uZmlncy5nZXQoXCJPWl9BUElfQkFTRV9VUkxcIik7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJbT1dlYlVybF0gcmVhZHkhXCIpO1xyXG5cdH1cclxuXHJcblx0Z2V0KHVybF9rZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRsZXQgdXJsOiBzdHJpbmcgPSB0aGlzLl91cmxfbGlzdFt1cmxfa2V5XTtcclxuXHJcblx0XHRpZiAoIXVybCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFtPV2ViVXJsXSB1cmwga2V5IFwiJHt1cmxfa2V5fVwiIGlzIG5vdCBkZWZpbmVkLmApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpc1NlcnZlclVybCh1cmxfa2V5KSkgcmV0dXJuIHRoaXMucmVzb2x2ZVNlcnZlcih1cmwpO1xyXG5cdFx0aWYgKGlzTG9jYWxVcmwodXJsX2tleSkpIHJldHVybiB0aGlzLnJlc29sdmVMb2NhbCh1cmwpO1xyXG5cclxuXHRcdHJldHVybiB1cmw7XHJcblx0fVxyXG5cclxuXHRyZXNvbHZlTG9jYWwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIFBhdGhSZXNvbHZlci5yZXNvbHZlKHRoaXMuX3VybF9sb2NhbF9iYXNlLCB1cmwpO1xyXG5cdH1cclxuXHJcblx0cmVzb2x2ZVNlcnZlcih1cmw6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gUGF0aFJlc29sdmVyLnJlc29sdmUodGhpcy5fdXJsX3NlcnZlcl9iYXNlLCB1cmwpO1xyXG5cdH1cclxufTsiXX0=