import OTelInput from "o-tel-input";
import OWebFormValidator from "../OWebFormValidator";
import OWebDate from "../plugins/OWebDate";
import Utils from "../utils/Utils";
OWebFormValidator.addFieldValidators({
    "code": (value, name, fv) => {
        let codeReg = new RegExp(fv.getConfig("OZ_CODE_REG"));
        fv.assert(codeReg.test(value), "OZ_AUTH_CODE_INVALID");
    },
    "uname": (value, name, fv) => {
        value = value.replace(/\s+/g, " ").trim();
        fv.assert(value.length >= fv.getConfig("OZ_USER_NAME_MIN_LENGTH"), "OZ_FIELD_USER_NAME_TOO_SHORT")
            .assert(value.length <= fv.getConfig("OZ_USER_NAME_MAX_LENGTH"), "OZ_FIELD_USER_NAME_TOO_LONG")
            .setField(name, value);
    },
    "login_pass": (value, name, fv) => {
        let pass = value, min = fv.getConfig("OZ_PASS_MIN_LENGTH"), max = fv.getConfig("OZ_PASS_MAX_LENGTH");
        fv.assert(pass.length >= min, "OZ_FIELD_PASS_INVALID")
            .assert(pass.length <= max, "OZ_FIELD_PASS_INVALID");
    },
    "pass": (value, name, fv) => {
        let pass = value, min = fv.getConfig("OZ_PASS_MIN_LENGTH"), max = fv.getConfig("OZ_PASS_MAX_LENGTH");
        fv.assert(pass.length >= min, "OZ_FIELD_PASS_TOO_SHORT", { "min": min, "max": max })
            .assert(pass.length <= max, "OZ_FIELD_PASS_TOO_LONG", { "min": min, "max": max });
    },
    "vpass": (value, name, fv) => {
        fv.assert(value === fv.getField("pass"), "OZ_FIELD_PASS_AND_VPASS_NOT_EQUAL");
    },
    "birth_date": (value, name, fv) => {
        let od = OWebDate.fromInputValue(value), date = od && od.describe(), min_age = fv.getConfig("OZ_USER_MIN_AGE"), max_age = fv.getConfig("OZ_USER_MAX_AGE"), isValid = date && Utils.isValidAge(date.d, parseInt(date.mm), date.Y, min_age, max_age);
        fv.assert(isValid, "OZ_FIELD_BIRTH_DATE_INVALID", { "input": value, "min": min_age, "max": max_age });
        date && fv.setField(name, `${date.Y}-${date.mm}-${date.d}`);
    },
    "gender": (value, name, fv) => {
        let genders = fv.getConfig("OZ_USER_ALLOWED_GENDERS");
        fv.assert(genders.indexOf(value) >= 0, "OZ_FIELD_GENDER_INVALID");
    },
    "phone": (value, name, fv) => {
        fv.assert(OTelInput.isPhoneNumberPossible(value), "OZ_FIELD_PHONE_INVALID");
        let t = OTelInput(null, { "number": value });
        let phone = t.getInput();
        let cc2 = t.getCurrentData().cc2;
        fv.setField(name, phone.replace(/[ -]/g, ""));
        // set only if it is not already set
        // we may have multiple phone field or a cc2 field
        if (!fv.getField("cc2")) {
            fv.setField("cc2", cc2);
        }
    },
    "email": (value, name, fv) => {
        /**
         * Email matching regex
         *
         * source: http://www.w3.org/TR/html5/forms.html#valid-e-mail-address
         *        - TLD not required
         *            /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/
         *        - must have TLD
         *            /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/
         */
        let emailReg = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;
        let email = value.replace(/\s/g, " ").trim();
        fv.assert(emailReg.test(email), "OZ_FIELD_EMAIL_INVALID")
            .setField(name, email);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZGVmYXVsdC9mdi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLFNBQVMsTUFBTSxhQUFhLENBQUM7QUFDcEMsT0FBTyxpQkFBaUIsTUFBTSxzQkFBc0IsQ0FBQztBQUNyRCxPQUFPLFFBQVEsTUFBTSxxQkFBcUIsQ0FBQztBQUMzQyxPQUFPLEtBQUssTUFBTSxnQkFBZ0IsQ0FBQztBQUVuQyxpQkFBaUIsQ0FBQyxrQkFBa0IsQ0FBQztJQUNwQyxNQUFNLEVBQVEsQ0FBQyxLQUFVLEVBQUUsSUFBWSxFQUFFLEVBQXFCLEVBQUUsRUFBRTtRQUNqRSxJQUFJLE9BQU8sR0FBRyxJQUFJLE1BQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFDdEQsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUNELE9BQU8sRUFBTyxDQUFDLEtBQVUsRUFBRSxJQUFZLEVBQUUsRUFBcUIsRUFBRSxFQUFFO1FBQ2pFLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUUxQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLDhCQUE4QixDQUFDO2FBQ2hHLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsRUFBRSw2QkFBNkIsQ0FBQzthQUM5RixRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7SUFDRCxZQUFZLEVBQUUsQ0FBQyxLQUFVLEVBQUUsSUFBWSxFQUFFLEVBQXFCLEVB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U0FBUyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxFQUFFLHdCQUF3QixDQUFDLENBQUM7UUFFNUUsSUFBSSxDQUFDLEdBQU8sU0FBUyxDQUFDLElBQUksRUFBRSxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDO1FBQy9DLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN6QixJQUFJLEdBQUcsR0FBSyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUMsR0FBRyxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFOUMsb0NBQW9DO1FBQ3BDLGtEQUFrRDtRQUNsRCxJQUFJLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN4QixFQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztTQUN4QjtJQUNGLENBQUM7SUFDRCxPQUFPLEVBQU8sQ0FBQyxLQUFVLEVBQUUsSUFBWSxFQUFFLEVBQXFCLEVBQUUsRUFBRTtRQUNqRTs7Ozs7Ozs7V0FRRztRQUNILElBQUksUUFBUSxHQUFHLHNJQUFzSSxDQUFDO1FBQ3RKLElBQUksS0FBSyxHQUFNLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRWhELEVBQUUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSx3QkFBd0IsQ0FBQzthQUN2RCxRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUM7Q0FDRCxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT1RlbElucHV0IGZyb20gXCJvLXRlbC1pbnB1dFwiO1xuaW1wb3J0IE9XZWJGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9PV2ViRm9ybVZhbGlkYXRvclwiO1xuaW1wb3J0IE9XZWJEYXRlIGZyb20gXCIuLi9wbHVnaW5zL09XZWJEYXRlXCI7XG5pbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzL1V0aWxzXCI7XG5cbk9XZWJGb3JtVmFsaWRhdG9yLmFkZEZpZWxkVmFsaWRhdG9ycyh7XG5cdFwiY29kZVwiICAgICAgOiAodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nLCBmdjogT1dlYkZvcm1WYWxpZGF0b3IpID0+IHtcblx0XHRsZXQgY29kZVJlZyA9IG5ldyBSZWdFeHAoZnYuZ2V0Q29uZmlnKFwiT1pfQ09ERV9SRUdcIikpO1xuXHRcdGZ2LmFzc2VydChjb2RlUmVnLnRlc3QodmFsdWUpLCBcIk9aX0FVVEhfQ09ERV9JTlZBTElEXCIpO1xuXHR9LFxuXHRcInVuYW1lXCIgICAgIDogKHZhbHVlOiBhbnksIG5hbWU6IHN0cmluZywgZnY6IE9XZWJGb3JtVmFsaWRhdG9yKSA9PiB7XG5cdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCk7XG5cblx0XHRmdi5hc3NlcnQodmFsdWUubGVuZ3RoID49IGZ2LmdldENvbmZpZyhcIk9aX1VTRVJfTkFNRV9NSU5fTEVOR1RIXCIpLCBcIk9aX0ZJRUxEX1VTRVJfTkFNRV9UT09fU0hPUlRcIilcblx0XHRcdC5hc3NlcnQodmFsdWUubGVuZ3RoIDw9IGZ2LmdldENvbmZpZyhcIk9aX1VTRVJfTkFNRV9NQVhfTEVOR1RIXCIpLCBcIk9aX0ZJRUxEX1VTRVJfTkFNRV9UT09fTE9OR1wiKVxuXHRcdFx0LnNldEZpZWxkKG5hbWUsIHZhbHVlKTtcblx0fSxcblx0XCJsb2dpbl9wYXNzXCI6ICh2YWx1ZTogYW55LCBuYW1lOiBzdHJpbmcsIGZ2OiBPV2ViRm9ybVZhbGlkYXRvcikgPT4ge1xuXHRcdGxldCBwYXNzID0gdmFsdWUsXG5cdFx0XHRtaW4gID0gZnYuZ2V0Q29uZmlnKFwiT1pfUEFTU19NSU5fTEVOR1RIXCIpLFxuXHRcdFx0bWF4ICA9IGZ2LmdldENvbmZpZyhcIk9aX1BBU1NfTUFYX0xFTkdUSFwiKTtcblx0XHRmdi5hc3NlcnQocGFzcy5sZW5ndGggPj0gbWluLCBcIk9aX0ZJRUxEX1BBU1NfSU5WQUxJRFwiKVxuXHRcdFx0LmFzc2VydChwYXNzLmxlbmd0aCA8PSBtYXgsIFwiT1pfRklFTERfUEFTU19JTlZBTElEXCIpO1xuXHR9LFxuXHRcInBhc3NcIiAgICAgIDogKHZhbHVlOiBhbnksIG5hbWU6IHN0cmluZywgZnY6IE9XZWJGb3JtVmFsaWRhdG9yKSA9PiB7XG5cdFx0bGV0IHBhc3MgPSB2YWx1ZSxcblx0XHRcdG1pbiAgPSBmdi5nZXRDb25maWcoXCJPWl9QQVNTX01JTl9MRU5HVEhcIiksXG5cdFx0XHRtYXggID0gZnYuZ2V0Q29uZmlnKFwiT1pfUEFTU19NQVhfTEVOR1RIXCIpO1xuXHRcdGZ2LmFzc2VydChwYXNzLmxlbmd0aCA+PSBtaW4sIFwiT1pfRklFTERfUEFTU19UT09fU0hPUlRcIiwge1wibWluXCI6IG1pbiwgXCJtYXhcIjogbWF4fSlcblx0XHRcdC5hc3NlcnQocGFzcy5sZW5ndGggPD0gbWF4LCBcIk9aX0ZJRUxEX1BBU1NfVE9PX0xPTkdcIiwge1wibWluXCI6IG1pbiwgXCJtYXhcIjogbWF4fSk7XG5cdH0sXG5cdFwidnBhc3NcIiAgICAgOiAodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nLCBmdjogT1dlYkZvcm1WYWxpZGF0b3IpID0+IHtcblx0XHRmdi5hc3NlcnQodmFsdWUgPT09IGZ2LmdldEZpZWxkKFwicGFzc1wiKSwgXCJPWl9GSUVMRF9QQVNTX0FORF9WUEFTU19OT1RfRVFVQUxcIik7XG5cdH0sXG5cdFwiYmlydGhfZGF0ZVwiOiAodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nLCBmdjogT1dlYkZvcm1WYWxpZGF0b3IpID0+IHtcblx0XHRsZXQgb2QgICAgICA9IE9XZWJEYXRlLmZyb21JbnB1dFZhbHVlKHZhbHVlKSxcblx0XHRcdGRhdGUgICAgPSBvZCAmJiBvZC5kZXNjcmliZSgpLFxuXHRcdFx0bWluX2FnZSA9IGZ2LmdldENvbmZpZyhcIk9aX1VTRVJfTUlOX0FHRVwiKSxcblx0XHRcdG1heF9hZ2UgPSBmdi5nZXRDb25maWcoXCJPWl9VU0VSX01BWF9BR0VcIiksXG5cdFx0XHRpc1ZhbGlkID0gZGF0ZSAmJiBVdGlscy5pc1ZhbGlkQWdlKGRhdGUuZCwgcGFyc2VJbnQoZGF0ZS5tbSksIGRhdGUuWSwgbWluX2FnZSwgbWF4X2FnZSk7XG5cblx0XHRmdi5hc3NlcnQoaXNWYWxpZCwgXCJPWl9GSUVMRF9CSVJUSF9EQVRFX0lOVkFMSURcIiwge1wiaW5wdXRcIjogdmFsdWUsIFwibWluXCI6IG1pbl9hZ2UsIFwibWF4XCI6IG1heF9hZ2V9KTtcblxuXHRcdGRhdGUgJiYgZnYuc2V0RmllbGQobmFtZSwgYCR7ZGF0ZS5ZfS0ke2RhdGUubW19LSR7ZGF0ZS5kfWApO1xuXHR9LFxuXHRcImdlbmRlclwiICAgIDogKHZhbHVlOiBhbnksIG5hbWU6IHN0cmluZywgZnY6IE9XZWJGb3JtVmFsaWRhdG9yKSA9PiB7XG5cdFx0bGV0IGdlbmRlcnMgPSBmdi5nZXRDb25maWcoXCJPWl9VU0VSX0FMTE9XRURfR0VOREVSU1wiKTtcblx0XHRmdi5hc3NlcnQoZ2VuZGVycy5pbmRleE9mKHZhbHVlKSA+PSAwLCBcIk9aX0ZJRUxEX0dFTkRFUl9JTlZBTElEXCIpO1xuXHR9LFxuXHRcInBob25lXCIgICAgIDogKHZhbHVlOiBhbnksIG5hbWU6IHN0cmluZywgZnY6IE9XZWJGb3JtVmFsaWRhdG9yKSA9PiB7XG5cdFx0ZnYuYXNzZXJ0KE9UZWxJbnB1dC5pc1Bob25lTnVtYmVyUG9zc2libGUodmFsdWUpLCBcIk9aX0ZJRUxEX1BIT05FX0lOVkFMSURcIik7XG5cblx0XHRsZXQgdCAgICAgPSBPVGVsSW5wdXQobnVsbCwge1wibnVtYmVyXCI6IHZhbHVlfSk7XG5cdFx0bGV0IHBob25lID0gdC5nZXRJbnB1dCgpO1xuXHRcdGxldCBjYzIgICA9IHQuZ2V0Q3VycmVudERhdGEoKS5jYzI7XG5cblx0XHRmdi5zZXRGaWVsZChuYW1lLCBwaG9uZS5yZXBsYWNlKC9bIC1dL2csIFwiXCIpKTtcblxuXHRcdC8vIHNldCBvbmx5IGlmIGl0IGlzIG5vdCBhbHJlYWR5IHNldFxuXHRcdC8vIHdlIG1heSBoYXZlIG11bHRpcGxlIHBob25lIGZpZWxkIG9yIGEgY2MyIGZpZWxkXG5cdFx0aWYgKCFmdi5nZXRGaWVsZChcImNjMlwiKSkge1xuXHRcdFx0ZnYuc2V0RmllbGQoXCJjYzJcIiwgY2MyKTtcblx0XHR9XG5cdH0sXG5cdFwiZW1haWxcIiAgICAgOiAodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nLCBmdjogT1dlYkZvcm1WYWxpZGF0b3IpID0+IHtcblx0XHQvKipcblx0XHQgKiBFbWFpbCBtYXRjaGluZyByZWdleFxuXHRcdCAqXG5cdFx0ICogc291cmNlOiBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9mb3Jtcy5odG1sI3ZhbGlkLWUtbWFpbC1hZGRyZXNzXG5cdFx0ICogICAgICAgIC0gVExEIG5vdCByZXF1aXJlZFxuXHRcdCAqICAgICAgICAgICAgL15bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvXG5cdFx0ICogICAgICAgIC0gbXVzdCBoYXZlIFRMRFxuXHRcdCAqICAgICAgICAgICAgL15bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKyQvXG5cdFx0ICovXG5cdFx0bGV0IGVtYWlsUmVnID0gL15bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKyQvO1xuXHRcdGxldCBlbWFpbCAgICA9IHZhbHVlLnJlcGxhY2UoL1xccy9nLCBcIiBcIikudHJpbSgpO1xuXG5cdFx0ZnYuYXNzZXJ0KGVtYWlsUmVnLnRlc3QoZW1haWwpLCBcIk9aX0ZJRUxEX0VNQUlMX0lOVkFMSURcIilcblx0XHRcdC5zZXRGaWVsZChuYW1lLCBlbWFpbCk7XG5cdH1cbn0pOyJdfQ==