import { cleanRequestOptions, } from './ozone';
export default class OWebService {
    _appContext;
    name;
    /**
     * OWebService constructor.
     *
     * @param _appContext The app context.
     * @param name The service name.
     */
    constructor(_appContext, name) {
        this._appContext = _appContext;
        this.name = name;
    }
    /**
     * Make request to a specific endpoint using this service as base url.
     */
    request(path, options) {
        const oz = this._appContext.oz, url = oz.toAbsoluteURI(this.name, path);
        return oz.request(url, options);
    }
    /**
     * Returns the service name.
     */
    getName() {
        return this.name;
    }
    /**
     * Adds an entity.
     *
     * @param formData
     */
    addItem(formData) {
        const oz = this._appContext.oz, url = oz.getServiceURI(this.name);
        return oz.request(url, {
            method: 'POST',
            body: formData,
        });
    }
    /**
     * Deletes the entity with the given id.
     *
     * @param id The entity id.
     */
    deleteItem(id) {
        const oz = this._appContext.oz, url = oz.getItemURI(this.name, id);
        return oz.request(url, {
            method: 'DELETE',
        });
    }
    /**
     * Updates the entity with the given id.
     *
     * @param id The entity id.
     * @param formData
     */
    updateItem(id, formData) {
        const oz = this._appContext.oz, url = oz.getItemURI(this.name, id);
        return oz.request(url, {
            method: 'PATCH',
            body: formData,
        });
    }
    /**
     * Deletes all entities.
     *
     * @param options
     */
    deleteItems(options) {
        const oz = this._appContext.oz, url = oz.getServiceURI(this.name);
        return oz.request(url, {
            method: 'DELETE',
            params: cleanRequestOptions(options),
        });
    }
    /**
     * Updates all entities.
     *
     * @param options
     */
    updateItems(options) {
        const oz = this._appContext.oz, url = oz.getServiceURI(this.name);
        return oz.request(url, {
            method: 'PATCH',
            body: cleanRequestOptions(options),
        });
    }
    /**
     * Gets an entity with the given id.
     *
     * All requested relations names are joined with `|`.
     * example: `relation1|relation2|relationX`.
     *
     * @param id The entity id.
     * @param relations The relations string.
     */
    getItem(id, relations = '') {
        const oz = this._appContext.oz, url = oz.getItemURI(this.name, id), options = {};
        if (relations.length) {
            options.relations = relations;
        }
        return oz.request(url, {
            method: 'GET',
            params: cleanRequestOptions(options),
        });
    }
    /**
     * Gets all entities.
     *
     * @param options
     */
    getItems(options) {
        const oz = this._appContext.oz, url = oz.getServiceURI(this.name);
        return oz.request(url, {
            method: 'GET',
            params: cleanRequestOptions(options),
        });
    }
    /**
     * Gets a single item relation for a given entity id.
     *
     * @param id The entity id.
     * @param relation The relation name
     */
    getRelationItem(id, relation) {
        const oz = this._appContext.oz, url = oz.getItemRelationURI(this.name, id, relation);
        return oz.request(url, {
            method: 'GET',
        });
    }
    /**
     * Gets multiple items relation for a given entity id.
     *
     * @param id The entity id.
     * @param relation The relation name.
     * @param options
     */
    getRelationItems(id, relation, options) {
        const oz = this._appContext.oz, url = oz.getItemRelationURI(this.name, id, relation);
        return oz.request(url, {
            method: 'GET',
            params: cleanRequestOptions(options),
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT1dlYlNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvT1dlYlNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQVdOLG1CQUFtQixHQUVuQixNQUFNLFNBQVMsQ0FBQztBQUlqQixNQUFNLENBQUMsT0FBTyxPQUFPLFdBQVc7SUFRWDtJQUNUO0lBUlg7Ozs7O09BS0c7SUFDSCxZQUNvQixXQUFvQixFQUM3QixJQUFZO1FBREgsZ0JBQVcsR0FBWCxXQUFXLENBQVM7UUFDN0IsU0FBSSxHQUFKLElBQUksQ0FBUTtJQUNwQixDQUFDO0lBRUo7O09BRUc7SUFDSCxPQUFPLENBQ04sSUFBWSxFQUNaLE9BQStDO1FBRS9DLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxFQUM3QixHQUFHLEdBQUcsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRXpDLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDakMsQ0FBQztJQUVEOztPQUVHO0lBQ0gsT0FBTztRQUNOLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNsQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILE9BQU8sQ0FBQyxRQUF5QjtRQUNoQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsRUFDN0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRW5DLE9BQU8sRUFBRSxDQUFDLE9BQU8sQ0FBMEIsR0FBRyxFQUFFO1lBQy9DLE1BQU0sRUFBRSxNQUFNO1lBQ2QsSUFBSSxFQUFFLFFBQVE7U0FDZCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILFVBQVUsQ0FBQyxFQUFVO1FBQ3BCLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FB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RSxRQUFRLENBQUMsQ0FBQztRQUV0RCxPQUFPLEVBQUUsQ0FBQyxPQUFPLENBQWlDLEdBQUcsRUFBRTtZQUN0RCxNQUFNLEVBQUUsS0FBSztTQUNiLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxnQkFBZ0IsQ0FDZixFQUFVLEVBQ1YsUUFBZ0IsRUFDaEIsT0FBa0M7UUFFbEMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQzdCLEdBQUcsR0FBRyxFQUFFLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFFdEQsT0FBTyxFQUFFLENBQUMsT0FBTyxDQUEyQyxHQUFHLEVBQUU7WUFDaEUsTUFBTSxFQUFFLEtBQUs7WUFDYixNQUFNLEVBQUUsbUJBQW1CLENBQUMsT0FBTyxDQUFDO1NBQ3BDLENBQUMsQ0FBQztJQUNKLENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPV2ViQXBwIGZyb20gJy4vT1dlYkFwcCc7XG5pbXBvcnQge1xuXHRPQXBpQWRkUmVzcG9uc2UsXG5cdE9BcGlEZWxldGVBbGxSZXNwb25zZSxcblx0T0FwaURlbGV0ZVJlc3BvbnNlLFxuXHRPQXBpR2V0QWxsUmVzcG9uc2UsXG5cdE9BcGlHZXRSZWxhdGlvbkl0ZW1SZXNwb25zZSxcblx0T0FwaUdldFBhZ2luYXRlZFJlbGF0aW9uSXRlbXNSZXNwb25zZSxcblx0T0FwaUdldFJlc3BvbnNlLFxuXHRPQXBpU2VydmljZVJlcXVlc3RPcHRpb25zLFxuXHRPQXBpVXBkYXRlQWxsUmVzcG9uc2UsXG5cdE9BcGlVcGRhdGVSZXNwb25zZSxcblx0Y2xlYW5SZXF1ZXN0T3B0aW9ucyxcblx0T0FwaVJlc3BvbnNlLFxufSBmcm9tICcuL296b25lJztcbmltcG9ydCBPV2ViWEhSIGZyb20gJy4vT1dlYlhIUic7XG5pbXBvcnQgeyBPTmV0UmVxdWVzdEJvZHksIE9OZXRSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vT1dlYk5ldCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9XZWJTZXJ2aWNlPEVudGl0eT4ge1xuXHQvKipcblx0ICogT1dlYlNlcnZpY2UgY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEBwYXJhbSBfYXBwQ29udGV4dCBUaGUgYXBwIGNvbnRleHQuXG5cdCAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWUuXG5cdCAqL1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcm90ZWN0ZWQgcmVhZG9ubHkgX2FwcENvbnRleHQ6IE9XZWJBcHAsXG5cdFx0cHJvdGVjdGVkIG5hbWU6IHN0cmluZ1xuXHQpIHt9XG5cblx0LyoqXG5cdCAqIE1ha2UgcmVxdWVzdCB0byBhIHNwZWNpZmljIGVuZHBvaW50IHVzaW5nIHRoaXMgc2VydmljZSBhcyBiYXNlIHVybC5cblx0ICovXG5cdHJlcXVlc3Q8UmVzcG9uc2UgZXh0ZW5kcyBPQXBpUmVzcG9uc2U8YW55Pj4oXG5cdFx0cGF0aDogc3RyaW5nLFxuXHRcdG9wdGlvbnM/OiBQYXJ0aWFsPE9OZXRSZXF1ZXN0T3B0aW9uczxSZXNwb25zZT4+XG5cdCk6IE9XZWJYSFI8UmVzcG9uc2U+IHtcblx0XHRjb25zdCBveiA9IHRoaXMuX2FwcENvbnRleHQub3osXG5cdFx0XHR1cmwgPSBvei50b0Fic29sdXRlVVJJKHRoaXMubmFtZSwgcGF0aCk7XG5cblx0XHRyZXR1cm4gb3oucmVxdWVzdCh1cmwsIG9wdGlvbnMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHNlcnZpY2UgbmFtZS5cblx0ICovXG5cdGdldE5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5uYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYW4gZW50aXR5LlxuXHQgKlxuXHQgKiBAcGFyYW0gZm9ybURhdGFcblx0ICovXG5cdGFkZEl0ZW0oZm9ybURhdGE6IE9OZXRSZXF1ZXN0Qm9keSk6IE9XZWJYSFI8T0FwaUFkZFJlc3BvbnNlPEVudGl0eT4+IHtcblx0XHRjb25zdCBveiA9IHRoaXMuX2FwcENvbnRleHQub3osXG5cdFx0XHR1cmwgPSBvei5nZXRTZXJ2aWNlVVJJKHRoaXMubmFtZSk7XG5cblx0XHRyZXR1cm4gb3oucmVxdWVzdDxPQXBpQWRkUmVzcG9uc2U8RW50aXR5Pj4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdGJvZHk6IGZvcm1EYXRhLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZXMgdGhlIGVudGl0eSB3aXRoIHRoZSBnaXZlbiBpZC5cblx0ICpcblx0ICogQHBhcmFtIGlkIFRoZSBlbnRpdHkgaWQuXG5cdCAqL1xuXHRkZWxldGVJdGVtKGlkOiBzdHJpbmcpOiBPV2ViWEhSPE9BcGlEZWxldGVSZXNwb25zZTxFbnRpdHk+PiB7XG5cdFx0Y29uc3Qgb3ogPSB0aGlzLl9hcHBDb250ZXh0Lm96LFxuXHRcdFx0dXJsID0gb3ouZ2V0SXRlbVVSSSh0aGlzLm5hbWUsIGlkKTtcblxuXHRcdHJldHVybiBvei5yZXF1ZXN0PE9BcGlEZWxldGVSZXNwb25zZTxFbnRpdHk+Pih1cmwsIHtcblx0XHRcdG1ldGhvZDogJ0RFTEVURScsXG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlcyB0aGUgZW50aXR5IHdpdGggdGhlIGdpdmVuIGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0gaWQgVGhlIGVudGl0eSBpZC5cblx0ICogQHBhcmFtIGZvcm1EYXRhXG5cdCAqL1xuXHR1cGRhdGVJdGVtKFxuXHRcdGlkOiBzdHJpbmcsXG5cdFx0Zm9ybURhdGE6IE9OZXRSZXF1ZXN0Qm9keVxuXHQpOiBPV2ViWEhSPE9BcGlVcGRhdGVSZXNwb25zZTxFbnRpdHk+PiB7XG5cdFx0Y29uc3Qgb3ogPSB0aGlzLl9hcHBDb250ZXh0Lm96LFxuXHRcdFx0dXJsID0gb3ouZ2V0SXRlbVVSSSh0aGlzLm5hbWUsIGlkKTtcblxuXHRcdHJldHVybiBvei5yZXF1ZXN0PE9BcGlVcGRhdGVSZXNwb25zZTxFbnRpdHk+Pih1cmwsIHtcblx0XHRcdG1ldGhvZDogJ1BBVENIJyxcblx0XHRcdGJvZHk6IGZvcm1EYXRhLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGV0ZXMgYWxsIGVudGl0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKi9cblx0ZGVsZXRlSXRlbXMoXG5cdFx0b3B0aW9uczogT0FwaVNlcnZpY2VSZXF1ZXN0T3B0aW9uc1xuXHQpOiBPV2ViWEhSPE9BcGlEZWxldGVBbGxSZXNwb25zZT4ge1xuXHRcdGNvbnN0IG96ID0gdGhpcy5fYXBwQ29udGV4dC5veixcblx0XHRcdHVybCA9IG96LmdldFNlcnZpY2VVUkkodGhpcy5uYW1lKTtcblxuXHRcdHJldHVybiBvei5yZXF1ZXN0PE9BcGlEZWxldGVBbGxSZXNwb25zZT4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdERUxFVEUnLFxuXHRcdFx0cGFyYW1zOiBjbGVhblJlcXVlc3RPcHRpb25zKG9wdGlvbnMpLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgYWxsIGVudGl0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKi9cblx0dXBkYXRlSXRlbXMoXG5cdFx0b3B0aW9uczogT0FwaVNlcnZpY2VSZXF1ZXN0T3B0aW9uc1xuXHQpOiBPV2ViWEhSPE9BcGlVcGRhdGVBbGxSZXNwb25zZT4ge1xuXHRcdGNvbnN0IG96ID0gdGhpcy5fYXBwQ29udGV4dC5veixcblx0XHRcdHVybCA9IG96LmdldFNlcnZpY2VVUkkodGhpcy5uYW1lKTtcblxuXHRcdHJldHVybiBvei5yZXF1ZXN0PE9BcGlVcGRhdGVBbGxSZXNwb25zZT4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdQQVRDSCcsXG5cdFx0XHRib2R5OiBjbGVhblJlcXVlc3RPcHRpb25zKG9wdGlvbnMpLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgYW4gZW50aXR5IHdpdGggdGhlIGdpdmVuIGlkLlxuXHQgKlxuXHQgKiBBbGwgcmVxdWVzdGVkIHJlbGF0aW9ucyBuYW1lcyBhcmUgam9pbmVkIHdpdGggYHxgLlxuXHQgKiBleGFtcGxlOiBgcmVsYXRpb24xfHJlbGF0aW9uMnxyZWxhdGlvblhgLlxuXHQgKlxuXHQgKiBAcGFyYW0gaWQgVGhlIGVudGl0eSBpZC5cblx0ICogQHBhcmFtIHJlbGF0aW9ucyBUaGUgcmVsYXRpb25zIHN0cmluZy5cblx0ICovXG5cdGdldEl0ZW0oaWQ6IHN0cmluZywgcmVsYXRpb25zID0gJycpOiBPV2ViWEhSPE9BcGlHZXRSZXNwb25zZTxFbnRpdHk+PiB7XG5cdFx0Y29uc3Qgb3ogPSB0aGlzLl9hcHBDb250ZXh0Lm96LFxuXHRcdFx0dXJsID0gb3ouZ2V0SXRlbVVSSSh0aGlzLm5hbWUsIGlkKSxcblx0XHRcdG9wdGlvbnM6IE9BcGlTZXJ2aWNlUmVxdWVzdE9wdGlvbnMgPSB7fTtcblxuXHRcdGlmIChyZWxhdGlvbnMubGVuZ3RoKSB7XG5cdFx0XHRvcHRpb25zLnJlbGF0aW9ucyA9IHJlbGF0aW9ucztcblx0XHR9XG5cblx0XHRyZXR1cm4gb3oucmVxdWVzdDxPQXBpR2V0UmVzcG9uc2U8RW50aXR5Pj4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0cGFyYW1zOiBjbGVhblJlcXVlc3RPcHRpb25zKG9wdGlvbnMpLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgYWxsIGVudGl0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKi9cblx0Z2V0SXRlbXMoXG5cdFx0b3B0aW9uczogT0FwaVNlcnZpY2VSZXF1ZXN0T3B0aW9uc1xuXHQpOiBPV2ViWEhSPE9BcGlHZXRBbGxSZXNwb25zZTxFbnRpdHk+PiB7XG5cdFx0Y29uc3Qgb3ogPSB0aGlzLl9hcHBDb250ZXh0Lm96LFxuXHRcdFx0dXJsID0gb3ouZ2V0U2VydmljZVVSSSh0aGlzLm5hbWUpO1xuXG5cdFx0cmV0dXJuIG96LnJlcXVlc3Q8T0FwaUdldEFsbFJlc3BvbnNlPEVudGl0eT4+KHVybCwge1xuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdHBhcmFtczogY2xlYW5SZXF1ZXN0T3B0aW9ucyhvcHRpb25zKSxcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIGEgc2luZ2xlIGl0ZW0gcmVsYXRpb24gZm9yIGEgZ2l2ZW4gZW50aXR5IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0gaWQgVGhlIGVudGl0eSBpZC5cblx0ICogQHBhcmFtIHJlbGF0aW9uIFRoZSByZWxhdGlvbiBuYW1lXG5cdCAqL1xuXHRnZXRSZWxhdGlvbkl0ZW08Uj4oXG5cdFx0aWQ6IHN0cmluZyxcblx0XHRyZWxhdGlvbjogc3RyaW5nXG5cdCk6IE9XZWJYSFI8T0FwaUdldFJlbGF0aW9uSXRlbVJlc3BvbnNlPFI+PiB7XG5cdFx0Y29uc3Qgb3ogPSB0aGlzLl9hcHBDb250ZXh0Lm96LFxuXHRcdFx0dXJsID0gb3ouZ2V0SXRlbVJlbGF0aW9uVVJJKHRoaXMubmFtZSwgaWQsIHJlbGF0aW9uKTtcblxuXHRcdHJldHVybiBvei5yZXF1ZXN0PE9BcGlHZXRSZWxhdGlvbkl0ZW1SZXNwb25zZTxSPj4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgbXVsdGlwbGUgaXRlbXMgcmVsYXRpb24gZm9yIGEgZ2l2ZW4gZW50aXR5IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0gaWQgVGhlIGVudGl0eSBpZC5cblx0ICogQHBhcmFtIHJlbGF0aW9uIFRoZSByZWxhdGlvbiBuYW1lLlxuXHQgKiBAcGFyYW0gb3B0aW9uc1xuXHQgKi9cblx0Z2V0UmVsYXRpb25JdGVtczxSPihcblx0XHRpZDogc3RyaW5nLFxuXHRcdHJlbGF0aW9uOiBzdHJpbmcsXG5cdFx0b3B0aW9uczogT0FwaVNlcnZpY2VSZXF1ZXN0T3B0aW9uc1xuXHQpOiBPV2ViWEhSPE9BcGlHZXRQYWdpbmF0ZWRSZWxhdGlvbkl0ZW1zUmVzcG9uc2U8Uj4+IHtcblx0XHRjb25zdCBveiA9IHRoaXMuX2FwcENvbnRleHQub3osXG5cdFx0XHR1cmwgPSBvei5nZXRJdGVtUmVsYXRpb25VUkkodGhpcy5uYW1lLCBpZCwgcmVsYXRpb24pO1xuXG5cdFx0cmV0dXJuIG96LnJlcXVlc3Q8T0FwaUdldFBhZ2luYXRlZFJlbGF0aW9uSXRlbXNSZXNwb25zZTxSPj4odXJsLCB7XG5cdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0cGFyYW1zOiBjbGVhblJlcXVlc3RPcHRpb25zKG9wdGlvbnMpLFxuXHRcdH0pO1xuXHR9XG59XG4iXX0=